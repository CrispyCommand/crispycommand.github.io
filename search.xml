<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>[ABC147D] Xor Sum 4</title>
      <link href="/2021/02/24/ABC147D-Xor-Sum-4/"/>
      <url>/2021/02/24/ABC147D-Xor-Sum-4/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://atcoder.jp/contests/abc147/tasks/abc147_d" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 求 $\sum \limits_{i = 1}^{n - 1} \sum \limits_{j = i + 1}^{n} (a_i \text{ xor } a_j)$. $2 \le n \le 3 \times 10^5, 0 \le a_i &lt; 2^{60}$. 结果对 $10^9 + 7$ 取模.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>第一次打 ABC 不会做的题.</p><p>一般来说位运算的题就两种套路: 推式子, 按位考虑.</p><p>考虑每一位的贡献: 这一位上 $0$ 的个数乘 $1$ 的个数.</p><p>统计第 $i$ 位上 $1$ 的个数 $f_i$, 可以算出 $0$ 的个数为 $n - f_i$, 乘以 $2^{i - 1}$ 即为在十进制下的贡献.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">70</span>];</span><br><span class="line">LL n, ans, a, x = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(a);</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">while</span> (a) &#123;</span><br><span class="line">            f[j++] += a &amp; <span class="number">1L</span>L;</span><br><span class="line">            a &gt;&gt;= <span class="number">1L</span>L;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">60</span>; ++i) &#123;</span><br><span class="line">        ans = (ans + f[i] % mod * (n - f[i]) % mod * x % mod) % mod;</span><br><span class="line">        x = (x &lt;&lt; <span class="number">1L</span>L) % mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans % mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
          <category> 位运算 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AtCoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[TJOI2009] 猜数字</title>
      <link href="/2021/02/24/TJOI2009-%E7%8C%9C%E6%95%B0%E5%AD%97/"/>
      <url>/2021/02/24/TJOI2009-%E7%8C%9C%E6%95%B0%E5%AD%97/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P3868" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 分别给出 $k$ 个数 $\{a_k\}, \{b_k\}$. 求最小的自然数 $n$ 满足 $\forall i \in [1, k], b_i | (n - a_i)$. $1 \le k \le 10, |a_i| \le 10^9, 1 \le b_i \le 6 \times 10^3, \prod b_i \le 10^{18}, b_i$ 两两互质.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>由 $b_i | (n - a_i)$ 得到 $n - a_i = xb_i$, 即 $n \equiv a_i \pmod {b_i}$.</p><p>由于 $b_i$ 两两互质, 可以用 CRT 求解.</p><p>相乘可能会爆 <code>long long</code>, 使用龟速乘来解决这个问题.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL a[<span class="number">20</span>], b[<span class="number">20</span>];</span><br><span class="line">LL n, k, ans, M = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">mul</span><span class="params">(LL a, LL b, LL mod)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (b) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b &amp; <span class="number">1</span>)    s = (s + a) % mod;</span><br><span class="line">        a = (a + a) % mod;</span><br><span class="line">        b &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exGcd</span><span class="params">(LL a, LL b, LL &amp;x, LL &amp;y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    exGcd(b, a % b, y, x);</span><br><span class="line">    y -= a / b * x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">inv</span><span class="params">(LL a, LL b)</span> </span>&#123;</span><br><span class="line">    LL x, y;</span><br><span class="line">    exGcd(a, b, x, y);</span><br><span class="line">    <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i)    read(a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i)    read(b[i]), M *= b[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        LL mi = M / b[i], ti = inv(mi, b[i]);</span><br><span class="line">        ans = ((ans + mul(ti * a[i], mi, M)) % M + M) % M;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
          <category> 数论 </category>
          
          <category> 中国剩余定理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TJOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1479B] Painting the Array</title>
      <link href="/2021/02/19/CF1479B-Painting-the-Array/"/>
      <url>/2021/02/19/CF1479B-Painting-the-Array/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/contest/1479/problem/B1" target="_blank" rel="noopener">题目链接</a></p><p><a href="https://codeforces.com/contest/1479/problem/B2" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 给定序列 $\{a_n\}$, 对这个序列的每个元素都将其按相对顺序添加到 $a^0$ 或 $a^1$ 数组中. 求出两个新数组在合并连续相同的数后长度和的最大值和最小值. $1 \le n \le 10^5$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>先思考怎么求出最大值.</p><p>考虑贪心. 设 $n_0$ 为当前 $a^0$ 长度, $n_1$ 为当前 $a^1$ 长度.</p><p>如果 $a_i = a^0_{n_0} \neq a^1_{n_1}$, 显然将 $a_i$ 加入 $a^0$.</p><p>反之则加入 $a^1$.</p><p>若 $a_i \neq a^0_{n_0}$ 且 $a_i \neq a^1_{n_1}$, 放到哪边都没关系.</p><p>若 $a_i = a^0_{n_0} = a^1_{n_1}$, 这时我们需要考虑将 $a_i$ 添加到哪里. 此时我们引进一个东西 $nxt(i)$, 表示 $a_i$ 下一次出现的位置. 显然, 我们要将 $a_i$ 加入 $nxt$ 较小的那一方, 不然就有可能在下一步得不到最优解.</p><p>求最小值的方法只需要跟上面的方法反着来即可.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">100010</span>], nxt[<span class="number">100010</span>], pos[<span class="number">100010</span>], a1[<span class="number">100010</span>], a2[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, n1, n2, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        nxt[i] = pos[a[i]] ? pos[a[i]] : <span class="number">114514</span>;</span><br><span class="line">        pos[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    nxt[<span class="number">0</span>] = <span class="number">114514</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[a1[n1]] != a[i] &amp;&amp; a[a2[n2]] != a[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nxt[a1[n1]] &lt; nxt[a2[n2]]) &#123;</span><br><span class="line">                a1[++n1] = i;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a2[++n2] = i;</span><br><span class="line">            &#125;</span><br><span class="line">            ++ans;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[a1[n1]] != a[i]) &#123;</span><br><span class="line">            a1[++n1] = i;</span><br><span class="line">            ++ans;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[a2[n2]] != a[i]) &#123;</span><br><span class="line">            a2[++n2] = i;</span><br><span class="line">            ++ans;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            a1[++n1] = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">100010</span>], nxt[<span class="number">100010</span>], pos[<span class="number">100010</span>], a1[<span class="number">100010</span>], a2[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, n1, n2, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        nxt[i] = pos[a[i]] ? pos[a[i]] : <span class="number">114514</span>;</span><br><span class="line">        pos[a[i]] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    nxt[<span class="number">0</span>] = <span class="number">114514</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[a1[n1]] != a[i] &amp;&amp; a[a2[n2]] != a[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (nxt[a1[n1]] &gt; nxt[a2[n2]]) &#123;</span><br><span class="line">                a1[++n1] = i;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                a2[++n2] = i;</span><br><span class="line">            &#125;</span><br><span class="line">            ++ans;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[a1[n1]] == a[i]) &#123;</span><br><span class="line">            a1[++n1] = i;</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a[a2[n2]] == a[i]) &#123;</span><br><span class="line">            a2[++n2] = i;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            a1[++n1] = i;</span><br><span class="line">            ++ans;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 基础算法 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1479A] Searching Local Minimum</title>
      <link href="/2021/02/19/CF1479A-Searching-Local-Minimum/"/>
      <url>/2021/02/19/CF1479A-Searching-Local-Minimum/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/contest/1479/problem/A" target="_blank" rel="noopener">题目链接</a></p><p>现有一个长度为 $n$ 的排列 $\{a_n\}$. 你可以进行向交互库进行最多 $100$ 次询问, 每次返回 $a_i$ 的值. 要求找出一个 $i$ 使得 $a_i &lt; \min \{a_{i - 1}, a_{i + 1}\}$. $a_0 = a_{n + 1} = +\infty$. $1 \le n \le 10^5$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>我比赛时以为是要全部找出来, 然后感觉他题出错了 (</p><p>考虑二分. 每次取当前区间 $[l, r]$ 的中点 $m$, 并询问 $m - 1, m, m + 1$. 若 $m$ 满足条件直接输出.</p><p>若不满足, 如果 $a_{m - 1} &lt; a_{m + 1}$, 则在 $[1, m - 1]$ 中一定有一解.</p><p>证明: 若在 $[1, m - 1]$ 中不存在解, 则 $a$ 在 $[1, m - 1]$ 上单调递增, 即有 $i = 1$ 满足条件. 否则存在一个 $i \in [1, m - 1]$ 在使 $a$ 不单调的同时满足条件.</p><p>这样做的次数是对数级别的, 随便过了.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, l = <span class="number">1</span>, r;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!a[x]) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"? %d\n"</span>, x);</span><br><span class="line">        fflush(<span class="built_in">stdout</span>);</span><br><span class="line">        read(a[x]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    r = n;</span><br><span class="line">    a[<span class="number">0</span>] = a[n + <span class="number">1</span>] = <span class="number">114514</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        query(mid - <span class="number">1</span>), query(mid + <span class="number">1</span>), query(mid);</span><br><span class="line">        <span class="keyword">if</span> (a[mid] &lt; <span class="built_in">std</span>::min(a[mid + <span class="number">1</span>], a[mid - <span class="number">1</span>])) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"! %d\n"</span>, mid);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (a[mid - <span class="number">1</span>] &lt; a[mid + <span class="number">1</span>])    r = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>    l = mid + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 二分 </category>
          
          <category> 非传统题 </category>
          
          <category> 交互题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[Celeste-B] Golden Feather</title>
      <link href="/2021/02/18/Celeste-B-Golden-Feather/"/>
      <url>/2021/02/18/Celeste-B-Golden-Feather/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P5560" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 定义 $i$ 点权值为 $a_i = (i + 1)^2 - 1$, $i, j$ 间的边权为 $\gcd(a_i, a_j)$, 求 $n$ 个点 MST 的边权和. $1 \le n \le 10^{18}$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>化简式子得到 $a_i = i(i + 2)$.</p><p>观察样例, 猜测答案为 $n - 1$. 手玩几个数后发现当 $n = 4$ 或 $10$ 时答案为 $n + 1$.</p><p>考虑数对 $(p, p + 2)$ 且 $p, p + 2$ 都为质数, 那么当 $i$ 充分大时, 总有满足条件的数对使得这两个数互质.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL n;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        read(n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, n == <span class="number">4</span> || n == <span class="number">10</span> ? n + <span class="number">1</span> : n - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
          <category> 最大公约数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Celeste </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[APIO2009] 抢掠计划</title>
      <link href="/2021/02/18/APIO2009-%E6%8A%A2%E6%8E%A0%E8%AE%A1%E5%88%92/"/>
      <url>/2021/02/18/APIO2009-%E6%8A%A2%E6%8E%A0%E8%AE%A1%E5%88%92/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/10096" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 给出一个 $n$ 个点, $m$ 条边的图, 点有点权, 求一条从 $S$ 出发在一个特殊点结束的路径使得路径上点权和最大. $1 \le n, m \le 5 \times 10^5$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>对于一个强连通分量, 所有点都是可以互相到达的. </p><p>先用 Tarjan 求出强连通分量缩点, 然后在新图上 DP 或者跑最长路.</p><p>注意这道题如果对所有点 Tarjan 然后拓扑排序并不正确, $P$ 所在的 SCC 不一定入度为 $0$, 换句话说, 图中有些点是根本到达不了的. 而只对 $P$ 缩点是正确的. 跑最长路可以避免这个问题.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">&#125; e[<span class="number">500010</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">500010</span>];</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">500010</span>], dfn[<span class="number">500010</span>], low[<span class="number">500010</span>], scc[<span class="number">500010</span>], sta[<span class="number">500010</span>], s[<span class="number">500010</span>], f[<span class="number">500010</span>], deg[<span class="number">500010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, S, P, cnt, top, id, ans;</span><br><span class="line"><span class="keyword">bool</span> inq[<span class="number">500010</span>], bar[<span class="number">500010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">tarjan</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    low[x] = dfn[x] = ++cnt;</span><br><span class="line">    inq[x] = <span class="literal">true</span>;</span><br><span class="line">    sta[++top] = x;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!dfn[i]) &#123;</span><br><span class="line">            tarjan(i);</span><br><span class="line">            low[x] = <span class="built_in">std</span>::min(low[x], low[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (inq[i]) &#123;</span><br><span class="line">            low[x] = <span class="built_in">std</span>::min(low[x], dfn[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (dfn[x] == low[x]) &#123;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        ++id;</span><br><span class="line">        <span class="keyword">while</span> (sta[top] != x) &#123;</span><br><span class="line">            sum += a[sta[top]];</span><br><span class="line">            scc[sta[top]] = id;</span><br><span class="line">            inq[sta[top]] = <span class="literal">false</span>;</span><br><span class="line">            --top;</span><br><span class="line">        &#125;</span><br><span class="line">        sum += a[sta[top]];</span><br><span class="line">        scc[sta[top]] = id;</span><br><span class="line">        inq[sta[top]] = <span class="literal">false</span>;</span><br><span class="line">        --top;</span><br><span class="line">        s[id] = sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt;= m; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v);</span><br><span class="line">        e[i].u = u, e[i].v = v;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    read(S), read(P);</span><br><span class="line">    tarjan(S);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    g[i].clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> ((!scc[e[i].u]) || (!scc[e[i].v]))    <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> (scc[e[i].u] != scc[e[i].v]) &#123;</span><br><span class="line">            g[scc[e[i].u]].push_back(scc[e[i].v]);</span><br><span class="line">            ++deg[scc[e[i].v]];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, tmp; i &lt;= P; ++i) &#123;</span><br><span class="line">        read(tmp);</span><br><span class="line">        bar[scc[tmp]] = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    f[scc[S]] = s[scc[S]];</span><br><span class="line">    q.push(scc[S]);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> now = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now]) &#123;</span><br><span class="line">            f[i] = <span class="built_in">std</span>::max(f[i], f[now] + s[i]);</span><br><span class="line">            --deg[i];</span><br><span class="line">            <span class="keyword">if</span> (!deg[i])    q.push(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= id; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (bar[i]) &#123;</span><br><span class="line">            ans = <span class="built_in">std</span>::max(ans, f[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 强连通分量 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> APIO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P1516] 青蛙的约会</title>
      <link href="/2021/02/18/%E6%B4%9B%E8%B0%B7-P1516-%E9%9D%92%E8%9B%99%E7%9A%84%E7%BA%A6%E4%BC%9A/"/>
      <url>/2021/02/18/%E6%B4%9B%E8%B0%B7-P1516-%E9%9D%92%E8%9B%99%E7%9A%84%E7%BA%A6%E4%BC%9A/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1516" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 长度为 $L$ 的环上有两个点, 坐标为 $A: x, B: y$, 其中 $A$ 点每秒可以向正方向走 $m$ 单位长度, $B$ 点每秒可以向正方向走 $n$ 单位长度, 问经过几秒 $A$ 和 $B$ 会处于同一点. 无解输出 <code>Impossible</code>. $0 &lt; x, y, m, n \le 2 \times 10^9, 0 &lt; L \le 2.1 \times 10^9$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>相当于求方程 $x + tm \equiv y + tn \pmod L$ 的最小正整数解.</p><p>变形得到 $x + tm = kL + y + tn$.</p><p>即 $t(m - n) - kL = y - x$.</p><p>利用扩展欧几里得算法求解即可.</p><p>注意我们的算法求 gcd 时必须保证 $a, b$ 非负, 所以当 $m - n &lt; 0$ 时需要在等式两边同时乘 $-1$.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL xa, xb, m, n, L, ans, k;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">exGcd</span><span class="params">(LL a, LL b, LL &amp;x, LL &amp;y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    LL g = exGcd(b, a % b, y, x);</span><br><span class="line">    y -= a / b * x;</span><br><span class="line">    <span class="keyword">return</span> g;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(xa), read(xb), read(m), read(n), read(L);</span><br><span class="line">    LL a = m - n, b = xb - xa;</span><br><span class="line">    <span class="keyword">if</span> (a &lt; <span class="number">0</span>)    a = -a, b = -b;</span><br><span class="line">    LL g = exGcd(a, L, ans, k);</span><br><span class="line">    <span class="keyword">if</span> (b % g) &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"Impossible"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, (ans * (b / g) % (L / g) + (L / g)) % (L / g));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
          <category> 数论 </category>
          
          <category> 最大公约数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[IMO2012] Day 1 Problem 2</title>
      <link href="/2021/02/17/IMO2012-Day-1-Problem-2/"/>
      <url>/2021/02/17/IMO2012-Day-1-Problem-2/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>设整数 $n &gt; 3$, 正实数 $a_2, a_3, \cdots, a_n$ 满足 $a_2a_3\cdots a_n = 1.$ 证明: </p><p>$$<br>(1 + a_2)^2(1 + a_3)^3\cdots (1 + a_n)^n &gt; n^n<br>$$</p><a id="more"></a><h3 id="证明"><a href="#证明" class="headerlink" title="证明"></a>证明</h3><p>对于 $a_2$, 考虑均值不等式: $1 + a_2 \ge 2\sqrt{a_2}$.</p><p>则 $(1 + a_2)^2 \ge 4a_2$. </p><p>同理, 对于 $a_3$, 有 $1 + a_3 = \dfrac{1}{2} + \dfrac{1}{2} + a_3 \ge 3 \sqrt[3]{\dfrac{a_3}{4}}$. </p><p>则 $(1 + a_3)^3 \ge \dfrac{27a_3}{4}$.</p><p>不难发现 $\forall i, 1 + a_i = \dfrac{1}{i - 1} + \dfrac{1}{i - 1} + \cdots + \dfrac{1}{i - 1} + a_i \ge i \sqrt[i]{\dfrac{a_i}{(i - 1)^{i - 1}}}$.</p><p>即 $(1 + a_i)^i \ge i^i \cdot (\dfrac{1}{i - 1})^{i - 1} \cdot a_i$.</p><p>将上述式子相乘约分, 得到</p><p>$$<br>(1 + a_2)^2(1 + a_3)^3\cdots (1 + a_n)^n \ge n^na_2a_3\cdots a_n = n^n<br>$$</p><p>又由均值不等式取等条件, 仅当 $a_i = \dfrac{1}{i - 1}$ 时取到等号, 显然与 $a_2a_3\cdots a_n = 1$ 矛盾.</p><p>故 $(1 + a_2)^2(1 + a_3)^3\cdots (1 + a_n)^n &gt; n^n$.</p>]]></content>
      
      
      <categories>
          
          <category> MO </category>
          
          <category> 代数 </category>
          
          <category> 不等式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IMO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CSP2019] 加工零件</title>
      <link href="/2021/02/15/CSP2019-%E5%8A%A0%E5%B7%A5%E9%9B%B6%E4%BB%B6/"/>
      <url>/2021/02/15/CSP2019-%E5%8A%A0%E5%B7%A5%E9%9B%B6%E4%BB%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P5663" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 现有 $n$ 个工人生产零件. $n$ 个工人间有 $m$ 条双向传送带. 若 $x$ 号工人生产一个第 $L$ 阶段的零件, 则所有与 $x$ 直接相邻的工人需要生产一个 $L - 1$ 阶段的零件. $q$ 次询问第 $x$ 号工人生产一个第 $L$ 阶段的零件是否需要 $1$ 号工人提供一个第 $0$ 阶段的零件. $1 \le n, m, q \le 10^5, 1 \le L \le 10^9$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>当初只写了个暴力…现在终于有那么一丝的勇气把这场比赛的题目再看一遍…</p><p>也怪自己考试前那么迷之自信…就当是报应了…明明很多东西都是半懂不懂的状态…</p><p>不难发现题目问的就是从 $1$ 号点有没有一条到 $x$ 号的与 $L$ 同奇偶的长度的路径.</p><p>那问题就很简单了. 写个最短路, 每次分别用奇最短路和偶最短路进行松弛操作就行. </p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">100010</span>];</span><br><span class="line">LL dis1[<span class="number">100010</span>], dis2[<span class="number">100010</span>];</span><br><span class="line">LL n, m, Q, x, L;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m), read(Q);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt;= m; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v), g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    dis1[i] = dis2[i] = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">    dis2[<span class="number">1</span>] = <span class="number">0</span>;</span><br><span class="line">    q.push(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> now = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis1[i] &gt; dis2[now] + <span class="number">1</span>) &#123;</span><br><span class="line">                dis1[i] = dis2[now] + <span class="number">1</span>;</span><br><span class="line">                q.push(i);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (dis2[i] &gt; dis1[now] + <span class="number">1</span>) &#123;</span><br><span class="line">                dis2[i] = dis1[now] + <span class="number">1</span>;</span><br><span class="line">                q.push(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (Q--) &#123;</span><br><span class="line">        read(x), read(L);</span><br><span class="line">        <span class="keyword">if</span> (L % <span class="number">2</span>)    <span class="built_in">puts</span>(dis1[x] &lt;= L ? <span class="string">"Yes"</span> : <span class="string">"No"</span>);</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">puts</span>(dis2[x] &lt;= L ? <span class="string">"Yes"</span> : <span class="string">"No"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最短路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ACOI2020] 学园祭</title>
      <link href="/2021/02/11/ACOI2020-%E5%AD%A6%E5%9B%AD%E7%A5%AD/"/>
      <url>/2021/02/11/ACOI2020-%E5%AD%A6%E5%9B%AD%E7%A5%AD/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P6042" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 定义<br>$$<br>\Gamma(0) = 1, \Gamma(n) = n!, A^j_i = \dfrac{\Gamma(i)}{\Gamma(j)}<br>$$</p><p>求<br>$$<br>\sum \limits_{i = 1}^n \sum \limits_{j = 1}^i \sum \limits_{k = 1}^j \gcd(A^j_{i - j} \times \Gamma(j), A^k_{j - k} \times \Gamma(k))<br>$$</p><p>$t$ 组询问. $1 \le t, n \le 10^6$. 答案对 $10086001$ 取模. </p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先对这个奇怪式子进行化简. </p><p>$$<br>\begin{aligned}<br>    \gcd(A^j_{i - j} \times \Gamma(j), A^k_{j - k} \times \Gamma(k))<br>    &amp;= \gcd(\dfrac{(i - j)!}{j!} \times j!, \dfrac{(j - k)!}{k!} \times k!) \\<br>    &amp;= \gcd((i - j)!, (j - k)!) \\<br>    &amp;= \min \{i - j, j - k\}! \\<br>\end{aligned}<br>$$</p><p><del>然后我就不会做了.</del></p><p>面对这种答案只跟 $n$ 有关的式子不妨打表找规律.</p><p>前十项: $1, 4, 10, 20, 36, 60, 98, 156, 258, 428$.</p><p>尝试把这个数列放到 oeis 上搜, 结果并不能搜到.</p><p>考虑差分一下, 得到 $1, 3, 6, 10, 16, 24, 38, 58, 102, 170$.</p><p>再差分一下, 得到 $1, 2, 3, 4, 6, 8, 14, 20, 44, 68$.</p><p>再差分一下, 得到 $1, 1, 2, 2, 6, 6, 24, 24$.</p><p>然后我们就找到规律了: 每增加两项, 三阶差分会变为下一项的阶乘.</p><p>然后做三遍前缀和就行了.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">10086001</span>;</span><br><span class="line"><span class="keyword">const</span> LL maxn = <span class="number">1000000</span>;</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">1000010</span>], fac[<span class="number">1000010</span>];</span><br><span class="line">LL n;</span><br><span class="line"><span class="keyword">int</span> T;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(T);</span><br><span class="line">    fac[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)    fac[i] = ((fac[i - <span class="number">1</span>] % mod) * (i % mod)) % mod;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)    f[i] = fac[(i - <span class="number">1</span>) &gt;&gt; <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)    f[i] = ((f[i] % mod) + (f[i - <span class="number">1</span>] % mod)) % mod;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)    f[i] = ((f[i] % mod) + (f[i - <span class="number">1</span>] % mod)) % mod;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= maxn; ++i)    f[i] = ((f[i] % mod) + (f[i - <span class="number">1</span>] % mod)) % mod;</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        read(n);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, f[n]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p><del>我承认看了题解.</del></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ACOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[BJOI2018] 求和</title>
      <link href="/2021/02/11/BJOI2018-%E6%B1%82%E5%92%8C/"/>
      <url>/2021/02/11/BJOI2018-%E6%B1%82%E5%92%8C/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/2491" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 给出一个 $n$ 个点的有根树. 每次询问树上一条路径上所有节点深度的 $k$ 次方和. $1 \le n \le 3 \times 10^5, 1 \le k \le 50$. 结果对 $998244353$ 取模.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑树上差分. 由于 $k$ 的范围十分小, 在 dfs 预处理 LCA 的时候暴力求就行了. </p><p>此题根节点深度为 $0$, 坑. </p><p>注意在最后求距离时, 会涉及到取模后做减法, 需要处理一下. </p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">998244353</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">300010</span>];</span><br><span class="line">LL dis[<span class="number">300010</span>][<span class="number">60</span>];</span><br><span class="line"><span class="keyword">int</span> f[<span class="number">300010</span>][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> logn[<span class="number">300010</span>];</span><br><span class="line"><span class="keyword">int</span> n, q, u, v, k;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">qPow</span><span class="params">(LL x, LL p)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (p) &#123;</span><br><span class="line">        <span class="keyword">if</span> (p &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            s *= x;</span><br><span class="line">            s %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">        x *= x;</span><br><span class="line">        x %= mod;</span><br><span class="line">        p &gt;&gt;= <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    dis[x][<span class="number">0</span>] = dis[p][<span class="number">0</span>] + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">50</span>; ++i)    dis[x][i] = ((dis[p][i] % mod) + qPow(dis[x][<span class="number">0</span>], i)) % mod;</span><br><span class="line">    f[x][<span class="number">0</span>] = p;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= logn[dis[x][<span class="number">0</span>]]; ++i)    f[x][i] = f[f[x][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i != p) &#123;</span><br><span class="line">            dfs(i, x);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dis[a][<span class="number">0</span>] &lt; dis[b][<span class="number">0</span>])    <span class="built_in">std</span>::swap(a, b);</span><br><span class="line">    <span class="keyword">while</span> (dis[a][<span class="number">0</span>] &gt; dis[b][<span class="number">0</span>])    a = f[a][logn[dis[a][<span class="number">0</span>] - dis[b][<span class="number">0</span>]] - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (a == b)    <span class="keyword">return</span> a;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = logn[dis[a][<span class="number">0</span>]] - <span class="number">1</span>; k &gt;= <span class="number">0</span>; --k) &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[a][k] != f[b][k]) &#123;</span><br><span class="line">            a = f[a][k], b = f[b][k];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> f[a][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    dis[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    logn[i] = logn[i - <span class="number">1</span>] + (<span class="number">1</span> &lt;&lt; logn[i - <span class="number">1</span>] == i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v), g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);   </span><br><span class="line">    read(q);</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        read(u), read(v), read(k);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, (((dis[u][k] % mod) + (dis[v][k] % mod) - ((dis[lca(u, v)][k]) % mod) - (dis[f[lca(u, v)][<span class="number">0</span>]][k] % mod)) % mod + mod) % mod);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
          <category> LCA </category>
          
          <category> 树上差分 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> BJOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1455D] Sequence and Swaps</title>
      <link href="/2021/02/11/CF1455D-Sequence-and-Swaps/"/>
      <url>/2021/02/11/CF1455D-Sequence-and-Swaps/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/1455/D" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: $t$ 组数据. 每次给出序列 $\{a_n\}$ 和一个数 $x$. 每次操作可以将序列中的一个大于 $x$ 的数跟 $x$ 交换. 求最少经过几次操作使得序列升序. 无解输出 $-1$. $1 \le t, n \le 500, 0 \le x, a_i \le 500$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先判断一下需不需要操作. </p><p>不难发现有这样一个贪心策略: 若现在存在 $i &lt; j, a_i &gt; a_j$, 那么一定要交换 $a_i$ 和 $x$.</p><p>因此先找到序列中最后一个满足 $a_i &lt; a_{i - 1}$ 的位置, 从 $1$ 开始循环到 $i$, 每次若 $a_i &gt; x$ 就交换. 最后判断当前序列是否有序即可.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">510</span>];</span><br><span class="line"><span class="keyword">int</span> t, n, x, pos, ans;</span><br><span class="line"><span class="keyword">bool</span> flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">        pos = ans = <span class="number">0</span>;</span><br><span class="line">        read(n), read(x);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt; a[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                pos = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">"0"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= pos; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (x &lt; a[i]) &#123;</span><br><span class="line">                <span class="built_in">std</span>::swap(x, a[i]);</span><br><span class="line">                ++ans;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] &lt; a[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                flag = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, flag ? ans : <span class="number">-1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CSP2019] 次大值</title>
      <link href="/2021/02/11/CSP2019-%E6%AC%A1%E5%A4%A7%E5%80%BC/"/>
      <url>/2021/02/11/CSP2019-%E6%AC%A1%E5%A4%A7%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P5682" target="_blank" rel="noopener">题目链接</a></p><p>题目大意: 给出 $n$ 个正整数, 求两两取模后的次大值. $1 \le n \le 2 \times 10^5$.</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>若 $a &lt; b$, 显然有 $a \bmod b = a &gt; b \bmod a$.</p><p>自然先对序列排序后去重. 排序后最大值显然为 $a_{n - 1} \bmod a_n = a_{n - 1}$.</p><p>那么有一个可能的次大值就为 $a_{n - 2} \bmod a_{n} = a_{n - 2}$.</p><p>这样做并不完全对. 注意到 $\forall i \le n - 3, x \bmod a_i &lt; a_{n - 2}, a_i \bmod x &lt; a_{n - 2}$.</p><p>但对于 $a_{n - 1}$ 和 $a_n$, $a_n \bmod a_{n - 1}$ 有可能大于 $a_{n - 2}$.</p><p>因此最后的答案为 $\max \{a_{n - 2}, a_n \bmod a_{n - 1}\}$.</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL a[<span class="number">200010</span>];</span><br><span class="line">LL n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</span><br><span class="line">    n = <span class="built_in">std</span>::unique(a + <span class="number">1</span>, a + n + <span class="number">1</span>) - a - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (n &lt;= <span class="number">1</span>)    <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">    <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, <span class="built_in">std</span>::max(a[n - <span class="number">2</span>], a[n] % a[n - <span class="number">1</span>]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一些不等式的证明</title>
      <link href="/2021/01/29/%E4%B8%80%E4%BA%9B%E4%B8%8D%E7%AD%89%E5%BC%8F%E7%9A%84%E8%AF%81%E6%98%8E/"/>
      <url>/2021/01/29/%E4%B8%80%E4%BA%9B%E4%B8%8D%E7%AD%89%E5%BC%8F%E7%9A%84%E8%AF%81%E6%98%8E/</url>
      
        <content type="html"><![CDATA[<p>抄书。</p><a id="more"></a><h3 id="Jacobsthai-不等式"><a href="#Jacobsthai-不等式" class="headerlink" title="Jacobsthai 不等式"></a>Jacobsthai 不等式</h3><p>设 $x, y \in \mathbb{R}^+, n \in \mathbb{N}^*$, 则</p><p>$$<br>x^{n + 1} + ny^{n + 1} \ge (n + 1)y^nx<br>$$</p><p>当且仅当 $x = y$ 时取到等号.</p><h4 id="证明"><a href="#证明" class="headerlink" title="证明"></a>证明</h4><p>显然有<br>$$<br>(x - y)(x^k - y^k) \ge 0<br>$$</p><p>则<br>$$<br>\begin{aligned}<br>    x^{n + 1} + ny^{n + 1} - (n + 1)xy^n &amp; = x(x^n - y^n) - ny^n(x - y) \\<br>    &amp; = (x - y)[x(x^{n - 1} + x^{n - 2}y + \cdots + y^{n - 1}) - ny^n] \\<br>    &amp; = (x - y)[(x^n - y^n) + (x^{n - 1} - y^{n - 1})y + \cdots + (x - y)y^{n - 1}] \\<br>    &amp; \ge 0<br>\end{aligned}<br>$$</p><h3 id="Bernoulli-不等式"><a href="#Bernoulli-不等式" class="headerlink" title="Bernoulli 不等式"></a>Bernoulli 不等式</h3><p>设 $x &gt; 0, n \ge 1$, 则有 $x^n \ge 1 + n(x - 1)$.</p><h4 id="证明-1"><a href="#证明-1" class="headerlink" title="证明"></a>证明</h4><p>在 Jacobsthai 不等式中取 $y = 1$ 即可.</p><h3 id="Jensen-不等式"><a href="#Jensen-不等式" class="headerlink" title="Jensen 不等式"></a>Jensen 不等式</h3><p>若函数 $f(x) : (a, b) \to \mathbb{R}$ 满足</p><p>$$<br>f(\dfrac{x + y}{2}) \ge \dfrac{f(x) + f(y)}{2}, x, y \in (a, b)<br>$$</p><p>则有</p><p>$$<br>f(\dfrac{\sum x_i}{n}) \ge \dfrac{\sum f(x_i)}{n}, x_i \in (a, b)<br>$$</p><h4 id="证明-2"><a href="#证明-2" class="headerlink" title="证明"></a>证明</h4><p>当 $n = 1, 2$ 时显然成立.</p><p>设当 $n = k$ 时成立. 对于 $n = k + 1$, 有</p><p>$$<br>A_{k + 1} = \dfrac{a_1 + a_2 + \cdots + a_k}{2k} + \dfrac{a_{k + 1} + (k - 1)A_{k + 1}}{2k}<br>$$</p><p>设 $B = \dfrac{a_{k + 1} + (k - 1)A_{k + 1}}{k}$.</p><p>则有</p><p>$$<br>\begin{aligned}<br>    f(A_{k + 1}) &amp;= f(\dfrac{A_{k} + B}{2}) \\<br>    &amp;\ge \dfrac{1}{2} [f(A_k) + f(B)] \\<br>    &amp;\ge \dfrac{1}{2} [\dfrac{1}{k}(f(a_1) + f(a_2) + \cdots + f(a_{k})) + \dfrac{1}{k}(f(a_{k + 1}) + (k - 1)f(A_{k + 1}))]<br>\end{aligned}<br>$$</p><p>所以</p><p>$$<br>f(\dfrac{a_1 + a_2 + \cdots + a_{k + 1}}{k + 1}) \ge \dfrac{f(a_1) + f(a_2) + \cdots + f(a_{k + 1})}{k + 1}<br>$$</p><p>我们称满足此式的函数为凹函数，且若 $f$ 二阶可导, 当 $\dfrac{\mathrm{d}}{\mathrm{d}x^2} f^2(x) \le 0$ 时, $f$ 为凹函数.</p><p>从图像上直观理解一下, 类似 $f(x) = \log x$ 之类的函数即为凹函数.</p><p>实际上, 我们有加权的 Jensen 不等式:</p><p>$$<br>\sum (\dfrac{1}{p_i}f(x_i)) \le f(\sum \dfrac{x_i}{p_i})(\sum \dfrac{1}{p_i} = 1)<br>$$</p><h3 id="Young-不等式"><a href="#Young-不等式" class="headerlink" title="Young 不等式"></a>Young 不等式</h3><p>对于 $x, y &gt; 0$, 有</p><p>$$<br>x^{\frac{1}{p}}y^{\frac{1}{q}} \le \dfrac{1}{p}x + \dfrac{1}{q}y(\dfrac{1}{p} + \dfrac{1}{q} = 1)<br>$$</p><p>且仅当 $x = y$ 时取到等号.</p><h3 id="平均值不等式"><a href="#平均值不等式" class="headerlink" title="平均值不等式"></a>平均值不等式</h3><p>假设 $a_1, a_2, a_3, \cdots, a_n$ 为 $n$ 个非负实数, 它们的算术平均值记为 $A_n = \dfrac{\sum a_i}{n}$, 几何平均值记为 $G_n = \sqrt[n]{\prod a_i} = (\prod a_i) ^ {\frac{1}{n}}$.</p><p>则有 $A_n \ge G_n$, 当且仅当 $a_1 = a_2 = a_3 = \cdots = a_n$ 时取到等号.</p><h4 id="证法一"><a href="#证法一" class="headerlink" title="证法一"></a>证法一</h4><p>当 $n = 2$ 时显然成立.</p><p>假设对 $n = k$ 时命题成立, 即 $A_k \ge G_k$.</p><p>当 $n = k + 1$ 时, 显然在 $A_n$ 与 $G_n$ 中, $a_i$ 的顺序对结果无影响, 设 $a_1 = \min \{a_1, a_2, \cdots, a_{k + 1}\}, a_{k + 1} = \max \{a_1, a_2, \cdots, a_{k + 1} \}$, 则有 $a_1 \le A_{k + 1} \le a_{k + 1}$. </p><p>即<br>$$<br>A_{k + 1}(a_1 + a_{k + 1} - A_{k + 1}) - a_1a_{k + 1} = (a_1 - A_{k + 1})(A_{k + 1} - a_{k + 1}) \ge 0<br>$$</p><p>则有<br>$$<br>A_{k + 1}(a_1 + a_{k + 1} - A_{k + 1}) \ge a_1a_{k + 1}<br>$$</p><p>对于 $k$ 个正数，由归纳假设有 $A_n \ge G_n$.</p><p>也就是<br>$$<br>\dfrac{a_2 + a_3 + \cdots + a_k + (a_1 + a_{k + 1} - A_{k + 1})}{k} \ge \sqrt[k]{a_2a_3 \cdots a_k(a_1 + a_{k + 1} - A_{k + 1})}<br>$$</p><p>又<br>$$<br>\dfrac{a_2 + a_3 + \cdots + a_k + (a_1 + a_{k + 1} - A_{k + 1})}{k} = \dfrac{(k + 1)A_{k + 1} - A_{k + 1}}{k} = A_{k + 1}<br>$$</p><p>则<br>$$<br>A_{k + 1}^k \ge a_2 a_3 \cdots a_k(a_1 + a_{k + 1} - A_{k + 1})<br>$$</p><p>两边同乘 $A_{k + 1}$, 得<br>$$<br>A_{k + 1}^{k + 1} \ge a_2a_3 \cdots a_kA_{k + 1}(a_1 + a_{k + 1} - A_{k + 1})\ge a_2a_3\cdots a_k(a_1a_{k + 1}) = G_{k + 1}^{k + 1}<br>$$</p><p>则 $A_{k + 1} \ge G_{k + 1}$.</p>]]></content>
      
      
      <categories>
          
          <category> MO </category>
          
          <category> 代数 </category>
          
          <category> 不等式 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 不等式 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一道解方程</title>
      <link href="/2021/01/09/%E4%B8%80%E9%81%93%E8%A7%A3%E6%96%B9%E7%A8%8B/"/>
      <url>/2021/01/09/%E4%B8%80%E9%81%93%E8%A7%A3%E6%96%B9%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>解方程组 $\begin{cases}\sqrt{x(1 - y)} + \sqrt{y(1 - x)} = \dfrac{1}{2}\\\sqrt{xy} + \sqrt{(1 - x)(1 - y)} = \dfrac{\sqrt{3}}{2}\end{cases}$.</p><a id="more"></a><h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><h4 id="法一"><a href="#法一" class="headerlink" title="法一"></a>法一</h4><p>对上式分别平方, 得到 $\begin{cases}x(1 - y) + y(1 - x) + 2\sqrt{xy(1 - x)(1 - y)} = \dfrac{1}{4}\\xy + (1 - x)(1 - y) + 2\sqrt{xy(1 - x)(1 - y)} = \dfrac{3}{4}\end{cases}$.</p><p>化简后得到 $xy(1 - x)(1 - y) = 0$.</p><p>解得方程的解为 $\begin{cases}x = 0\\y = \dfrac{1}{4}\end{cases}$ 或 $\begin{cases}x = 1\\y = \dfrac{3}{4}\end{cases}$ 或 $\begin{cases}x = \dfrac{1}{4}\\y = 0\end{cases}$ 或 $\begin{cases}x = \dfrac{3}{4}\\y = 1\end{cases}$.</p><h4 id="法二"><a href="#法二" class="headerlink" title="法二"></a>法二</h4><p>由 $xy \ge 0$ 得 $x, y$ 同号. </p><p>若 $x, y &lt; 0$, 则 $x(1 - y) &lt; 0$.</p><p>所以 $x, y \ge 0$ 且 $x, y \le 1$.</p><p>设 $x = \sin ^ 2 \theta, \theta \in [0, \dfrac{\pi}{2}], y = \sin ^ 2 \varphi, \varphi \in [0, \dfrac{\pi}{2}]$.</p><p>原方程组化为 $\begin{cases}\sin \theta \cos \varphi + \sin \varphi \cos \theta = \dfrac{1}{2}\\\sin \theta \sin \varphi + \cos \theta \cos \varphi = \dfrac{\sqrt{3}}{2}\end{cases}$.</p><p>即 $\begin{cases}\sin(\theta + \varphi) = \dfrac{1}{2}\\\cos(\theta - \varphi) = \dfrac{\sqrt{3}}{2}\end{cases}$.</p><p>然后应该学过必修四就会了。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>感觉自己好久没有写这种东西了，所以水一篇（</p><p>不知不觉又一年过去了，去年这个时候说要进省队，结果没进，连一等都没拿上。</p><p>倒是 fgo 忙里偷闲地把 1.5 要打完了，音游打的也不算特别差。</p><p>文化课比初中那会排名高了许多，非常吓人。</p><p>感觉课内并没有什么思维上很难的东西（除了政治历史）。不过我现在有借口掩饰中考没考好了：初中没有认真学习。</p><p>前几天打了场 div 3，结果被自己的英语阅读水平坑了。</p><p>在现在的班里面成为了那种自己感觉很沉默的人，倒也不是什么坏事。</p><p>认识了年级里十分厉害的人，一番询问后发现他中考语文比我高了二三十分，tql。</p><p>现在随身带着小刀，大不了就是进去几年（危险发言）。</p><p>今年 XJ 也有省选了，好事情，政策上是 A + C，这样换算一下我的省选分数至少要比当前最后一名高 44 分，我感觉按照省选的难度来说是没辙了。</p><p>WC 因为傻逼原因没能去。</p><p>感觉新的一年里要努力呢 ^^ 。</p><p>话说现在又到了冬天了，放这首歌没问题吧？</p><p><meting-js    id="32303030"    server="netease"    type="song"><br></meting-js></p>]]></content>
      
      
      <categories>
          
          <category> MO </category>
          
          <category> 代数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 代数 </tag>
            
            <tag> 三角函数 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2011] 选择客栈</title>
      <link href="/2020/12/20/NOIp2011-%E9%80%89%E6%8B%A9%E5%AE%A2%E6%A0%88/"/>
      <url>/2020/12/20/NOIp2011-%E9%80%89%E6%8B%A9%E5%AE%A2%E6%A0%88/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/2597" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出长度为 $n$ 的序列 $\\{a_n\\}, \\{b_n\\}$，找出有多少对 $(i, j)$ 满足 $a_i = a_j, \exists k \in [i, j] \text{ st. } b_k \le p, i \ne j$。$1 \le n \le 2 \times 10^6, 1 \le p \le 100$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><h4 id="算法一"><a href="#算法一" class="headerlink" title="算法一"></a>算法一</h4><p>每次枚举 $i, j, k$ 并判断，时间复杂度 $O(n ^ 3)$。</p><h4 id="算法二"><a href="#算法二" class="headerlink" title="算法二"></a>算法二</h4><p>预处理 $f_i = f_{i - 1} + [b_i \le p]$，每次枚举 $(i, j)$ 并判断。</p><p>时间复杂度 $O(n ^ 2)$。</p><h4 id="算法三"><a href="#算法三" class="headerlink" title="算法三"></a>算法三</h4><p>考虑枚举 $j$，用类似 <code>vector</code> 的东西存下相同的 $a_i$ 的 $i$，二分找出最大的 $i$ 满足 $f_j - f_{i - 1} &gt; 0$。</p><p>时间复杂度 $O(n \log n)$。</p><h4 id="算法四"><a href="#算法四" class="headerlink" title="算法四"></a>算法四</h4><p>考虑枚举 $j$，维护 $cnt_i$ 表示 $i$ 之前有多少个 $k$ 满足 $a_i = a_k$，$lst_i$ 表示 $a_i$ 上次出现的位置，用 $pos$ 表示离 $j$ 最近的满足 $b_i \le p$ 的点，$s_i$ 表示 $a_i$ 当前的方案数。</p><p>每次遇到一个点时先判断是否满足 $b_i \le p$，然后判断当前的 $pos$ 是否大于等于 $lst_{a_{i}}$，然后更新答案。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL s[<span class="number">10010</span>], cnt[<span class="number">10010</span>], lst[<span class="number">10010</span>];</span><br><span class="line">LL ans;</span><br><span class="line"><span class="keyword">int</span> n, k, p, a, b, pos;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(k), read(p);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(a), read(b);</span><br><span class="line">        <span class="keyword">if</span> (b &lt;= p)    pos = i;</span><br><span class="line">        <span class="keyword">if</span> (pos &gt;= lst[a])    s[a] = cnt[a];</span><br><span class="line">        lst[a] = i;</span><br><span class="line">        ans += s[a];</span><br><span class="line">        ++cnt[a];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>以后就把 OI 当爱好了 ^^。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOI2011] 道路修建</title>
      <link href="/2020/12/09/NOI2011-%E9%81%93%E8%B7%AF%E4%BF%AE%E5%BB%BA/"/>
      <url>/2020/12/09/NOI2011-%E9%81%93%E8%B7%AF%E4%BF%AE%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/2445" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一棵 $n$ 个点的树，边有边权，求出 $\sum (w_{u, v} \times |siz_u - siz_v|)$。$1 \le n \le 10^6$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑一条边连接的两个点，设 $u$ 为父亲结点，$v$ 为子结点，这条边一端的结点数为 $siz_v$。</p><p>自然另一边的结点数就为 $n - siz_v$。</p><p>只需要一遍 dfs 就可以求出答案。</p><p>注意开 <code>long long</code>。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to;</span><br><span class="line">    LL dis;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Edge&gt; g[<span class="number">1000010</span>];</span><br><span class="line">LL siz[<span class="number">1000010</span>];</span><br><span class="line">LL ans;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">labs</span><span class="params">(LL a, LL b)</span> </span>&#123; <span class="keyword">return</span> a - b &gt; <span class="number">0</span> ? a - b : b - a; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    siz[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.to != p) &#123;</span><br><span class="line">            dfs(i.to, x);</span><br><span class="line">            siz[x] += siz[i.to];</span><br><span class="line">            ans += i.dis * <span class="built_in">labs</span>(siz[i.to], (n - siz[i.to]));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v, w; i &lt; n; ++i) &#123;</span><br><span class="line">        read(u), read(v), read(w);</span><br><span class="line">        g[u].push_back((Edge)&#123;v, w&#125;), g[v].push_back((Edge)&#123;u, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2018] 赛道修建</title>
      <link href="/2020/11/29/NOIp2018-%E8%B5%9B%E9%81%93%E4%BF%AE%E5%BB%BA/"/>
      <url>/2020/11/29/NOIp2018-%E8%B5%9B%E9%81%93%E4%BF%AE%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/2952" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一棵 $n$ 个点的树，要求在树上修建 $m$ 条道路。每条边最多被一条道路覆盖。最大化赛道中长度最小的赛道。$1 \le n \le 5 \times 10^4, 1 \le m \le n - 1$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>看到最大化最小值首先想到二分。</p><p>对于 $m = 1$ 的情况，只需要找到树的直径然后输出即可。</p><p>对于树是一条链的情况，二分道路长度判断即可。</p><p>对于菊花图，只需要在根结点遍历所有边，对边的长度排序后找出 $\max(w_1 + w_{n - 1}, w_2 + w_{n - 2}, \cdots)$ 即为答案。</p><p>然后就能拿到很可观的分数了。</p><p>其实菊花图的情况已经给了我们一些启示，对于每个结点向儿子的边里，一条道路最多覆盖其中的两条边。</p><p>考虑贪心。设当前结点为 $u$，儿子结点为 $v$，如果 $w_{u, v} \ge mid$，说明这条道路满足条件，直接加上即可。</p><p>如果 $w_{u, v} &lt; mid$，有可能这条边能和这个结点到儿子的另外一条边组成一条道路，所以先加到一个集合里。</p><p>在集合里对每条边贪心地找到最小的边使得 $w_1 + w_2 \ge mid$，然后把这条边加进答案里。这些很显然是最优的。</p><p>如果集合中没有这种边满足两条边的和大于 $mid$，这条边也有可能跟父节点向下的边组成道路满足条件，而且最大化这条边一定是最优的，所以用一个变量来存储这种边的最大值。</p><p>这个过程可以用 <code>multiset</code> 实现。</p><p>不知道为什么我不开 O2 会 T 一两个点，大概是菊花图的情况这种算法时间比较慢，当然我自带大常数不是一天两天了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to;</span><br><span class="line">    LL w;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">multiset</span>&lt;LL&gt; st[<span class="number">50010</span>];</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Edge&gt; g[<span class="number">50010</span>];</span><br><span class="line">LL n, m, l = <span class="number">1</span>, ans, sum, max, r;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> p, LL mid)</span> </span>&#123;</span><br><span class="line">    st[x].clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.to != p) &#123;</span><br><span class="line">            LL val = dfs(i.to, x, mid) + i.w;</span><br><span class="line">            <span class="keyword">if</span> (val &gt;= mid)    ++sum;</span><br><span class="line">            <span class="keyword">else</span>    st[x].insert(val);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    max = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!st[x].empty()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (st[x].size() == <span class="number">1</span>)    <span class="keyword">return</span> <span class="built_in">std</span>::max(max, *st[x].begin());</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">multiset</span>&lt;LL&gt;::iterator it = st[x].lower_bound(mid - *st[x].begin());</span><br><span class="line">        <span class="keyword">if</span> (it == st[x].begin() &amp;&amp; st[x].count(*it) == <span class="number">1</span>)    ++it;</span><br><span class="line">        <span class="keyword">if</span> (it == st[x].end()) &#123;</span><br><span class="line">            max = <span class="built_in">std</span>::max(max, *st[x].begin());</span><br><span class="line">            st[x].erase(st[x].find(*st[x].begin()));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            ++sum;</span><br><span class="line">            st[x].erase(st[x].find(*it));</span><br><span class="line">            st[x].erase(st[x].find(*st[x].begin()));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> max;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(LL mid)</span> </span>&#123;</span><br><span class="line">    sum = <span class="number">0</span>;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, mid);</span><br><span class="line">    <span class="keyword">return</span> sum &gt;= m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (LL i = <span class="number">1</span>, u, v, w; i &lt; n; ++i) &#123;</span><br><span class="line">        read(u), read(v), read(w);</span><br><span class="line">        r += w;</span><br><span class="line">        g[u].push_back((Edge)&#123;v, w&#125;), g[v].push_back((Edge)&#123;u, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        LL mid = (l + r) &gt;&gt; <span class="number">1L</span>L;</span><br><span class="line">        <span class="keyword">if</span> (check(mid)) &#123;</span><br><span class="line">            ans = mid, l = mid + <span class="number">1</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            r = mid - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P4943] 密室</title>
      <link href="/2020/11/29/%E6%B4%9B%E8%B0%B7-P4943-%E5%AF%86%E5%AE%A4/"/>
      <url>/2020/11/29/%E6%B4%9B%E8%B0%B7-P4943-%E5%AF%86%E5%AE%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P4943" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：罗恩和哈利去两个屋子。有些点只能哈利走。问两个目的地被到达的最短时间。$1 \le n \le 50000, 1 \le m \le 100000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>可能的方案只有两种：哈利和罗恩分别去两个屋子，哈利去两个屋子。</p><p>这里可以先求出从起点到各个点的最短路和从一个终点为起点到各个点的最短路，这样比较方便最后答案的更新。</p><p>如果是罗恩的话可以在 Dijkstra 的过程中加一个特判。</p><p>最后只需要比大小就行了。代码中 $dis_0$ 表示从起点开始哈利离其他点的距离，$dis_1$ 表示从起点开始罗恩离其他点的距离，$dis_2$ 表示从一个终点开始哈利离其他点的距离。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos;</span><br><span class="line">    LL dis;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &gt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to;</span><br><span class="line">    LL w;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Edge&gt; g[<span class="number">50010</span>];</span><br><span class="line">LL dis[<span class="number">3</span>][<span class="number">50010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k, t1, t2;</span><br><span class="line"><span class="keyword">bool</span> b[<span class="number">50010</span>], vis[<span class="number">50010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s, <span class="keyword">bool</span> flag, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)dis[x][i] = <span class="number">0x3f3f3f3f</span>, vis[i] = <span class="literal">false</span>;</span><br><span class="line">    dis[x][s] = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::priority_queue&lt;Node&gt; q;</span><br><span class="line">    q.push((Node)&#123;s, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        Node now = q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span> (vis[now.pos])<span class="keyword">continue</span>;</span><br><span class="line">        vis[now.pos] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now.pos]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (flag &amp;&amp; b[i.to])<span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">if</span> (dis[x][i.to] &gt; dis[x][now.pos] + i.w) &#123;</span><br><span class="line">                dis[x][i.to] = dis[x][now.pos] + i.w;</span><br><span class="line">                q.push((Node)&#123;i.to, dis[x][i.to]&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m), read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, tmp; i &lt;= k; ++i)read(tmp), b[tmp] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v, w; i &lt;= m; ++i) &#123;</span><br><span class="line">        read(u), read(v), read(w);</span><br><span class="line">        g[u].push_back((Edge)&#123;v, w&#125;), g[v].push_back((Edge)&#123;u, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    read(t1), read(t2);</span><br><span class="line">    dijkstra(<span class="number">1</span>, <span class="literal">false</span>, <span class="number">0</span>), dijkstra(<span class="number">1</span>, <span class="literal">true</span>, <span class="number">1</span>), dijkstra(t1, <span class="literal">false</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">if</span> (!k) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, <span class="built_in">std</span>::max(dis[<span class="number">0</span>][t1], dis[<span class="number">0</span>][t2]));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        LL min = <span class="built_in">std</span>::max(dis[<span class="number">0</span>][t1], dis[<span class="number">1</span>][t2]);</span><br><span class="line">        min = <span class="built_in">std</span>::min(min, <span class="built_in">std</span>::max(dis[<span class="number">0</span>][t2], dis[<span class="number">1</span>][t1]));</span><br><span class="line">        min = <span class="built_in">std</span>::min(min, dis[<span class="number">0</span>][t1] + dis[<span class="number">2</span>][t2]);</span><br><span class="line">        min = <span class="built_in">std</span>::min(min, dis[<span class="number">0</span>][t2] + dis[<span class="number">2</span>][t2]);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, min);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最短路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P1978] 集合</title>
      <link href="/2020/11/29/%E6%B4%9B%E8%B0%B7-P1978-%E9%9B%86%E5%90%88/"/>
      <url>/2020/11/29/%E6%B4%9B%E8%B0%B7-P1978-%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1978" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出有 $n$ 个元素的集合 $A$，要求选出一个集合 $S \subseteq A$ 且满足 $\forall x \in S, kx \notin S$。求出 $|S|$ 的最大值。$1 \le n, k \le 10^5, 1 \le a_i \le 2^{63} - 1$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>十分裸的一道题。不难发现题目中的约束关系实际上构成了一条链，且只能选中链上不相邻的两个点。</p><p>然后贪心就完了。</p><p>我怎么卡都会爆 <code>uLL</code>，无奈参考了下题解判爆上限的实现方法。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">map</span>&lt;uLL, <span class="keyword">bool</span>&gt; mp;</span><br><span class="line">uLL a[<span class="number">100010</span>];</span><br><span class="line">uLL n, k, ans, max;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(k);</span><br><span class="line">    max = <span class="number">9223372036854775807</span> / k;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)read(a[i]), mp[a[i]] = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">std</span>::<span class="built_in">map</span>&lt;uLL, <span class="keyword">bool</span>&gt;::iterator it = mp.begin(); it != mp.end(); ++it) &#123;</span><br><span class="line">        <span class="keyword">if</span> (it -&gt; second == <span class="literal">true</span>) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = <span class="number">0</span>, y = <span class="number">0</span>, j = <span class="number">1</span>;</span><br><span class="line">            uLL now = it -&gt; first;</span><br><span class="line">            <span class="keyword">while</span> (mp[now]) &#123;</span><br><span class="line">                <span class="keyword">if</span> (j % <span class="number">2</span>)++x;</span><br><span class="line">                <span class="keyword">else</span>++y;</span><br><span class="line">                ++j;</span><br><span class="line">                mp[now] = <span class="literal">false</span>;</span><br><span class="line">                <span class="keyword">if</span> (now &gt;= max)<span class="keyword">break</span>;</span><br><span class="line">                now *= k;</span><br><span class="line">            &#125;</span><br><span class="line">            ans += <span class="built_in">std</span>::max(x, y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%llu\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2011] 计算系数</title>
      <link href="/2020/11/29/NOIp2011-%E8%AE%A1%E7%AE%97%E7%B3%BB%E6%95%B0/"/>
      <url>/2020/11/29/NOIp2011-%E8%AE%A1%E7%AE%97%E7%B3%BB%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/2599" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给定多项式 $(by + ax) ^ k$，求出展开后 $x^n \times y^m$ 项的系数。$0 \le k \le 1000, 0 \le n, m \le k, n + m = k, 0 \le a, b \le 10^6$。答案为 $10007$ 取模。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>先考虑 $a = b = 1$ 的情况，直接用二项式定理即可。</p><p>由于 $k$ 的范围十分小，可以递推求组合数。</p><p>如果 $a, b$ 不为 $1$，将 $by, ax$ 分别看作一个整体，不难看出系数为 $\displaystyle \binom{k}{n} a^n b^m$，再套个快速幂板子就行了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">10007</span>;</span><br><span class="line"></span><br><span class="line">LL c[<span class="number">1010</span>][<span class="number">1010</span>];</span><br><span class="line">LL k, n, m, a, b;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">qPow</span><span class="params">(LL x, LL y)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">while</span> (y) &#123;</span><br><span class="line">        <span class="keyword">if</span> (y &amp; <span class="number">1L</span>L) &#123;</span><br><span class="line">            s *= x;</span><br><span class="line">            s %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">        y &gt;&gt;= <span class="number">1L</span>L;</span><br><span class="line">        x *= x;</span><br><span class="line">        x %= mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(a), read(b), read(k), read(n), read(m);</span><br><span class="line">    c[<span class="number">0</span>][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        c[i][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= i; ++j) &#123;</span><br><span class="line">            c[i][j] = c[i - <span class="number">1</span>][j - <span class="number">1</span>] + c[i - <span class="number">1</span>][j];</span><br><span class="line">            c[i][j] %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ((((c[k][n] % mod) * (qPow(a, n) % mod)) % mod) * (qPow(b, m) % mod)) % mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
          <category> 组合数学 </category>
          
          <category> 排列组合 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2014] 联合权值</title>
      <link href="/2020/11/24/NOIp2014-%E8%81%94%E5%90%88%E6%9D%83%E5%80%BC/"/>
      <url>/2020/11/24/NOIp2014-%E8%81%94%E5%90%88%E6%9D%83%E5%80%BC/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/p/2499" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一棵 $n$ 个点的树，若树上两点 $u, v$ 满足距离为 $2$，则产生 $w_u \times w_v$ 的联合权值。求出树上最大的联合权值和所有联合权值的和。权值之和对 $10007$ 取余。$1 \le n \le 200000, 0 &lt; w_i \le 10000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>（以前的暴力分好多啊）</p><p>考虑枚举离这两个点距离为 $1$ 的中间点，则只需要对每个点找出边连的点进行更新就行了。</p><p>最大值是很好求的，现在要求以这个点为中间点的所有权值之和。</p><p>不难发现 $(\sum w_i)^2 - \sum w_i^2$ 就是我们要求的答案。</p><p>注意这道题只对和取模，最大值是不取模的。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">10007</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">200010</span>];</span><br><span class="line">LL w[<span class="number">200010</span>];</span><br><span class="line">LL ans, max;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v), g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)read(w[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        LL mx1 = <span class="number">0</span>, mx2 = <span class="number">0</span>, s = <span class="number">0</span>, sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> j : g[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (w[j] &gt; mx1)mx2 = mx1, mx1 = w[j];</span><br><span class="line">            <span class="keyword">else</span><span class="keyword">if</span> (w[j] &gt; mx2)mx2 = w[j];</span><br><span class="line">        &#125;</span><br><span class="line">        max = <span class="built_in">std</span>::max(max, mx1 * mx2);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> j : g[i]) &#123;</span><br><span class="line">            s += w[j];</span><br><span class="line">            s %= mod;</span><br><span class="line">            sum += (w[j] % mod) * (w[j] % mod);</span><br><span class="line">            sum %= mod;</span><br><span class="line">        &#125;</span><br><span class="line">        ans += (s % mod) * (s % mod) - sum % mod;</span><br><span class="line">        ans %= mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld %lld\n"</span>, max, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ZJOI2006] 三色二叉树</title>
      <link href="/2020/11/19/ZJOI2006-%E4%B8%89%E8%89%B2%E4%BA%8C%E5%8F%89%E6%A0%91/"/>
      <url>/2020/11/19/ZJOI2006-%E4%B8%89%E8%89%B2%E4%BA%8C%E5%8F%89%E6%A0%91/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2585" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一颗 $n$ 个结点的二叉树，每个结点可以染成红色，绿色或蓝色，每个结点和相邻的结点颜色必须不同，同一个结点的子结点颜色也必须不同，问最多和最少有多少个点能被染成绿色。$1 \le n \le 5 \times 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先这个树的输入十分不一样，用了个序列来表示。</p><p>设 $f(i, 0/1/2)$ 表示第 $i$ 个点染成绿色，红色或蓝色时最大方案数，那么有 $f(i, 0) = \max(f(l, 1) + f(r, 2), f(l, 2) + f(r, 1)) + 1$，其中 $l, r$ 是 $i$ 的左右结点。</p><p>同理，有 </p><p>$$<br>f(i, 1) = \max(f(l, 0) + f(r, 2) + f(l, 2) + f(r, 0))<br>$$<br>$$<br>f(i, 2) = \max(f(l, 0) + f(r, 1) + f(l, 1) + f(r, 0))<br>$$</p><p>最小值同理。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">500010</span>][<span class="number">4</span>], g[<span class="number">500010</span>][<span class="number">4</span>];</span><br><span class="line"><span class="keyword">int</span> cnt = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">500010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (s[x] == <span class="string">'0'</span>) &#123;</span><br><span class="line">        f[x][<span class="number">0</span>] = g[x][<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(++cnt);</span><br><span class="line">    <span class="keyword">if</span> (s[x] == <span class="string">'1'</span>) &#123;</span><br><span class="line">        f[x][<span class="number">0</span>] = <span class="built_in">std</span>::max(f[x + <span class="number">1</span>][<span class="number">1</span>], f[x + <span class="number">1</span>][<span class="number">2</span>]) + <span class="number">1</span>;</span><br><span class="line">        f[x][<span class="number">1</span>] = <span class="built_in">std</span>::max(f[x + <span class="number">1</span>][<span class="number">0</span>], f[x + <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">        f[x][<span class="number">2</span>] = <span class="built_in">std</span>::max(f[x + <span class="number">1</span>][<span class="number">0</span>], f[x + <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">        g[x][<span class="number">0</span>] = <span class="built_in">std</span>::min(g[x + <span class="number">1</span>][<span class="number">1</span>], g[x + <span class="number">1</span>][<span class="number">2</span>]) + <span class="number">1</span>;</span><br><span class="line">        g[x][<span class="number">1</span>] = <span class="built_in">std</span>::min(g[x + <span class="number">1</span>][<span class="number">0</span>], g[x + <span class="number">1</span>][<span class="number">2</span>]);</span><br><span class="line">        g[x][<span class="number">2</span>] = <span class="built_in">std</span>::min(g[x + <span class="number">1</span>][<span class="number">0</span>], g[x + <span class="number">1</span>][<span class="number">1</span>]);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">int</span> k = ++cnt;</span><br><span class="line">        dfs(cnt);</span><br><span class="line">        f[x][<span class="number">0</span>] = <span class="built_in">std</span>::max(f[x + <span class="number">1</span>][<span class="number">1</span>] + f[k][<span class="number">2</span>], f[x + <span class="number">1</span>][<span class="number">2</span>] + f[k][<span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">        f[x][<span class="number">1</span>] = <span class="built_in">std</span>::max(f[x + <span class="number">1</span>][<span class="number">0</span>] + f[k][<span class="number">2</span>], f[x + <span class="number">1</span>][<span class="number">2</span>] + f[k][<span class="number">0</span>]);</span><br><span class="line">        f[x][<span class="number">2</span>] = <span class="built_in">std</span>::max(f[x + <span class="number">1</span>][<span class="number">0</span>] + f[k][<span class="number">1</span>], f[x + <span class="number">1</span>][<span class="number">1</span>] + f[k][<span class="number">0</span>]);</span><br><span class="line">        g[x][<span class="number">0</span>] = <span class="built_in">std</span>::min(g[x + <span class="number">1</span>][<span class="number">1</span>] + g[k][<span class="number">2</span>], g[x + <span class="number">1</span>][<span class="number">2</span>] + g[k][<span class="number">1</span>]) + <span class="number">1</span>;</span><br><span class="line">        g[x][<span class="number">1</span>] = <span class="built_in">std</span>::min(g[x + <span class="number">1</span>][<span class="number">0</span>] + g[k][<span class="number">2</span>], g[x + <span class="number">1</span>][<span class="number">2</span>] + g[k][<span class="number">0</span>]);</span><br><span class="line">        g[x][<span class="number">2</span>] = <span class="built_in">std</span>::min(g[x + <span class="number">1</span>][<span class="number">0</span>] + g[k][<span class="number">1</span>], g[x + <span class="number">1</span>][<span class="number">1</span>] + g[k][<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s + <span class="number">1</span>);</span><br><span class="line">    dfs(<span class="number">1</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, f[<span class="number">1</span>][<span class="number">0</span>], <span class="built_in">std</span>::min(g[<span class="number">1</span>][<span class="number">0</span>], <span class="built_in">std</span>::min(g[<span class="number">1</span>][<span class="number">1</span>], g[<span class="number">1</span>][<span class="number">2</span>])));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 树形 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ZJOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ABC165F] LIS on Tree</title>
      <link href="/2020/11/17/ABC165F-LIS-on-Tree/"/>
      <url>/2020/11/17/ABC165F-LIS-on-Tree/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://atcoder.jp/contests/abc165/tasks/abc165_f" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一棵 $n$ 个点的树，每个点有点权。对每个点求出从 $1$ 号点到第 $i$ 号点路径上最长的 LIS 长度。$1 \le n \le 2 \cdot 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>先考虑序列上的做法，只需要 $O(n \log n)$ 求 LIS 就行了。</p><p>树上求 LIS 的方法也类似，对于每个点二分该元素在 LIS 里的位置更新答案，就是要加一个回溯的过程。</p><p>注意求的并不是第 $i$ 个点的 LIS 而是这条路径上最大的 LIS，所以要对父亲求最大值。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">200010</span>], f[<span class="number">200010</span>], b[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">int</span> n, l;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> pa)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> p, r;</span><br><span class="line">    <span class="keyword">bool</span> flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (a[now] &gt; b[l]) &#123;</span><br><span class="line">        b[++l] = a[now];</span><br><span class="line">        f[now] = l;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">        p = <span class="built_in">std</span>::lower_bound(b + <span class="number">1</span>, b + l + <span class="number">1</span>, a[now]) - b;</span><br><span class="line">        r = b[p];</span><br><span class="line">        b[p] = a[now];</span><br><span class="line">        f[now] = <span class="built_in">std</span>::max(f[pa], p);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i != pa) &#123;</span><br><span class="line">            dfs(i, now);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (flag)b[p] = r;</span><br><span class="line">    <span class="keyword">else</span>b[l--] = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)read(a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v), g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)<span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[i]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 序列 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AtCoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P1638] 逛画展</title>
      <link href="/2020/11/13/%E6%B4%9B%E8%B0%B7-P1638-%E9%80%9B%E7%94%BB%E5%B1%95/"/>
      <url>/2020/11/13/%E6%B4%9B%E8%B0%B7-P1638-%E9%80%9B%E7%94%BB%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1638" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个长度为 $n$ 的序列，要求找到一段连续的子序列，满足子序列里出现所有 $1$ 到 $m$ 中的数。$1 \le n \le 10^6, 1 \le m \le 2000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>想了下 Two Pointers 应该算某种意义上的队列？</p><p>考虑用两个指针 $l, r$ 分别指向当前区间的左端点和右端点，维护一个 $s$ 表示当前区间内有多少不同的数，$v_i$ 表示当前区间里数 $i$ 的个数。</p><p>如果当前区间里的数不够就把 $r$ 往右移，够了的话就更新答案，然后把 $l$ 往右移。</p><p>然后就做完了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">unsigned</span> <span class="keyword">long</span> <span class="keyword">long</span> uLL;</span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">1000010</span>], vis[<span class="number">2010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, l = <span class="number">1</span>, r, ansl = <span class="number">1</span>, ansr, s, min = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    ansl = <span class="number">1</span>, ansr = n;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)read(a[i]);</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= n) &#123;</span><br><span class="line">        <span class="keyword">while</span> (s &lt; m &amp;&amp; r &lt; n) &#123;</span><br><span class="line">            ++r;</span><br><span class="line">            <span class="keyword">if</span> (!vis[a[r]])++s;</span><br><span class="line">            ++vis[a[r]];</span><br><span class="line">        &#125;</span><br><span class="line">        --vis[a[l]];</span><br><span class="line">        <span class="keyword">if</span> (!vis[a[l]])--s;</span><br><span class="line">        ++l;</span><br><span class="line">        <span class="keyword">if</span> (r - l &lt; min &amp;&amp; s == m)ansl = l, ansr = r, min = r - l;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, ansl, ansr);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 队列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1213G] Path Queries</title>
      <link href="/2020/11/05/CF1213G-Path-Queries/"/>
      <url>/2020/11/05/CF1213G-Path-Queries/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/1213/G" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个 $n$ 个点的树，边有边权。有 $m$ 组询问，每次询问树上所有路径中权值最大的边的权值不超过 $q$ 的路径数量。$1 \le n, m, w, q \le 200000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑到如果有一条边的权值 $w$ 不大于 $q$，那对于任意的 $q’ &gt; q$，这条边都满足条件。</p><p>也就是如果把所有询问按 $q$ 升序排序后，答案也是升序排列。</p><p>所以我们可以先把所有询问按 $q$ 升序排序。</p><p>对于每组询问，相当于找到有多少点满足这两个点之间的最大边权不超过 $q$。</p><p>如果这两个点满足条件，那么这两个点之间的任意点对也满足条件，这样就可以更新答案了。</p><p>然后就是怎么维护了。先把所有边按边权从小到大排序，然后如果当前的边的边权满足条件，就把这条边的两个端点合并，同时更新联通块大小和答案。</p><p>最后按照询问的顺序输出就行了。</p><p>注意开 <code>long long</code>。</p><p>类似题目：<a href="https://www.luogu.com.cn/problem/P6111" target="_blank" rel="noopener">[USACO18JAN] MooTube S</a></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; <span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))&#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch)) &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    LL u, v, w;</span><br><span class="line">&#125; g[<span class="number">200010</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Query</span> &#123;</span></span><br><span class="line">    LL k, id;</span><br><span class="line">&#125; b[<span class="number">200010</span>];</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">200010</span>], cnt[<span class="number">200010</span>], ans[<span class="number">200010</span>];</span><br><span class="line">LL n, q, j = <span class="number">1</span>, s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> f[x] == x ? x : f[x] = unionFind(f[x]); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">link</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> fx = unionFind(x), fy = unionFind(y);</span><br><span class="line">    <span class="keyword">if</span> (fx != fy) &#123;</span><br><span class="line">        s -= (((cnt[fx] * (cnt[fx] - <span class="number">1</span>)) / <span class="number">2</span>) + ((cnt[fy] * (cnt[fy] - <span class="number">1</span>)) / <span class="number">2</span>));</span><br><span class="line">        cnt[fy] += cnt[fx];</span><br><span class="line">        s += (cnt[fy] * (cnt[fy] - <span class="number">1</span>)) / <span class="number">2</span>;</span><br><span class="line">        f[fx] = fy;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(q);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)f[i] = i, cnt[i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; ++i)        read(g[i].u), read(g[i].v), read(g[i].w);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i)read(b[i].k), b[i].id = i;</span><br><span class="line">    <span class="built_in">std</span>::sort(g + <span class="number">1</span>, g + n, [](<span class="keyword">const</span> Edge &amp;a, <span class="keyword">const</span> Edge &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.w &lt; b.w;</span><br><span class="line">    &#125; );</span><br><span class="line">    <span class="built_in">std</span>::sort(b + <span class="number">1</span>, b + q + <span class="number">1</span>, [](<span class="keyword">const</span> Query &amp;a, <span class="keyword">const</span> Query &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.k &lt; b.k;</span><br><span class="line">    &#125; );</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        <span class="keyword">while</span> (j &lt; n &amp;&amp; g[j].w &lt;= b[i].k) &#123;</span><br><span class="line">            link(g[j].u, g[j].v);</span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        ans[b[i].id] = s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i)<span class="built_in">printf</span>(<span class="string">"%lld "</span>, ans[i]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 并查集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2010] 关押罪犯</title>
      <link href="/2020/11/04/NOIp2010-%E5%85%B3%E6%8A%BC%E7%BD%AA%E7%8A%AF/"/>
      <url>/2020/11/04/NOIp2010-%E5%85%B3%E6%8A%BC%E7%BD%AA%E7%8A%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2594" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出无向图 $G = (V, E)$，要求将该图删去一些边使得原图被分成两个没有交集的部分，使留下的边的最大值最小。$1 \le |V| \le 20000, 1 \le |E| \le 100000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑贪心，每次都删去当前能删的边权最大的边。</p><p>先把所有边按边权排序。</p><p>现在相当于维护两个点的集合，如果当前要删的边的两个端点已经在同一集合里，也就是说这条边不能删掉，答案就是这条边的边权。</p><p>维护两个集合的操作可以用并查集完成。</p><p>最后别忘了答案有可能为 $0$。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v, w;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;a, <span class="keyword">const</span> Edge &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.w &gt; b.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; g[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> b[<span class="number">20010</span>], f[<span class="number">20010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> f[x] == x ? x : f[x] = unionFind(f[x]); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)f[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)read(g[i].u), read(g[i].v), read(g[i].w);</span><br><span class="line">    <span class="built_in">std</span>::sort(g + <span class="number">1</span>, g + m + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (unionFind(g[i].u) == unionFind(g[i].v)) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, g[i].w);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!b[g[i].u])b[g[i].u] = g[i].v;</span><br><span class="line">        <span class="keyword">else</span>f[unionFind(b[g[i].u])] = unionFind(g[i].v);</span><br><span class="line">        <span class="keyword">if</span> (!b[g[i].v])b[g[i].v] = g[i].u;</span><br><span class="line">        <span class="keyword">else</span>f[unionFind(b[g[i].v])] = unionFind(g[i].u);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"0"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 并查集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp1996] 挖地雷</title>
      <link href="/2020/11/04/NOIp1996-%E6%8C%96%E5%9C%B0%E9%9B%B7/"/>
      <url>/2020/11/04/NOIp1996-%E6%8C%96%E5%9C%B0%E9%9B%B7/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2196" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出有向图 $G = (V, E)$，点有点权，求出点权之和最大的一条路。$1 \le |V| \le 20$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>（由于数据范围很小，暴力搜索应该是能过的）</p><p>设 $f(i)$ 表示以第 $i$ 个点结尾的最大值，则 $f(i) = \max(f(j)) + a_i$，其中 $j$ 有连向 $i$ 的边。</p><p>现在考虑怎么输出方案，对于每个 $f(i)$，记录下能使 $f(i)$ 取最大值的 $j$，然后递归输出即可。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> g[<span class="number">30</span>][<span class="number">30</span>];</span><br><span class="line"><span class="keyword">int</span> f[<span class="number">30</span>], v[<span class="number">30</span>], pre[<span class="number">30</span>];</span><br><span class="line"><span class="keyword">int</span> n, ans, lst, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!pre[now]) &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d "</span>, now);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(pre[now]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d "</span>, now);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)read(v[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            read(g[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (g[j][i]) &#123;</span><br><span class="line">                f[i] = <span class="built_in">std</span>::max(f[i], f[j]);</span><br><span class="line">                <span class="keyword">if</span> (f[i] == f[j])pre[i] = j;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        f[i] += v[i];</span><br><span class="line">        ans = <span class="built_in">std</span>::max(ans, f[i]);</span><br><span class="line">        <span class="keyword">if</span> (ans == f[i])lst = i;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(lst);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"\n%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> DAG 上的 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CQOI2007] 涂色</title>
      <link href="/2020/10/30/CQOI2007-%E6%B6%82%E8%89%B2/"/>
      <url>/2020/10/30/CQOI2007-%E6%B6%82%E8%89%B2/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P4170" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出长度为 $n$ 的目标字符串，问最少几次能将空字符串涂成目标字符串，每次可以修改连续的一段。$1 \le n \le 50$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>很明显是区间 DP。</p><p>设 $f(i, j)$ 表示将 $i$ 到 $j$ 涂成目标的最少花费，显然 $f(i, i) = 1$，最终答案为 $f(1, n)$。</p><p>考虑转移，如果 $a_i = a_j$，那么只需要第一次涂的时候顺便涂一下就行，有 $f(i, j) = \min(f(i + 1, j), f(i, j - 1))$。</p><p>如果 $a_i \neq a_j$，就需要设置断点 $k$，显然 $f(i, j) = \min(f(i, k) + f(k + 1, j))$。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">60</span>][<span class="number">60</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">60</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, a + <span class="number">1</span>);</span><br><span class="line">    n = <span class="built_in">strlen</span>(a + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    f[i][i] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">2</span>; l &lt;= n; ++l) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i + l - <span class="number">1</span> &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = i + l - <span class="number">1</span>;</span><br><span class="line">            f[i][j] = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">            <span class="keyword">if</span> (a[i] == a[j]) &#123;</span><br><span class="line">                f[i][j] = <span class="built_in">std</span>::min(f[i + <span class="number">1</span>][j], f[i][j - <span class="number">1</span>]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = i; k &lt; j; ++k) &#123;</span><br><span class="line">                    f[i][j] = <span class="built_in">std</span>::min(f[i][j], f[i][k] + f[k + <span class="number">1</span>][j]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[<span class="number">1</span>][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 区间 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CQOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1437E] Make It Increasing</title>
      <link href="/2020/10/30/CF1437E-Make-It-Increasing/"/>
      <url>/2020/10/30/CF1437E-Make-It-Increasing/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/1437/E" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出长度为 $n$ 的序列，每次可以修改任意一个下标不在 $b$ 中的元素，问最少的操作次数使得原序列单调递增，无解输出 $-1$。$1 \le n \le 5 \cdot 10^5, 1 \le a_i \le 10^9$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>难得有一次 cf 除了 div 3 能打到 E…</p><p>先考虑没有限制的情况，这是一个很经典的 DP 问题，设 $c_i = a_i - i$ 之后求 $c$ 的最长不下降子序列即可。</p><p>现在有对位置的限制，首先考虑无解的情况，这个很显然，没什么可说的。</p><p>如果第 $i$ 个元素不能修改，意味着第 $i$ 个元素必须在我们的最长不下降子序列中，不然就不可能符合单调递增的条件。</p><p>然后只需要对 $O(n \log n)$ 求最长不下降子序列的算法进行一些改变即可。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">500010</span>], b[<span class="number">500010</span>], f[<span class="number">500010</span>];</span><br><span class="line"><span class="keyword">int</span> n, k, len, lst;</span><br><span class="line"><span class="keyword">bool</span> can[<span class="number">500010</span>];</span><br><span class="line"><span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i)    read(b[i]), can[b[i]] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[b[i]] &lt; a[b[i - <span class="number">1</span>]] || a[b[i]] - a[b[i - <span class="number">1</span>]] &lt; b[i] - b[i - <span class="number">1</span>]) &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    a[i] -= i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[i] &gt;= f[len]) &#123;</span><br><span class="line">            f[++len] = a[i];</span><br><span class="line">            <span class="keyword">if</span> (can[i])  lst = len;  </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">int</span> p = <span class="built_in">std</span>::upper_bound(f + <span class="number">1</span>, f + len + <span class="number">1</span>, a[i]) - f;</span><br><span class="line">            <span class="keyword">if</span> (p &lt;= lst)   <span class="keyword">continue</span>;</span><br><span class="line">            f[p] = a[i];</span><br><span class="line">            <span class="keyword">if</span> (can[i]) lst = p, len = p;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, n - len);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 序列 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1436C] Binary Search</title>
      <link href="/2020/10/25/CF1436C-Binary-Search/"/>
      <url>/2020/10/25/CF1436C-Binary-Search/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/problemset/problem/1436/C" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出 $x, n, p$，求有多少种长度为 $n$ 的排列满足第 $p$ 个数为 $x$ 且能让二分查找正确运行，结果对 $10^9 + 7$ 取模。下标从 $0$ 开始。$1 \le x \le n \le 1000, 0 \le p \le n - 1$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>由于二分每次会按照当前中间值与要寻找的数的大小关系来进行下一步的查找，所以我们只需要考虑每次中间值的取值就行了。</p><p>如果 $p$ 在二分中点的右边，就说明这个中点的值能取任何小于 $x$ 的值，反之亦然。</p><p>注意到上述过程每操作一次就会消耗一个可能用的数的值，要处理一下。</p><p>还需要特判一下中点正好为 $p$ 的情况，这时候中点只能取 $x$。</p><p>用简单的排列组合就能求出答案。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">1e9</span> + <span class="number">7</span>;</span><br><span class="line"></span><br><span class="line">LL x, n, pos, ans = <span class="number">1</span>, a = <span class="number">1</span>, b;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(x), read(pos);</span><br><span class="line">    LL l = <span class="number">0</span>, r = n;</span><br><span class="line">    <span class="keyword">while</span> (l &lt; r) &#123;</span><br><span class="line">        LL mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">if</span> (pos &gt;= mid) &#123;</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (mid != pos) &#123;</span><br><span class="line">                ans = ((ans % mod) * ((x - a) % mod)) % mod;</span><br><span class="line">                ++a;</span><br><span class="line">            &#125; </span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            r = mid;</span><br><span class="line">            ans = ((ans % mod) * ((n - x - b) % mod)) % mod;</span><br><span class="line">            ++b;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (LL i = <span class="number">1</span>; i &lt;= n - a - b; ++i) ans = ((ans % mod) * (i % mod)) % mod;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1433G] Reducing Delivery Cost</title>
      <link href="/2020/10/24/CF1433G-Reducing-Delivery-Cost/"/>
      <url>/2020/10/24/CF1433G-Reducing-Delivery-Cost/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/1433/G" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出无向图 $G = (V, E)$ 和 $k$ 组 $a_i, b_i$，每次可以选取图中的任意一条边将边权变为 $0$，最小化 $\sum \operatorname{dis}(a_i, b_i)$。$2 \le |V| \le 1000, |V| - 1 \le |E| \le \min(1000, \dfrac{|V|(|V| - 1)}{2}), 1 \le k, w_i \le 1000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>先用 Djikstra 求出每个点的单源最短路，由于这个题边数并不大，$O(nm \log m)$ 的复杂度还是可以接受的。</p><p>现在假设要从 $u$ 走到 $v$，在改了一条边的边权为 $0$ 之后，不难发现最短路要么经过这条边，要么不经过。</p><p>不经过的情况已经讨论过了，接下来处理经过这条边的情况。设这条边的端点为 $u’, v’$，很显然距离为 $\operatorname{dis}(u, u’) + \operatorname{dis}(v’, v)$。</p><p>然后做法就很显然了，枚举每条边将边权变为 $0$，然后对每对端点更新一次答案，最后取最小值就行了。</p><p>注意这道题是无向边，需要特别处理一下。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, v;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, dis;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &gt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Edge&gt; g[<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">int</span> dis[<span class="number">1010</span>][<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">1010</span>], b[<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k, ans = inf;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">1010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">    <span class="built_in">std</span>::priority_queue&lt;Node&gt; q;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    dis[s][i] = inf;</span><br><span class="line">    dis[s][s] = <span class="number">0</span>;</span><br><span class="line">    q.push((Node)&#123;s, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        Node top = q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span> (vis[top.pos])   <span class="keyword">continue</span>;</span><br><span class="line">        vis[top.pos] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[top.pos]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis[s][i.to] &gt; dis[s][top.pos] + i.v) &#123;</span><br><span class="line">                dis[s][i.to] = dis[s][top.pos] + i.v;</span><br><span class="line">                q.push((Node)&#123;i.to, dis[s][i.to]&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m), read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v, w; i &lt;= m; ++i) &#123;</span><br><span class="line">        read(u), read(v), read(w);</span><br><span class="line">        g[u].push_back((Edge)&#123;v, w&#125;), g[v].push_back((Edge)&#123;u, w&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i)    read(a[i]), read(b[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    dijkstra(i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> edge : g[i]) &#123;</span><br><span class="line">            <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= k; ++j) &#123;</span><br><span class="line">                sum += <span class="built_in">std</span>::min(dis[a[j]][b[j]], <span class="built_in">std</span>::min(dis[a[j]][i] + dis[edge.to][b[j]], dis[a[j]][edge.to] + dis[i][b[j]]));</span><br><span class="line">            &#125;</span><br><span class="line">            ans = <span class="built_in">std</span>::min(ans, sum);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最短路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1433F] Zero Remainder Sum</title>
      <link href="/2020/10/24/CF1433F-Zero-Remainder-Sum/"/>
      <url>/2020/10/24/CF1433F-Zero-Remainder-Sum/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/problemset/problem/1433/F" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个大小为 $m \times n$ 的矩阵和整数 $k$，每行可以选取不超过 $\lfloor \dfrac{m}{2} \rfloor$ 个数，并且要求总和是 $k$ 的倍数，求最大的总和。$1 \le n, m, k, a_{i, j} \le 70$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>看到题目第一反应就是 DP，然而这场我前面操作太过下饭导致没时间写这个题了。</p><p>设 $f(i, j, k, l)$ 表示取到第 $i$ 行第 $j$ 列，余数为 $k$，当前这一行取了 $l$ 个数的最大值。</p><p>现在考虑转移，我们发现如果按照普通的 DP 写起来是有些麻烦的，尝试记忆化搜索。</p><p>这个代码还是比较好写的。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">80</span>][<span class="number">80</span>][<span class="number">80</span>][<span class="number">80</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">80</span>][<span class="number">80</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> i, <span class="keyword">int</span> j, <span class="keyword">int</span> mod, <span class="keyword">int</span> cnt)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt; n)  <span class="keyword">return</span> mod ? <span class="number">-0x3f3f3f3f</span> : <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (j &gt; m || cnt == m / <span class="number">2</span>)  <span class="keyword">return</span> dfs(i + <span class="number">1</span>, <span class="number">1</span>, mod, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">if</span> (~f[i][j][mod][cnt]) <span class="keyword">return</span> f[i][j][mod][cnt];</span><br><span class="line">    <span class="keyword">return</span> f[i][j][mod][cnt] = <span class="built_in">std</span>::max(dfs(i, j + <span class="number">1</span>, mod, cnt), a[i][j] + dfs(i, j + <span class="number">1</span>, (mod + a[i][j]) % k, cnt + <span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m), read(k);</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= m; ++j) &#123;</span><br><span class="line">            read(a[i][j]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dfs(<span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 记忆化搜索 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1426D] Non-zero Segments</title>
      <link href="/2020/10/18/CF1426D-Non-zero-Segments/"/>
      <url>/2020/10/18/CF1426D-Non-zero-Segments/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/CF1426D" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给定一个长度为 $n$ 的序列，求最少插入多少数才能将这个序列的任意子段和不为 $0$。$2 \le n \le 200000, -10^9 \le a_i \le 10^9, a_i \neq 0$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>先思考 $O(n^2)$ 的算法，先求前缀和，然后找到 $f_j - f_i = 0$ 的 $i, j$，然后更新。</p><p>如果现在 $i &lt; j$，那么在更新的时候对于任何满足 $r &lt; i$ 的子段 $[l, r]$ 都是没有影响的。</p><p>我们可以对这个算法进行优化，当 $f_j = f_i$ 时意味着出现了一个子段和为 $0$ 的子段，这时候我们贪心的一个无限大的元素放在这个子段的末尾，这样一定是最优的。</p><p>使用 <code>std::map</code> 可以很好地实现这个算法。</p><p>另外要特判一下第一个子段和就为 $0$ 的情况，比如 <code>1 -1 ...</code>，所以要初始化 <code>mp[0] = 1</code>。</p><p>每当更新了一次答案之后就要初始化，原因已经提过了，这时候右端点前面的部分已经没有用了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">map</span>&lt;LL, <span class="keyword">int</span>&gt; mp;</span><br><span class="line">LL n, a, s, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    mp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(a);</span><br><span class="line">        s += a;</span><br><span class="line">        <span class="keyword">if</span> (mp[s]) &#123;</span><br><span class="line">            ++ans;</span><br><span class="line">            mp.clear();</span><br><span class="line">            mp[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">            s = a;</span><br><span class="line">        &#125;</span><br><span class="line">        ++mp[s];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1430E] String Reversal</title>
      <link href="/2020/10/15/CF1430E-String-Reversal/"/>
      <url>/2020/10/15/CF1430E-String-Reversal/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/problemset/problem/1430/E" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出长度为 $n$ 的字符串，每次可以交换相邻两个字母，问至少要多少次操作能将字符串变为它的逆序。$2 \le n \le 200000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>如果没有重复字母的话，这道题就是 <a href="https://loj.ac/problem/2609" target="_blank" rel="noopener">[NOIp2013] 火柴排队</a>。</p><p>但是现在是有重复元素的，所以需要进行一些改动。</p><p>大体思路依然一样，设 $c$ 为 $n$ 个元素的一个排列，且满足 $c_{a_i} = b_i$。</p><p>现在考虑相同字母应该怎么排，我们知道最后的答案为 $c$ 的逆序对个数，那只需要让 $c$ 尽量满足递增就可以让逆序对个数最小。</p><p>所以我们可以按照升序的顺序对相同字母进行操作，具体看代码吧。</p><p>最后求 $c$ 的逆序对个数即可。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; v[<span class="number">30</span>];</span><br><span class="line">LL t[<span class="number">200010</span>], a[<span class="number">200010</span>], b[<span class="number">200010</span>], c[<span class="number">200010</span>], m[<span class="number">30</span>];</span><br><span class="line">LL ans;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">200010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x) &#123;</span><br><span class="line">        s += t[x];</span><br><span class="line">        x -= lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, LL d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (x &lt;= n) &#123;</span><br><span class="line">        t[x] += d;</span><br><span class="line">        x += lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        a[i] = s[i] - <span class="string">'a'</span> + <span class="number">1</span>;</span><br><span class="line">        b[n - i + <span class="number">1</span>] = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    v[b[i]].push_back(i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    c[i] = v[a[i]][m[a[i]]++];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        modify(c[i], <span class="number">1</span>);</span><br><span class="line">        ans += i - query(c[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1430D] String Deletion</title>
      <link href="/2020/10/15/CF1430D-String-Deletion/"/>
      <url>/2020/10/15/CF1430D-String-Deletion/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/problemset/problem/1430/D" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：$t$ 组数据。给出一个长度为 $n$ 的 01 字符串，每次操作可以删去任意一个字符，然后删掉从左开始连续相同的字符，问最多的操作次数。$1 \le t \le 1000, 1 \le n \le 2 \cdot 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑贪心，显然每次应该删连续的字母。</p><p>设 $a$ 数组为字符串每一段相同字符的长度，$a$ 的大小为 $m$，则最多能操作的次数为 $m$。</p><p>每次操作应该找从左往右第一个长度不为 $1$ 的连续的段，然后删掉其中的一个字符。</p><p>如果运气很好，删 $m$ 次正好删完了，答案就为 $m$。</p><p>如果还没删到 $m$ 次，这个字符串里面就没有连续的字符的时候，设已经删了 $k$ 次，那么答案应该为 $k + \lceil \dfrac{m - k}{2} \rceil$。</p><p>看到有人说比 C 简单，我倒是感觉 C 比这个简单多了…</p><p>考试的时候写了个 $O(n \log n)$ 的，现在想来好像贪心策略就不太对。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">int</span> n, t, m, l, pos, ans;</span><br><span class="line"><span class="keyword">char</span> s[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">bool</span> flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        read(n);</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s + <span class="number">1</span>);</span><br><span class="line">        l = <span class="number">1</span>, m = ans = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (s[i] != s[i - <span class="number">1</span>]) &#123;</span><br><span class="line">                a[++m] = (i - <span class="number">1</span>) - l + <span class="number">1</span>;</span><br><span class="line">                l = i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        a[++m] = n - l + <span class="number">1</span>;</span><br><span class="line">        pos = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">            <span class="keyword">while</span> (pos &lt;= m &amp;&amp; a[pos] == <span class="number">1</span>) ++pos;</span><br><span class="line">            --a[pos];</span><br><span class="line">            <span class="keyword">if</span> (pos &gt; m) &#123;</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                ans = i - <span class="number">1</span> + (m - i + <span class="number">2</span>) / <span class="number">2</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (pos &lt;= i)   pos = i + <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, flag ? ans : m);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[SNOI2017] 英雄联盟</title>
      <link href="/2020/10/02/SNOI2017-%E8%8B%B1%E9%9B%84%E8%81%94%E7%9B%9F/"/>
      <url>/2020/10/02/SNOI2017-%E8%8B%B1%E9%9B%84%E8%81%94%E7%9B%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2256" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 个物品，每个物品的种类有 $k$ 种，价格为 $c$。设 $x$ 为每种物品买到的种类的乘积，求当 $x \ge m$ 时的最少花费。$M \le 10^{17}, 1 \le k \le 10, 1 \le c \le 199, n \le \max(5, \log_2^4 10)$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这个 $n$ 还要算一下是我没想到的，算出来大概是 $120$ 左右的样子。</p><p>由于 $k, c$ 都十分小，可以求出一个把所有物品都买下来需要的花费，把这个当成背包的体积。</p><p>然后做多重背包，这里 $k$ 很小，并不用做其他的优化。</p><p>最后判断一下即可。</p><p>注意初始化 <code>f[0] = 1</code>。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL k[<span class="number">260</span>], q[<span class="number">260</span>], f[<span class="number">510000</span>];</span><br><span class="line">LL n, m, M;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(k[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(q[i]), M += q[i] * k[i];</span><br><span class="line">    f[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = M; j &gt;= <span class="number">0</span>; --j) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">0</span>; l &lt;= k[i] &amp;&amp; l * q[i] &lt;= j; ++l) &#123;</span><br><span class="line">                f[j] = <span class="built_in">std</span>::max(f[j], f[j - l * q[i]] * l);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= M; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (f[i] &gt;= m) &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, i);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 背包 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SNOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CQOI2016] 手机号码</title>
      <link href="/2020/10/01/CQOI2016-%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81/"/>
      <url>/2020/10/01/CQOI2016-%E6%89%8B%E6%9C%BA%E5%8F%B7%E7%A0%81/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2044" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：求出 $[l, r]$ 中所有满足数字中出现至少连续 $3$ 个相同的数字，并且不能同时出现 $4$ 和 $8$ 的数的个数。$10^{10} \le l \le r \le 10^{11}$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>还是很模板的数位 DP，就是这个状态实在是太 tm 多了，写的人很烦。</p><p>然后就有一个很奇妙的事情，如果 $l = 10^{10}$ 我的程序就会锅。</p><p>很显然是求答案的时候出了问题，如果 $l = 10^{10}$，那求答案的时候就会求 $10^{10} - 1$，但是 $[1, 10^{10} - 1]$ 里根据题目是没有一个数是满足条件的。</p><p>所以要在开始就判断这个数是不是 $11$ 位数。</p><p>但是如果不判断的话，应该也会正常的减掉那些位数不够的数，不知道为什么会锅，而且答案差的还很多。</p><p>看了眼题解，全都是先枚举第一位然后再开始搜，这…</p><p>最后写了个特判过了，如果搜到第 $3$ 位还有前导零就直接返回 $0$。</p><p>懵。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">20</span>][<span class="number">2</span>][<span class="number">2</span>][<span class="number">2</span>][<span class="number">10</span>][<span class="number">10</span>][<span class="number">2</span>];</span><br><span class="line">LL dig[<span class="number">20</span>];</span><br><span class="line">LL l, r, len;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep, <span class="keyword">bool</span> lim, <span class="keyword">bool</span> is4, <span class="keyword">bool</span> is8, <span class="keyword">bool</span> isc, <span class="keyword">int</span> l1, <span class="keyword">int</span> l2, <span class="keyword">bool</span> zero)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dep == <span class="number">9</span> &amp;&amp; (!zero))    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span> (!dep)   <span class="keyword">return</span> ((!(is4 &amp;&amp; is8)) &amp;&amp; isc &amp;&amp; zero);</span><br><span class="line">    <span class="keyword">if</span> (!lim &amp;&amp; (~f[dep][is4][is8][isc][l1][l2][zero]))   <span class="keyword">return</span> f[dep][is4][is8][isc][l1][l2][zero];</span><br><span class="line">    LL up = lim ? dig[dep] : <span class="number">9</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; ++i) &#123;</span><br><span class="line">        ans += dfs(dep - <span class="number">1</span>, lim &amp;&amp; i == up, is4 || (i == <span class="number">4</span>), is8 || (i == <span class="number">8</span>), isc || (i == l1 &amp;&amp; l1 == l2), i, l1, zero || i);</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="keyword">if</span> (!lim)   f[dep][is4][is8][isc][l1][l2][zero] = ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span> </span>&#123;</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dig, <span class="number">0</span>, <span class="keyword">sizeof</span>(dig));</span><br><span class="line">    <span class="keyword">while</span> (x)   dig[++len] = x % <span class="number">10</span>, x /= <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">return</span> dfs(len, <span class="literal">true</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(l), read(r);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, solve(r) - solve(l - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 数位 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CQOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[AHOI2009] 同类分布</title>
      <link href="/2020/10/01/AHOI2009-%E5%90%8C%E7%B1%BB%E5%88%86%E5%B8%83/"/>
      <url>/2020/10/01/AHOI2009-%E5%90%8C%E7%B1%BB%E5%88%86%E5%B8%83/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P4127" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：求出 $[a, b]$ 中各位数字之和能整除自身的数的个数。$1 \le a \le b \le 10^{18}$。时限 3s。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这个记忆化怎么写倒是很好想，但是如果要保存下来每次乘的结果的话最大有可能到 $10^{18}$，拿数组没法存。</p><p>没法存的话那就考虑取模吧，但是在搜的时候各位数之和也是会变化的，行不通。</p><p>然后想了半天不知道咋搞。</p><p>后来看题解，由于时限很大，考虑枚举各位数的和，在搜的时候判断是否满足条件就行了…</p><p>由于最后要判断和，就不用管前导零了。</p><p>每次总是想不到这种有些暴力的做法，怎么办呢…</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">30</span>][<span class="number">200</span>][<span class="number">200</span>];</span><br><span class="line">LL dig[<span class="number">30</span>];</span><br><span class="line">LL a, b, len, mod;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep, <span class="keyword">bool</span> lim, LL s, LL sum)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!dep)   <span class="keyword">return</span> (s == <span class="number">0</span> &amp;&amp; sum == mod);</span><br><span class="line">    <span class="keyword">if</span> ((!lim) &amp;&amp; (~f[dep][s][sum]))    <span class="keyword">return</span> f[dep][s][sum];</span><br><span class="line">    LL up = lim ? dig[dep] : <span class="number">9</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; ++i) &#123;</span><br><span class="line">        ans += dfs(dep - <span class="number">1</span>, lim &amp;&amp; i == up, (s * <span class="number">10</span> + i) % mod, sum + i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!lim)   f[dep][s][sum] = ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">solve</span><span class="params">(LL x)</span> </span>&#123;</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dig, <span class="number">0</span>, <span class="keyword">sizeof</span>(dig));</span><br><span class="line">    <span class="keyword">while</span> (x)   dig[++len] = x % <span class="number">10</span>, x /= <span class="number">10</span>;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (mod = <span class="number">1</span>; mod &lt;= len * <span class="number">9</span>; ++mod) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        s += dfs(len, <span class="literal">true</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(a), read(b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, solve(b) - solve(a - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 数位 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AHOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ZJOI2010] 数字计数</title>
      <link href="/2020/10/01/ZJOI2010-%E6%95%B0%E5%AD%97%E8%AE%A1%E6%95%B0/"/>
      <url>/2020/10/01/ZJOI2010-%E6%95%B0%E5%AD%97%E8%AE%A1%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/10169" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：求出 $[a, b]$ 中的所有整数中每个数字（$0$ ~ $9$）出现的次数。$1 \le a, b \le 10^{12}$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>可能是人生唯一一道 ZJOI，这还是十年前的题。</p><p>倒是很显然的模板题，状态设成 $f(i, j, k, l, o)$ 表示第 $i$ 位，要求个数的数字为 $j$，$k$ 表示是否枚举的数字是否有上限，$l$ 表示个数，$o$ 表示是否有前导零。</p><p>但是这里我第一次记忆化写错了，存的是 <code>f[i][j]</code>，其实应该存 <code>f[i][l]</code>。不过后来看题解好像把所有状态都存下来就没事了？不是很懂。</p><p>注意开 <code>long long</code>。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line">LL ans1[<span class="number">15</span>], ans2[<span class="number">15</span>], dig[<span class="number">20</span>];</span><br><span class="line">LL a, b, len;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep, <span class="keyword">int</span> num, <span class="keyword">bool</span> lim, LL s, <span class="keyword">bool</span> zero)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> ((!dep))   <span class="keyword">return</span> s;</span><br><span class="line">    <span class="keyword">if</span> ((!lim) &amp;&amp; (~f[dep][s]) &amp;&amp; zero)   <span class="keyword">return</span> f[dep][s];</span><br><span class="line">    LL up = lim ? dig[dep] : <span class="number">9</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; ++i) &#123;</span><br><span class="line">        ans += dfs(dep - <span class="number">1</span>, num, lim &amp;&amp; (i == up), s + (i == num &amp;&amp; (zero || i)), zero || i);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> ((!lim) &amp;&amp; zero)    f[dep][s] = ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(LL x, LL *ans)</span> </span>&#123;</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dig, <span class="number">0</span>, <span class="keyword">sizeof</span>(dig));</span><br><span class="line">    <span class="keyword">while</span> (x)   dig[++len] = x % <span class="number">10</span>, x /= <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; ++i) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        ans[i] = dfs(len, i, <span class="literal">true</span>, <span class="number">0</span>, <span class="literal">false</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(a), read(b);</span><br><span class="line">    solve(a - <span class="number">1</span>, ans1), solve(b, ans2);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; ++i)    <span class="built_in">printf</span>(<span class="string">"%lld "</span>, ans2[i] - ans1[i]);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 数位 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ZJOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[SCOI2009] windy 数</title>
      <link href="/2020/10/01/SCOI2009-windy%E6%95%B0/"/>
      <url>/2020/10/01/SCOI2009-windy%E6%95%B0/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/10165" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：求出 $a$ 和 $b$ 之间有多少个数满足不含前导零且相邻两个数字之差至少为 $2$。$1 \le a \le b \le 2 \times 10^9$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>(感觉防止自己陷入抑郁情绪的一种方法就是让自己忙起来…)</p><p>数位 DP 的裸题，设 $f(i, j, k)$ 表示第 $i$ 位，上一位数字为 $j$，$k$ 表示下一位是否有上限。一般来说数位 DP 用记忆化搜索会好写些。</p><p>然后就是很套路的搜。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">15</span>][<span class="number">15</span>];</span><br><span class="line"><span class="keyword">int</span> dig[<span class="number">15</span>];</span><br><span class="line"><span class="keyword">int</span> len, a, b;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> dep, <span class="keyword">int</span> lst, <span class="keyword">bool</span> lim)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!dep)   <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> ((!lim) &amp;&amp; (~f[dep][lst]))    <span class="keyword">return</span> f[dep][lst];</span><br><span class="line">    <span class="keyword">int</span> up = lim ? dig[dep] : <span class="number">9</span>, ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= up; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">abs</span>(i - lst) &lt; <span class="number">2</span>)  <span class="keyword">continue</span>;</span><br><span class="line">        ans += dfs(dep - <span class="number">1</span>, lst == <span class="number">11</span> &amp;&amp; i == <span class="number">0</span> ? <span class="number">11</span> : i, lim &amp;&amp; i == up);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!lim)   f[dep][lst] = ans;</span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">solve</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    len = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">memset</span>(dig, <span class="number">0</span>, <span class="keyword">sizeof</span>(dig));</span><br><span class="line">    <span class="keyword">while</span> (x)   dig[++len] = x % <span class="number">10</span>, x /= <span class="number">10</span>;</span><br><span class="line">    <span class="built_in">memset</span>(f, <span class="number">-1</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">    <span class="keyword">return</span> dfs(len, <span class="number">11</span>, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(a), read(b);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, solve(b) - solve(a - <span class="number">1</span>));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 数位 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SCOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P4554] 小明的游戏</title>
      <link href="/2020/09/26/%E6%B4%9B%E8%B0%B7-P4554-%E5%B0%8F%E6%98%8E%E7%9A%84%E6%B8%B8%E6%88%8F/"/>
      <url>/2020/09/26/%E6%B4%9B%E8%B0%B7-P4554-%E5%B0%8F%E6%98%8E%E7%9A%84%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>给出一个 $n \times m$ 的棋盘，每次可以向上下左右移动一格，如果格子相同，费用为 $0$，不然为 $1$，问从 $(a, b)$ 走到 $(x, y)$ 的最小花费。$1 \le n, m \le 500$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>最开始想用 dfs 跑过去…然后理所当然的超时了。</p><p>然后开始写 djikstra，写着写着感觉就写成广搜了。</p><p>不懂为什么那么多人总要写 spfa，dijkstra 也不长啊？</p><p>然后这道题的点是从 $0$ 开始标号的，跟某比赛卡行末空格一样毒瘤。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[] = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;, dy[] = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> x, y, dis;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &gt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dis[<span class="number">510</span>][<span class="number">510</span>], g[<span class="number">510</span>][<span class="number">510</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, sx, sy, ex, ey;</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">510</span>][<span class="number">510</span>];</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">510</span>][<span class="number">510</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">dist</span><span class="params">(<span class="keyword">int</span> ax, <span class="keyword">int</span> ay, <span class="keyword">int</span> bx, <span class="keyword">int</span> by)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a[ax][ay] != a[bx][by];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f3f3f3f</span>, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">    dis[sx][sy] = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::priority_queue&lt;Node&gt; q;</span><br><span class="line">    q.push((Node)&#123;sx, sy, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        Node top = q.top();</span><br><span class="line">        q.pop();</span><br><span class="line">        <span class="keyword">if</span> (vis[top.x][top.y])  <span class="keyword">continue</span>;</span><br><span class="line">        vis[top.x][top.y] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> nx = top.x + dx[i], ny = top.y + dy[i];</span><br><span class="line">            <span class="keyword">if</span> (nx &gt;= <span class="number">1</span> &amp;&amp; nx &lt;= n &amp;&amp; ny &gt;= <span class="number">1</span> &amp;&amp; ny &lt;= m &amp;&amp; dis[nx][ny] &gt; dis[top.x][top.y] + dist(top.x, top.y, nx, ny)) &#123;</span><br><span class="line">                dis[nx][ny] = dis[top.x][top.y] + dist(top.x, top.y, nx, ny);</span><br><span class="line">                q.push((Node)&#123;nx, ny, dis[nx][ny]&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; m &amp;&amp; n + m) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    <span class="built_in">scanf</span>(<span class="string">"%s"</span>, a[i] + <span class="number">1</span>);</span><br><span class="line">        read(sx), read(sy), read(ex), read(ey);</span><br><span class="line">        ++sx, ++sy, ++ex, ++ey;</span><br><span class="line">        dijkstra();</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[ex][ey]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最短路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2013] 火柴排队</title>
      <link href="/2020/09/26/NOIp2013-%E7%81%AB%E6%9F%B4%E6%8E%92%E9%98%9F/"/>
      <url>/2020/09/26/NOIp2013-%E7%81%AB%E6%9F%B4%E6%8E%92%E9%98%9F/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2609" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有两个长度为 $n$ 的序列 $a, b$，每次可以交换 $a, b$ 中相邻的两个数，最小化 $\sum(a_i - b_i)^2$。$1 \le n \le 10^5, 0 \le a_i, b_i \le 2^{31}$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先有一个很明显的东西：$a$ 中第一大的应该跟 $b$ 中第一大的对应，$a$ 中第二大的应该跟 $b$ 中第二大的对应，以此类推。问题就转变为如何将 $b$ 的大小顺序变为 $a$ 的大小顺序。</p><p>先离散化一下。</p><p>之后相当于把 $b$ 变成 $a$，相当于按照 $a$ 的顺序对 $b$ 数组排序。</p><p>我们可以设 $c_{b_i} = a_i$，那么问题就变为了对 $c$ 冒泡排序的次数，求逆序对即可。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> LL mod = <span class="number">1e8</span> - <span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">LL A[<span class="number">100010</span>], B[<span class="number">100010</span>], a[<span class="number">100010</span>], b[<span class="number">100010</span>], c[<span class="number">100010</span>], t[<span class="number">100010</span>];</span><br><span class="line">LL ans;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x) &#123;</span><br><span class="line">        s += t[x];</span><br><span class="line">        x -= lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, LL p)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (x &lt;= n) &#123;</span><br><span class="line">        t[x] += p;</span><br><span class="line">        x += lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(A[i]), a[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(B[i]), b[i] = i;</span><br><span class="line">    <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>, [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> A[a] &lt; A[b];</span><br><span class="line">    &#125; );</span><br><span class="line">    <span class="built_in">std</span>::sort(b + <span class="number">1</span>, b + n + <span class="number">1</span>, [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">        <span class="keyword">return</span> B[a] &lt; B[b];</span><br><span class="line">    &#125; );</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    c[b[i]] = a[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; --i) &#123;</span><br><span class="line">        ans += query(c[i] - <span class="number">1</span>);</span><br><span class="line">        modify(c[i], <span class="number">1</span>);</span><br><span class="line">        ans %= mod;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans % mod);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[MSSCTF2020] base_pro</title>
      <link href="/2020/09/21/MSSCTF2020-base-pro/"/>
      <url>/2020/09/21/MSSCTF2020-base-pro/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>It is simple for you, right? maybe you already know it.</p><p>题目链接先不放了，等官方放出来再说。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>很遗憾的一道题…思路完全正确，不知道哪里出了问题导致最后没能做出来。</p><p>不过做出来也只是三等奖第一名，那没事了。</p><p>拖进 IDA 分析一顿，发现一个很有趣的数组 <code>byte_4070</code> 和一串看起来很奇怪的字符串。</p><p>观察 <code>main</code> 里唯一的函数 <code>sub_11EF</code>，发现这玩意很像 base64。</p><p>回去看一眼那串很奇怪的字符串，其实就是改过的 base64 的表。</p><p>把 <code>byte_4070</code> 按照他的表加密就可以得到 flag 了。</p><p>然后就出现了奇怪的事情，我拿 C++ 写怎么都写不对，但是又找不出任何问题。后来去问了位学长，拿 py 给我把正确 flag 搞出来了…</p><p>……</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># a is byte_4070</span></span><br><span class="line">s = <span class="string">""</span></span><br><span class="line">base64 = <span class="string">'Pbcyz016DEA23CwxM4LdfoQW+klKZapqmhGv7/RinTUVHXeY5BNOFSgjIJrst89u='</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> a:</span><br><span class="line">    s += bin(i)[<span class="number">2</span>:].zfill(<span class="number">8</span>)</span><br><span class="line">print(s)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">0</span>, len(s), <span class="number">6</span>):</span><br><span class="line">    tmp = s[i: i + <span class="number">6</span>]</span><br><span class="line">    print(base64[int(tmp, <span class="number">2</span>)], end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure><h3 id="教训"><a href="#教训" class="headerlink" title="教训"></a>教训</h3><p>打 CTF 一定要学好 Python 啊…</p>]]></content>
      
      
      <categories>
          
          <category> CTF </category>
          
          <category> Reverse </category>
          
      </categories>
      
      
        <tags>
            
            <tag> MSSCTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1336B] Xenia and Colorful Gems</title>
      <link href="/2020/09/10/CF1336B-Xenia-and-Colorful-Gems/"/>
      <url>/2020/09/10/CF1336B-Xenia-and-Colorful-Gems/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/CF1336B" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：$t$ 组数据。给出长度为 $n_r, n_g, n_b$ 的序列 $r, g, b$，要求在三个序列中各选一个数 $x, y, z$，使得 $(x - y) ^ 2 + (y - z) ^ 2 + (z - x) ^ 2$ 最小。$1 \le t \le 100, 1 \le n_r, n_g, n_b \le 10^5, 1 \le r_i, g_i, b_i \le 10^9$。时限 3s。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>最简单的做法肯定是 $n^3$ 枚举，写的快跑得慢。</p><p>如果只有两个序列的话，显然可以枚举 $r$ 中的所有数，然后每次二分找 $g$ 中和它差最小的数。</p><p>对于这个题也一样：枚举 $r$ 中的所有数，然后二分找 $g$ 和 $b$ 中离他最近的数。</p><p>但是这里有个问题：怎么确定找 $z$ 的时候是离 $y$ 更近还是离 $x$ 更近呢？</p><p>我们发现不用考虑，都试一遍就行了。</p><p>总共可能的顺序有 $6$ 种，再看到给了 3s，能过。</p><p>这题昨天晚上写的我越写越困，最后干脆直接照着 std 写了，然后还抄错了，要完。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;LL&gt; r, g, b;</span><br><span class="line">LL ans, nr, ng, nb, t, p;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">solve</span><span class="params">(<span class="built_in">std</span>::<span class="built_in">vector</span>&lt;LL&gt; a, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;LL&gt; b, <span class="built_in">std</span>::<span class="built_in">vector</span>&lt;LL&gt; c)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> x : a) &#123;</span><br><span class="line">        <span class="keyword">auto</span> y = <span class="built_in">std</span>::lower_bound(b.begin(), b.end(), x), z = <span class="built_in">std</span>::upper_bound(c.begin(), c.end(), x);</span><br><span class="line">        <span class="keyword">if</span> (y == b.end() || z == c.begin())   <span class="keyword">continue</span>;</span><br><span class="line">        --z;</span><br><span class="line">        ans = <span class="built_in">std</span>::min(ans, (x - *y) * (x - *y) + (*y - *z) * (*y - *z) + (x - *z) * (x - *z));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        ans = <span class="number">9e18</span>;</span><br><span class="line">        r.clear(), g.clear(), b.clear();</span><br><span class="line">        read(nr), read(ng), read(nb);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nr; ++i)   read(p), r.push_back(p);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= ng; ++i)   read(p), g.push_back(p);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= nb; ++i)   read(p), b.push_back(p);</span><br><span class="line">        <span class="built_in">std</span>::sort(r.begin(), r.end()), <span class="built_in">std</span>::sort(g.begin(), g.end()), <span class="built_in">std</span>::sort(b.begin(), b.end());</span><br><span class="line">        solve(r, g, b), solve(r, b, g), solve(g, r, b), solve(g, b, r), solve(b, r, g), solve(b, g, r);</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOI2015] 程序自动分析</title>
      <link href="/2020/09/10/NOI2015-%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%8A%A8%E5%88%86%E6%9E%90/"/>
      <url>/2020/09/10/NOI2015-%E7%A8%8B%E5%BA%8F%E8%87%AA%E5%8A%A8%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2129" target="_blank" rel="noopener">题目链接</a></p><p>$t$ 组数据。每组数据给出 $n$ 个约束条件 $i, j, e$，$e = 1$ 表示 $x_i = x_j$，$e = 0$ 表示 $x_j \neq x_j$，判断是否有矛盾。$1 \le t \le 10, 1 \le n \le 10^6, 1 \le i, j \le 10^9$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>并查集裸题。</p><p>先把所有 $e = 1$ 的连到一起，然后再看所有 $e = 0$ 的有没有不合法的。</p><p>最开始的时候离散化写错，然后初始化又写错了，要完。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> i, j;</span><br><span class="line">    <span class="keyword">bool</span> e;</span><br><span class="line">&#125; a[<span class="number">1000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">2000010</span>], b[<span class="number">2000010</span>];</span><br><span class="line"><span class="keyword">int</span> T, n, l;</span><br><span class="line"><span class="keyword">bool</span> flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> f[x] == x ? x : f[x] = unionFind(f[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        <span class="built_in">memset</span>(b, <span class="number">0</span>, <span class="keyword">sizeof</span>(b));</span><br><span class="line">        <span class="built_in">memset</span>(f, <span class="number">0</span>, <span class="keyword">sizeof</span>(f));</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        read(n);</span><br><span class="line">        l = <span class="number">0</span>;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i].i), read(a[i].j), read(a[i].e), b[++l] = a[i].i, b[++l] = a[i].j;</span><br><span class="line">        <span class="built_in">std</span>::sort(b + <span class="number">1</span>, b + l + <span class="number">1</span>);</span><br><span class="line">        l = <span class="built_in">std</span>::unique(b + <span class="number">1</span>, b + l + <span class="number">1</span>) - b - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            a[i].i = <span class="built_in">std</span>::lower_bound(b + <span class="number">1</span>, b + l + <span class="number">1</span>, a[i].i) - b - <span class="number">1</span>;</span><br><span class="line">            a[i].j = <span class="built_in">std</span>::lower_bound(b + <span class="number">1</span>, b + l + <span class="number">1</span>, a[i].j) - b - <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= l; ++i)    f[i] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i].e) &#123;</span><br><span class="line">                f[unionFind(a[i].i)] = unionFind(a[i].j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!a[i].e) &#123;</span><br><span class="line">                <span class="keyword">if</span> (unionFind(a[i].i) == unionFind(a[i].j)) &#123;</span><br><span class="line">                    flag = <span class="literal">false</span>;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125; </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">puts</span>(flag ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br><span class="line">    &#125;   </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 并查集 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1404A] Balanced Bitstring</title>
      <link href="/2020/09/10/CF1404A-Balanced-Bitstring/"/>
      <url>/2020/09/10/CF1404A-Balanced-Bitstring/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/1404/A" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：$t$ 组数据。每次给出一个长度为 $n$ 的字符串 $s$ 和一个偶数 $k$，其中 $s$ 由 $0, 1$ 和 ? 构成。现在要求将所有 ? 换为 $1$ 或 $0$，询问是否有可能对于每一个长度为 $k$ 的连续子序列中 $1$ 和 $0$ 的数量相等。$1 \le t \le 10^4, 2 \le k \le n \le 3 \cdot 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>降智题，考场上猜了个正确的但是不会写的结论。</p><p>有一个很重要的结论：$s_i = s_{i + k}$。</p><p>这个很显然，对于 $(i, i + k)$ 这个区间内如果都是合法的数字，加上 $s_i, s_{i + k}$ 之后如果依然合法，只能 $s_i = s_{i + k}$。更进一步的，可以得到 $s_i = s_j(i \equiv j \pmod k)$。</p><p>这样先跑一遍看原来的串合不合法。</p><p>然后再考虑有 ? 的情况。由上面的结论可以知道，我们只需要讨论一个长度为 $k$ 的区间就行了。然后就很好做，只要看这个区间内 $1$ 和 $0$ 的个数有没有超过 $\frac{k}{2}$ 就行了。</p><p>模拟题都不会做了，要完。</p><p>改这道题的时候很瞌睡，不知道哪里抽了对着正确的代码调了半天。最后突然醒过来：这个输出不是和样例一模一样吗…</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> s[<span class="number">300010</span>];</span><br><span class="line"><span class="keyword">int</span> t, n, k, f, g;</span><br><span class="line"><span class="keyword">bool</span> flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        flag = <span class="literal">true</span>;</span><br><span class="line">        f = g = <span class="number">0</span>;</span><br><span class="line">        read(n), read(k);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s"</span>, s + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> t = <span class="number">-1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= n; j += k) &#123;</span><br><span class="line">                <span class="keyword">if</span> (s[j] != <span class="string">'?'</span>) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (t != <span class="number">-1</span> &amp;&amp; s[j] - <span class="string">'0'</span> != t) &#123;</span><br><span class="line">                        flag = <span class="literal">false</span>;</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    t = s[j] - <span class="string">'0'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (t == <span class="number">1</span>) ++f;</span><br><span class="line">            <span class="keyword">else</span>    <span class="keyword">if</span> (t == <span class="number">0</span>) ++g;   </span><br><span class="line">            <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">std</span>::max(f, g) &gt; k / <span class="number">2</span>) flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">puts</span>(flag ? <span class="string">"YES"</span> : <span class="string">"NO"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2013] 聪明的质监员</title>
      <link href="/2020/09/09/NOIp2013-%E8%81%AA%E6%98%8E%E7%9A%84%E8%B4%A8%E7%9B%91%E5%91%98/"/>
      <url>/2020/09/09/NOIp2013-%E8%81%AA%E6%98%8E%E7%9A%84%E8%B4%A8%E7%9B%91%E5%91%98/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2600" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 个矿石，重量和价值为 $w_i, v_i$。有 $m$ 个区间 $[L_i, R_i]$，现在要求选定一个值 $W$，对于每个区间 $[L_i, R_i]$，检验值 $Y_i = \sum \limits_{j} 1 \cdot \sum \limits_{j} v_j, j \in [L_i, R_i], w_j \ge W$。最小化 $|\sum Y_i - s|$ 并输出最小值。$1 \le n, m \le 200000, 0 &lt; w_i, v_i \le 10^6, 0 &lt; s \le 10^{12}, 1 \le L_i \le R_i \le n$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑二分让 $\sum Y_i$ 接近 $s$。</p><p>我们发现如果按照正常的二分写的话，每次 check 是 $O(nm)$ 的，过不了。</p><p>用前缀和优化一下，如果 $w_i \ge W$ 就按照正常的前缀和写，不然就把当前的值当成 $0$，反正对结果没有影响。</p><p>这样每次 check 的复杂度就变成 $O(n + m)$ 的了。</p><p>注意开 <code>long long</code>。</p><p>第一次写的时候初始化错了，要完。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    LL l, r;</span><br><span class="line">&#125; a[<span class="number">200010</span>];</span><br><span class="line"></span><br><span class="line">LL w[<span class="number">200010</span>], v[<span class="number">200010</span>], g[<span class="number">200010</span>], f[<span class="number">200010</span>];</span><br><span class="line">LL n, m, s, ans = <span class="number">1e18</span>, res;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(LL W)</span> </span>&#123;</span><br><span class="line">    LL y = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::fill(g + <span class="number">1</span>, g + n + <span class="number">1</span>, <span class="number">0</span>), <span class="built_in">std</span>::fill(f + <span class="number">1</span>, f + n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (w[i] &gt;= W)  f[i] = f[i - <span class="number">1</span>] + <span class="number">1</span>, g[i] = g[i - <span class="number">1</span>] + v[i];</span><br><span class="line">        <span class="keyword">else</span>    f[i] = f[i - <span class="number">1</span>], g[i] = g[i - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)    y += (f[a[i].r] - f[a[i].l - <span class="number">1</span>]) * (g[a[i].r] - g[a[i].l - <span class="number">1</span>]);</span><br><span class="line">    res = y - s &gt; <span class="number">0</span> ? y - s : s - y;</span><br><span class="line">    <span class="keyword">return</span> y &gt; s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m), read(s);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(w[i]), read(v[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)    read(a[i].l), read(a[i].r);</span><br><span class="line">    LL l = <span class="number">1</span>, r = <span class="number">1e6</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        LL mid = (l + r) &gt;&gt; <span class="number">1L</span>L;</span><br><span class="line">        <span class="keyword">if</span> (check(mid)) l = mid + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">else</span>    r = mid - <span class="number">1</span>;</span><br><span class="line">        ans = <span class="built_in">std</span>::min(ans, res);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 二分 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P5656] 【模板】二元一次不定方程</title>
      <link href="/2020/09/07/%E6%B4%9B%E8%B0%B7-P5656-%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E4%BA%8C%E5%85%83%E4%B8%80%E6%AC%A1%E4%B8%8D%E5%AE%9A%E6%96%B9%E7%A8%8B/"/>
      <url>/2020/09/07/%E6%B4%9B%E8%B0%B7-P5656-%E3%80%90%E6%A8%A1%E6%9D%BF%E3%80%91%E4%BA%8C%E5%85%83%E4%B8%80%E6%AC%A1%E4%B8%8D%E5%AE%9A%E6%96%B9%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P5656" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出不定方程 $ax + by = c$，判断是否有整数解，若无解输出 $-1$，若有整数解但无正整数解，输出 $x_{\min}, y_{\min}(x, y &gt; 0)$，若有正整数解输出正整数解的数量，$x_{\min}, y_{\min}, x_{\max}, y_{\max}(x, y &gt; 0)$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>好久没写这么数学的数学题了……</p><p>首先判断无解，由裴蜀定理得当 $c | \gcd(a, b)$ 时有解。</p><p>用扩展欧几里得算法算出 $ax + by = \gcd(a, b)$ 的一组解 $x_0, y_0$，即 $ax_0 + by_0 = \gcd(a, b)$。</p><p>至于怎么算，先求出 $ax + by = 1$ 的解然后乘 $\gcd(a, b)$ 就行了。</p><p>此时原方程可以写成 $\dfrac{acx_0}{\gcd(a, b)} + \dfrac{bcy_0}{\gcd(a, b)} = c$（同时乘上 $\dfrac{c}{\gcd(a, b)}$）。</p><p>即一组解为 $x_1 = \dfrac{cx_0}{\gcd(a, b)}, y_1 = \dfrac{cy_0}{\gcd(a, b)}$，也就是 $ax_1 + by_1 = c$。</p><p>这还不够，题目让求出一大堆奇奇怪怪的东西，意味着我们要构造出通解。</p><p>这个式子应该长这个样子：$a(x_1 + bd) + b(y_1 - ad) = c$（展开后消掉了）。</p><p>感性理解一下，这个 $bd$ 和 $ad$ 应该是在某一个基准上成倍的改变的，我们考虑求出这个基准。</p><p>设 $d_x = bd_{\min}, d_y = ad_{\min}$（<del>有微分方程那味了</del>）。</p><p>那么 $ad_x = bd_y$。</p><p>这个式子什么时候相等且 $d_x, d_y$ 都最小呢？显然当左右两边都为 $\mathrm{lcm}(a, b)$ 时。</p><p>我们又知道 $\mathrm{lcm}(a, b) = \dfrac{ab}{\gcd(a, b)}$，得到 $d_x = \dfrac{b}{\gcd(a, b)}, d_y = \dfrac{a}{\gcd(a, b)}$。</p><p>通解就可以表示出来了，$x = x_1 + sd_x, y = y_1 - sd_y(s \in \mathbb{Z})$。</p><p>题目让我们找出最小正整数解，意味着解不等式组 $\begin{cases}x_1 + sd_x &gt; 0 \\y_1 - sd_y &gt; 0 \\\end{cases}$。</p><p>解得 $-\dfrac{d_x}{x_1} &lt; s &lt; \dfrac{y_1}{d_y}$。</p><p>由于 $s \in \mathbb{Z}$，将两边取个整，得到 $-\lceil \dfrac{x_1}{d_x} \rceil \le s \le \lfloor \dfrac{y_1}{d_y} \rfloor$。</p><p>这样我们就先求出 $x_{\min}$ 和 $y_{\min}$ 了。</p><p>代入原方程，显然 $x$ 越小时 $y$ 越大，我们可以根据这个算出 $x_{\max} = \dfrac{c - by_{\min}}{a}, y_{\max} = \dfrac{c - ax_{\min}}{b}$。</p><p>最后就是解的个数了，用 $\dfrac{x_{\max} - x_{\min}}{d_x} + 1$ 或者 $\dfrac{y_{\max} - y_{\min}}{d_y} + 1$ 算就好了。</p><p>注意开 <code>long long</code>，这道题还有很多这取整那取整的细节。</p><p>感觉自己数论还是差的一批，要完。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL T, a, b, c, x, y, xmin, ymin, xmax, ymax, cnt;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">exGcd</span><span class="params">(LL a, LL b, LL &amp;x, LL &amp;y)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        x = <span class="number">1</span>, y = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">return</span> a;</span><br><span class="line">    &#125;</span><br><span class="line">    LL d = exGcd(b, a % b, x, y), t = x;</span><br><span class="line">    x = y, y = t - (a / b) * y;</span><br><span class="line">    <span class="keyword">return</span> d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">gcd</span><span class="params">(LL a, LL b)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> b ? gcd(b, a % b) : a;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        x = y = cnt = <span class="number">0</span>;</span><br><span class="line">        read(a), read(b), read(c);</span><br><span class="line">        LL g = gcd(a, b);</span><br><span class="line">        <span class="keyword">if</span> (c % g) &#123;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        a /= g, b /= g, c /= g;</span><br><span class="line">        exGcd(a, b, x, y);</span><br><span class="line">        x *= c, y *= c;</span><br><span class="line">        xmin = (x &gt; <span class="number">0</span> &amp;&amp; x % b) ? x % b : x % b + b;</span><br><span class="line">        ymax = (c - xmin * a) / b;</span><br><span class="line">        ymin = (y &gt; <span class="number">0</span> &amp;&amp; y % a) ? y % a : y % a + a;</span><br><span class="line">        xmax = (c - ymin * b) / a;</span><br><span class="line">        <span class="keyword">if</span> (xmax &gt; <span class="number">0</span>)   cnt = (xmax - xmin) / b + <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">if</span> (cnt &gt; <span class="number">0</span>)    <span class="built_in">printf</span>(<span class="string">"%lld %lld %lld %lld %lld\n"</span>, cnt, xmin, ymin, xmax, ymax);</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%lld %lld\n"</span>, xmin, ymin);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数学 </category>
          
          <category> 数论 </category>
          
          <category> 最大公约数 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P2801] 教主的魔法</title>
      <link href="/2020/09/06/%E6%B4%9B%E8%B0%B7-P2801-%E6%95%99%E4%B8%BB%E7%9A%84%E9%AD%94%E6%B3%95/"/>
      <url>/2020/09/06/%E6%B4%9B%E8%B0%B7-P2801-%E6%95%99%E4%B8%BB%E7%9A%84%E9%AD%94%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2801" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：写一种数据结构，支持区间修改，查询区间内大于给定数的个数。$1 \le n \le 10^6, 1 \le Q \le 3000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>可以拿线段树维护一下区间最小值，如果当前这个区间的最小值都比查询的数大，那这个区间所有数都比它大，直接返回区间长度就行了。</p><p>然后我就把区间长度写成了 $l - r + 1$，要完。</p><p>还被字符读入坑了一晚上，奉劝各位以后拿 <code>scanf(&quot;%s&quot;, c)</code> 读字符。</p><p>据说这题线段树复杂度是假的，会被特殊数据卡到 TLE。</p><p>可以拿分块过去，但是不想写分块。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">    LL v, tag;</span><br><span class="line">&#125; t[<span class="number">4000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> n, q, L, R, W;</span><br><span class="line"><span class="keyword">char</span> opt;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">rson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushDown</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x].tag) &#123;</span><br><span class="line">        t[lson(x)].tag += t[x].tag, t[rson(x)].tag += t[x].tag;</span><br><span class="line">        t[lson(x)].v += t[x].tag, t[rson(x)].v += t[x].tag;</span><br><span class="line">        t[x].tag = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    t[x].l = l, t[x].r = r;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        read(t[x].v);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    buildTree(lson(x), l, mid), buildTree(rson(x), mid + <span class="number">1</span>, r);</span><br><span class="line">    t[x].v = <span class="built_in">std</span>::min(t[lson(x)].v, t[rson(x)].v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x].l &gt;= l &amp;&amp; t[x].r &lt;= r) &#123;</span><br><span class="line">        t[x].v += d;</span><br><span class="line">        t[x].tag += d;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    pushDown(x);</span><br><span class="line">    <span class="keyword">int</span> mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid)   modify(lson(x), l, r, d);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid)    modify(rson(x), l, r, d);</span><br><span class="line">    t[x].v = <span class="built_in">std</span>::min(t[lson(x)].v, t[rson(x)].v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x].l &gt;= l &amp;&amp; t[x].r &lt;= r &amp;&amp; t[x].v &gt;= d)  <span class="keyword">return</span> t[x].r - t[x].l + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (t[x].l == t[x].r)   <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>, s = <span class="number">0</span>;</span><br><span class="line">    pushDown(x);</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid)   s += query(lson(x), l, r, d);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid)    s += query(rson(x), l, r, d);</span><br><span class="line">    <span class="keyword">return</span> s;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(q);</span><br><span class="line">    buildTree(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">" %c"</span>, &amp;opt);</span><br><span class="line">        read(L), read(R), read(W);</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="string">'M'</span>) &#123;</span><br><span class="line">            modify(<span class="number">1</span>, L, R, W);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(<span class="number">1</span>, L, R, W));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="魔法"><a href="#魔法" class="headerlink" title="魔法"></a>魔法</h3><p>偶然看到了<a href="https://ouuan.github.io/post/n%E6%96%B9%E8%BF%87%E7%99%BE%E4%B8%87-%E6%9A%B4%E5%8A%9B%E7%A2%BE%E6%A0%87%E7%AE%97%E6%8C%87%E4%BB%A4%E9%9B%86%E4%BC%98%E5%8C%96%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8/#%E4%BE%8B%E9%A2%98" target="_blank" rel="noopener">这篇博客</a>。</p><p>草，真的是教 主 的 魔 法。</p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __AVX__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __AVX2__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE2__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE2_MATH__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE3__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE4_1__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE4_2__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSE_MATH__ 1</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> __SSSE3__ 1</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC optimize(<span class="meta-string">"Ofast,no-stack-protector,unroll-loops,fast-math"</span>)</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> GCC target(<span class="meta-string">"sse,sse2,sse3,ssse3,sse4.1,sse4.2,avx,avx2,popcnt,tune=native"</span>)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;immintrin.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;emmintrin.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Magic</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e6</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">__m256i A[maxn &gt;&gt; <span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> *a, aa[<span class="number">8</span>];</span><br><span class="line"><span class="keyword">char</span> op[<span class="number">10</span>];</span><br><span class="line">__m256i x;</span><br><span class="line"><span class="keyword">int</span> n, m, tot, L, R, W;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> ((l &amp; <span class="number">7</span>) &amp;&amp; l &lt; r)    a[l++] += x;</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">while</span> (r &amp; <span class="number">7</span>)   a[--r] += x;</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> ;</span><br><span class="line">    __m256i t = _mm256_set1_epi32(x);</span><br><span class="line">    <span class="keyword">for</span> (l &gt;&gt;=<span class="number">3</span>, r &gt;&gt;=<span class="number">3</span>; l &lt; r; ++l)    A[l] = _mm256_add_epi32(A[l], t);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> out = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((l &amp; <span class="number">7</span>) &amp;&amp; l &lt; r)    out += <span class="keyword">int</span>(a[l++] &gt;= x);</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> out;</span><br><span class="line">    <span class="keyword">while</span> (r &amp; <span class="number">7</span>)   out += <span class="keyword">int</span>(a[--r] &gt;= x);</span><br><span class="line">    <span class="keyword">if</span> (l == r) <span class="keyword">return</span> out;</span><br><span class="line">    __m256i t = _mm256_set1_epi32(<span class="number">1</span>), ans = _mm256_set1_epi32(<span class="number">0</span>), cp = _mm256_set1_epi32(x - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (l &gt;&gt;= <span class="number">3</span>, r &gt;&gt;= <span class="number">3</span>; l &lt; r; ++l)  ans = _mm256_add_epi32(ans, _mm256_and_si256(t, _mm256_cmpgt_epi32(A[l], cp)));</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; ++i) out += (ans[i] &amp; <span class="number">0xffffffff</span>) + (ans[i] &gt;&gt; <span class="number">32</span>);</span><br><span class="line">    <span class="keyword">return</span> out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;n, &amp;m);</span><br><span class="line">    <span class="keyword">while</span> (n) &#123;</span><br><span class="line">        <span class="keyword">if</span> (n &lt; <span class="number">8</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, aa + i);</span><br><span class="line">            n = <span class="number">0</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i) <span class="built_in">scanf</span>(<span class="string">"%d"</span>, aa + i);</span><br><span class="line">            n -= <span class="number">8</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        A[tot++] = _mm256_set_epi32(aa[<span class="number">7</span>], aa[<span class="number">6</span>], aa[<span class="number">5</span>], aa[<span class="number">4</span>], aa[<span class="number">3</span>], aa[<span class="number">2</span>], aa[<span class="number">1</span>], aa[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">    a = (<span class="keyword">int</span> *)&amp;A;</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%s%d%d%d"</span>, op, &amp;L, &amp;R, &amp;W);</span><br><span class="line">        <span class="keyword">if</span> (op[<span class="number">0</span>] == <span class="string">'M'</span>)   modify(L - <span class="number">1</span>, R, W);</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(L - <span class="number">1</span>, R, W));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 线段树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[TJOI2018] 数学计算</title>
      <link href="/2020/09/01/TJOI2018-%E6%95%B0%E5%AD%A6%E8%AE%A1%E7%AE%97/"/>
      <url>/2020/09/01/TJOI2018-%E6%95%B0%E5%AD%A6%E8%AE%A1%E7%AE%97/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2573" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：$t$ 组数据。有一个数 $x$，每次可以乘上 $m$ 或者除以之前某次操作乘上的数，输出每次操作后的 $x \bmod M$。$1 \le t \le 5, 1 \le Q \le 10^5, 1 \le M \le 10^9$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>第一眼是数组模拟，交了一发全 WA 了。</p><p>取模运算是不能乱加除法的，当然如果是数学神仙的话应该可以写个奇怪的东西过去。</p><p>考虑这两个操作，乘上 $m$ 可以看成插入一个数 $m$，除以 $m$ 可以看成把原来 $m$ 的这个位置变成 $1$。</p><p>然后就是一个单点修改，询问区间积的模板。</p><p>线段树一个 zz 错误调了半天，要凉。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">    LL v;</span><br><span class="line">&#125; t[<span class="number">400010</span>];</span><br><span class="line"></span><br><span class="line">LL m[<span class="number">100010</span>];</span><br><span class="line">LL T, Q, mod, op, x;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">rson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    t[x].l = l, t[x].r = r, t[x].v = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    buildTree(lson(x), l, mid), buildTree(rson(x), mid + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, LL v)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x].l == l &amp;&amp; t[x].r == r) &#123;</span><br><span class="line">        t[x].v = v;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    LL mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid)   modify(lson(x), l, r, v);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid)    modify(rson(x), l, r, v);</span><br><span class="line">    t[x].v = ((t[lson(x)].v % mod) * (t[rson(x)].v % mod)) % mod;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(T);</span><br><span class="line">    <span class="keyword">while</span> (T--) &#123;</span><br><span class="line">        read(Q), read(mod);</span><br><span class="line">        buildTree(<span class="number">1</span>, <span class="number">1</span>, Q);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= Q; ++i) &#123;</span><br><span class="line">            read(op), read(m[i]);</span><br><span class="line">            <span class="keyword">if</span> (op == <span class="number">1</span>) &#123;</span><br><span class="line">                modify(<span class="number">1</span>, i, i, m[i]);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                modify(<span class="number">1</span>, m[i], m[i], <span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, t[<span class="number">1</span>].v % mod);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 线段树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TJOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[EZEC-3] 排列</title>
      <link href="/2020/08/26/EZEC-3-%E6%8E%92%E5%88%97/"/>
      <url>/2020/08/26/EZEC-3-%E6%8E%92%E5%88%97/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P6785" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：现有一堆数，从中选取若干个数排成一列，记为 $x_1, x_2, \cdots, x_p$ 且满足 $p \ge 2, y_i = x_{i + 1} - x_i(y_p = x_1 - x_p), y_i = -y_{i + 1}, |y_i| = k$。求 $\sum x_p$ 的最大值。无解输出 <code>NO</code>。$1 \le n \le 10^6, 0 \le k \le 10^6$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>颓废了好几天没写题……<del>于是写了道水题</del>。</p><p>题目看着花里胡哨的，但其实就是让满足最后的序列为 $a, b, a, b, a, b$ 这个样子。</p><p>把每个数存到桶里，枚举一遍，就做完了。</p><p>看到有人说细节很多，感觉也不算多吧……</p><p>$k = 0$ 的时候需要全部数一样，特判一下，枚举的时候判断一下 $i$ 和 $i + k$ 都有就行了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL t[<span class="number">1000010</span>];</span><br><span class="line">LL n, k, a, b, ans = <span class="number">-1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a), read(b), t[a] += b;</span><br><span class="line">    <span class="keyword">if</span> (!k) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">1000000</span>; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (t[i] &gt;= <span class="number">2</span>) &#123;</span><br><span class="line">                ans = <span class="built_in">std</span>::max(ans, t[i] * i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ans == <span class="number">-1</span>)  <span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">1000000</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i + k &lt;= <span class="number">1000000</span> &amp;&amp; t[i] &amp;&amp; t[i + k]) &#123;</span><br><span class="line">            ans = <span class="built_in">std</span>::max(ans, <span class="built_in">std</span>::min(t[i + k], t[i]) * (i + i + k));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ans == <span class="number">-1</span>)  <span class="built_in">puts</span>(<span class="string">"NO"</span>);</span><br><span class="line">    <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EZEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P1768] 天路</title>
      <link href="/2020/08/20/%E6%B4%9B%E8%B0%B7-P1768-%E5%A4%A9%E8%B7%AF/"/>
      <url>/2020/08/20/%E6%B4%9B%E8%B0%B7-P1768-%E5%A4%A9%E8%B7%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1768" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个有向图 $G = (V, E)$，每条边有两个值 $v_i, p_i$，求一个环，使得这条路上的 $\dfrac{\sum v_i}{\sum p_i}$ 最大。$1 \le |V| \le 7000, 1 \le |E| \le 20000, 1 \le v_i, p_i \le 1000$，保证答案在 $200$ 以内。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>写完这道题才知道这个东西叫分数规划…</p><p>我们假设最后的答案为 $x$，则 $\dfrac{\sum v_i}{\sum p_i} \le x$。</p><p>移项可得 $x \sum p_i - \sum v_i \ge 0$。</p><p>显然这个 $x$ 是可以二分的，再加上题目中 $x$ 的范围十分小，我们要找的还是最小的 $x$，基本石锤了。</p><p>考虑 $x$ 不够大时会发生什么，显然这个图里会产生负环，那么每次二分的时候判负环就行了。</p><p>具体做法是将每条边的边权设为 $x’\dfrac{\sum v_i}{\sum p_i}$ 然后跑 SPFA。</p><p>这道题的数据十分迷…据说 DFS 可以过 BFS 过不了，然而这数据又很水，判入队超过 20 次就能过。</p><p>注意实数二分的数据类型。</p><p>其实做完以后发现这个东西挺裸的，像个模板…</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">double</span> eps = <span class="number">1e-2</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, v, p;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Edge&gt; g[<span class="number">7010</span>];</span><br><span class="line"><span class="keyword">double</span> dis[<span class="number">7010</span>];</span><br><span class="line"><span class="keyword">double</span> ans = <span class="number">-1</span>, l = <span class="number">0</span>, r = <span class="number">200</span>;</span><br><span class="line"><span class="keyword">int</span> times[<span class="number">7010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">7010</span>];</span><br><span class="line"><span class="keyword">bool</span> flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">double</span> mid)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x3f3f3f3f</span>, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="built_in">memset</span>(times, <span class="number">0</span>, <span class="keyword">sizeof</span>(times));</span><br><span class="line">    flag = <span class="literal">false</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q;</span><br><span class="line">    q.push(<span class="number">0</span>);</span><br><span class="line">    vis[<span class="number">0</span>] = <span class="literal">true</span>;</span><br><span class="line">    dis[<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!q.empty()) &#123;</span><br><span class="line">        <span class="keyword">int</span> now = q.front();</span><br><span class="line">        q.pop();</span><br><span class="line">        vis[now] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now])&#123;</span><br><span class="line">            <span class="keyword">double</span> w = mid * i.p - i.v;</span><br><span class="line">            <span class="keyword">if</span> (dis[i.to] &gt; dis[now] + w) &#123;</span><br><span class="line">                dis[i.to] = dis[now] + w;</span><br><span class="line">                <span class="keyword">if</span> (!vis[i.to]) &#123;</span><br><span class="line">                    vis[i.to] = <span class="literal">true</span>;</span><br><span class="line">                    <span class="keyword">if</span> (++times[i.to] &gt;= <span class="number">20</span>) &#123;</span><br><span class="line">                        flag = <span class="literal">true</span>;</span><br><span class="line">                        <span class="keyword">return</span> ;</span><br><span class="line">                    &#125;</span><br><span class="line">                    q.push(i.to);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, a, b, v, p; i &lt;= m; ++i) &#123;</span><br><span class="line">        read(a), read(b), read(v), read(p);</span><br><span class="line">        g[a].push_back((Edge)&#123;b, v, p&#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    g[<span class="number">0</span>].push_back((Edge&#123;i, <span class="number">0</span>, <span class="number">0</span>&#125;));</span><br><span class="line">    <span class="keyword">while</span> (r - l &gt;= eps) &#123;</span><br><span class="line">        <span class="keyword">double</span> mid = (l + r) / <span class="number">2</span>;</span><br><span class="line">        spfa(mid);</span><br><span class="line">        <span class="keyword">if</span> (flag)  l = mid, ans = mid;</span><br><span class="line">        <span class="keyword">else</span>    r = mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ans == <span class="number">-1</span>)  <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">    <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%.1lf\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 杂项 </category>
          
          <category> 分数规划 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[国家集训队] Tree I</title>
      <link href="/2020/08/20/%E5%9B%BD%E5%AE%B6%E9%9B%86%E8%AE%AD%E9%98%9F-Tree-I/"/>
      <url>/2020/08/20/%E5%9B%BD%E5%AE%B6%E9%9B%86%E8%AE%AD%E9%98%9F-Tree-I/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2619" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个无向带权连通图 $G = (V, E)$，每条边是黑色或白色，求一颗恰好有 $k$ 条白色边的 MST。$|V| \le 50000, |E| \le 10^5, 1 \le w \le 100$。题目保证有解。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>有一个很显然的做法，对边排序后先选 $k$ 条白色边，剩下的选黑色边。</p><p>但是这个做法是错误的，考虑以下这个图（$k = 1$）：</p><p><img src="https://i.loli.net/2020/08/20/i2s9voQedwMHj35.png" alt="image.png"></p><p>我们发现选白色的边会对选黑色的边的决策有影响，所以这个做法是错误的。</p><p>考虑一个做法：既然我们要求恰好有 $k$ 条白色的边，那就修改白色的边的权值，每次求出修改边权后的 MST，然后判断是不是恰好有 $k$ 条白色的边，如果不是的话就继续修改。</p><p>由于值域十分的小，显然白色的边的边权最多加或减 $100$ 就能找到答案，考虑二分。</p><p>二分的过程很显然了，每次对白边加或减上一个值，然后跑 MST，注意如果两条边的权值相等时要优先选白色的，统计用了多少条白边，最后判断是否满足题意，如果当前白边的条数 $k’ \ge k$ 就更新答案。</p><p>二分的时候记得初始化，每次更新完边界要把边权再减回去。</p><p>这道题的点的序号是从 $0$ 开始的，有些小坑。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v, w;</span><br><span class="line">    <span class="keyword">bool</span> col;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;a, <span class="keyword">const</span> Edge &amp;b) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.w == b.w) <span class="keyword">return</span> a.col &lt; b.col;</span><br><span class="line">        <span class="keyword">return</span> a.w &lt; b.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; a[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> find[<span class="number">50010</span>];</span><br><span class="line"><span class="keyword">int</span> v, e, need, ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> find[x] == x ? x : find[x] = unionFind(find[x]); &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(v), read(e), read(need);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= e; ++i)    read(a[i].u), read(a[i].v), read(a[i].w), read(a[i].col);</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">-100</span>, r = <span class="number">100</span>;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">        <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= e; ++i)</span><br><span class="line">            <span class="keyword">if</span> (!a[i].col)</span><br><span class="line">                a[i].w += mid;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= v; ++i)    find[i] = i;</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>, s = <span class="number">0</span>, cnt = <span class="number">0</span>;</span><br><span class="line">        <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + e + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= e &amp;&amp; cnt &lt; v; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> x = unionFind(a[i].u), y = unionFind(a[i].v);</span><br><span class="line">            <span class="keyword">if</span> (x != y) &#123;</span><br><span class="line">                ++cnt;</span><br><span class="line">                find[x] = y;</span><br><span class="line">                <span class="keyword">if</span> (!a[i].col)  ++s;</span><br><span class="line">                sum += a[i].w;</span><br><span class="line">            &#125;   </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (s &gt;= need) &#123;</span><br><span class="line">            l = mid + <span class="number">1</span>;</span><br><span class="line">            ans = sum - need * mid;</span><br><span class="line">        &#125; <span class="keyword">else</span>  r = mid - <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= e; ++i)</span><br><span class="line">            <span class="keyword">if</span> (!a[i].col)</span><br><span class="line">                a[i].w -= mid;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最小生成树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 国家集训队 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P2370] yyy2015c01 的 U 盘</title>
      <link href="/2020/08/19/%E6%B4%9B%E8%B0%B7-P2370-yyy2015c01-%E7%9A%84-U-%E7%9B%98/"/>
      <url>/2020/08/19/%E6%B4%9B%E8%B0%B7-P2370-yyy2015c01-%E7%9A%84-U-%E7%9B%98/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2370" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：求当选中物品的总价值不小于 $p$ 时，选中物品中最大的体积。无解输出 <code>No Solution!</code>。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>水博客啦~</p><p>先把所有物品按体积排序，然后做 01 背包的时候判断即可。</p><p>时间复杂度 $O(n \log n + nS)$。</p><p>看了眼题解，原来还能二分啊。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    LL w, v;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.w &lt; b.w;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; a[<span class="number">1010</span>];</span><br><span class="line"></span><br><span class="line">LL f[<span class="number">1010</span>];</span><br><span class="line">LL n, p, s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(p), read(s);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i].w), read(a[i].v);</span><br><span class="line">    <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = s; j &gt;= a[i].w; --j) &#123;</span><br><span class="line">            f[j] = <span class="built_in">std</span>::max(f[j], f[j - a[i].w] + a[i].v);</span><br><span class="line">            <span class="keyword">if</span> (f[s] &gt;= p) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, a[i].w);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">"No Solution!"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 背包 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[USACO2.2] Party Lamps</title>
      <link href="/2020/08/19/USACO2-2-Party-Lamps/"/>
      <url>/2020/08/19/USACO2-2-Party-Lamps/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1468" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 盏最初是亮着的灯。有四种操作：改变所有的灯；改变所有奇数号的灯；改变所有偶数号的灯；改变所有序号是 $3k + 1 (k \in \mathbb{N})$ 的灯。已知一些灯在经过 $c$ 次操作后的状态，找出最后所有等灯可能的情况，无解输出 <code>IMPOSSIBLE</code>。$10 \le n \le 100, 0 \le c \le 10^4$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>简单手算几下，发现灯的状态其实是 $6$ 个一循环的，并且所有可能的状态只有 $8$ 种。</p><p>但是当 $c \le 2$ 时，有些状态是无法通过 $1$ 或 $2$ 次操作得到的，需要特判一下。</p><p>然后判断一下哪些状态不合法就完了。</p><p>注意 $c = 0$ 时的情况。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">bool</span> stat[<span class="number">9</span>][<span class="number">7</span>] = &#123;</span><br><span class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>,</span><br><span class="line">    <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> on[<span class="number">110</span>], off[<span class="number">110</span>];</span><br><span class="line"><span class="keyword">int</span> n, c, p = <span class="number">0</span>, q = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">bool</span> b[<span class="number">10</span>];</span><br><span class="line"><span class="keyword">bool</span> flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(b, <span class="literal">true</span>, <span class="keyword">sizeof</span>(b));</span><br><span class="line">    read(n), read(c);</span><br><span class="line">    <span class="keyword">while</span> (on[p] != <span class="number">-1</span>)  read(on[++p]);</span><br><span class="line">    <span class="keyword">while</span> (off[q] != <span class="number">-1</span>)  read(off[++q]);</span><br><span class="line">    --p, --q;</span><br><span class="line">    <span class="keyword">if</span> (!c) &#123;</span><br><span class="line">        <span class="keyword">if</span> (q)  <span class="built_in">puts</span>(<span class="string">"IMPOSSIBLE"</span>);</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    <span class="built_in">printf</span>(<span class="string">"1"</span>, i == n ? <span class="string">"\n"</span> : <span class="string">""</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= p; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> st = on[i] % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">if</span> (st == <span class="number">0</span>)    st = <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">8</span>; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!stat[j][st]) &#123;</span><br><span class="line">                b[j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= q; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> st = off[i] % <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">if</span> (st == <span class="number">0</span>)    st = <span class="number">6</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">8</span>; ++j) &#123;</span><br><span class="line">            <span class="keyword">if</span> (stat[j][st]) &#123;</span><br><span class="line">                b[j] = <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="number">1</span>) b[<span class="number">2</span>] = b[<span class="number">5</span>] = b[<span class="number">7</span>] = b[<span class="number">8</span>] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">if</span> (c == <span class="number">2</span>) b[<span class="number">4</span>] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">8</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b[i]) &#123;</span><br><span class="line">            flag = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!flag) &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"IMPOSSIBLE"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">8</span>; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (b[i]) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d"</span>, stat[i][j % <span class="number">6</span> == <span class="number">0</span> ? <span class="number">6</span> : j % <span class="number">6</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> USACO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2003] 传染病控制</title>
      <link href="/2020/08/18/NOIp2003-%E4%BC%A0%E6%9F%93%E7%97%85%E6%8E%A7%E5%88%B6/"/>
      <url>/2020/08/18/NOIp2003-%E4%BC%A0%E6%9F%93%E7%97%85%E6%8E%A7%E5%88%B6/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1041" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有一种病毒的传播途径是树型的，一个人只能被特定的人传染。每一轮传播周期后可以切断一条传播途径，求出可能的最少的被感染人数。树的大小 $1 \le n \le 300$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>注：此题是错题，没有靠谱的多项式复杂度的算法。</p><blockquote><p>没看到出处时以为是未卜先知，没想到是亡羊补牢。</p></blockquote><p>有一个很显然的贪心，每次只能切断当前这个周期其中的一个路径。</p><p>考虑维护每一层的结点，每次选择一个子结点将它和它的子树打上标记，搜索的时候跳过它。</p><p>这个过程可以用 <code>vector</code> 实现。</p><p>然后就是搜搜搜。既然是错题也没什么深究的必要了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">310</span>], node[<span class="number">310</span>];</span><br><span class="line"><span class="keyword">int</span> dep[<span class="number">310</span>], siz[<span class="number">310</span>], count[<span class="number">310</span>];</span><br><span class="line"><span class="keyword">int</span> n, p, maxDep, ans;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">310</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pre</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    siz[x] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i != p) &#123;</span><br><span class="line">            dep[i] = dep[x] + <span class="number">1</span>;</span><br><span class="line">            maxDep = <span class="built_in">std</span>::max(maxDep, dep[i]);</span><br><span class="line">            pre(i, x);</span><br><span class="line">            siz[x] += siz[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mark</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    vis[x] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dep[i] &gt; dep[x]) &#123;</span><br><span class="line">            mark(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">remark</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    vis[x] = <span class="literal">false</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[x]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (dep[i] &gt; dep[x]) &#123;</span><br><span class="line">            remark(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    ans = <span class="built_in">std</span>::max(ans, s);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : node[now]) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">auto</span> j : g[i]) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!vis[j] &amp;&amp; dep[j] &gt; dep[i]) &#123;</span><br><span class="line">                mark(j);</span><br><span class="line">                dfs(now + <span class="number">1</span>, s + siz[j]);</span><br><span class="line">                remark(j);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(p);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt;= p; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v), g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dep[<span class="number">1</span>] = <span class="number">1</span>;</span><br><span class="line">    pre(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    node[dep[i]].push_back(i);</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, n - ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 搜索 </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOI1999] 生日蛋糕</title>
      <link href="/2020/08/17/NOI1999-%E7%94%9F%E6%97%A5%E8%9B%8B%E7%B3%95/"/>
      <url>/2020/08/17/NOI1999-%E7%94%9F%E6%97%A5%E8%9B%8B%E7%B3%95/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1731" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：制作一个体积为 $N \pi$ 的 $M$ 层生日蛋糕，每层都是一个圆柱体。设从下往上数第 $i(1 \le i \le M)$ 层蛋糕是半径为 $R_i$，高度为 $H_i$ 的圆柱。当 $i &lt; M$ 时，要求 $R_i &gt; R_{i + 1}$ 且 $H_i &gt; H_{i + 1}$，找出一种制作方案使得外表面面积 $Q$ 最小，输出 $\dfrac{Q}{\pi}$。$N \le 2 \times 10^4, M \le 15$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>朴素的暴力在 $2 \times 10^4$ 面前会被吊起来打。</p><p>由于 $H_i &gt; 1$，又因为 $H_i &gt; H_{i + 1}$，所以第 $i$ 层的高度至少为 $i$。半径同理。</p><p>我们还可以这样推算出每一层的最小体积和最小表面积。</p><p>接下来就有很显然的剪枝方法：如果当前的表面积加上还没搜的最小表面积依然大于当前的最优解就直接退出。体积同理。</p><p>这样我们已经可以拿到很多分数了，但是离 AC 还差一点。</p><p>考虑几个公式：$V = \pi r^2 \times H, S = 2 \pi r \times H$。</p><p>将体积公式同时除以 $r$，不难得出这个式子：$\dfrac{2V}{r} = S$。</p><p>所以我们可以得出第三个剪枝方法：如果当前的表面积加上还没搜的体积除以半径大于当前的最优解就直接退出。</p><p>然后就可以 AC 了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">30</span>], b[<span class="number">30</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, ans = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> lstr, <span class="keyword">int</span> lsth, <span class="keyword">int</span> v, <span class="keyword">int</span> s)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!now) &#123;</span><br><span class="line">        <span class="keyword">if</span> (v == n) &#123;</span><br><span class="line">            ans = <span class="built_in">std</span>::min(ans, s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (s + (n - v) / lstr * <span class="number">2</span> &gt; ans)   <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">if</span> (s + b[now] &gt; ans)   <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">if</span> (v + a[now] &gt; n) <span class="keyword">return</span> ;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = lstr - <span class="number">1</span>; i &gt;= now; --i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (now == m)   s = i * i;   </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = lsth - <span class="number">1</span>; j &gt;= now; --j) &#123;</span><br><span class="line">            dfs(now - <span class="number">1</span>, i, j, v + i * i * j, s + <span class="number">2</span> * i * j);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        a[i] = a[i - <span class="number">1</span>] + i * i * i;</span><br><span class="line">        b[i] = b[i - <span class="number">1</span>] + <span class="number">2</span> * i * i;</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(m, <span class="built_in">sqrt</span>(n), n, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans == <span class="number">0x3f3f3f3f</span> ? <span class="number">-1</span> : ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>没想到结局是这个样子。</p><p>一切都在朝着错误的方向前进，我却依旧什么都做不到。</p><p>自己也终于走上了这条道路吗。</p><p>两年的时间，我不想再辜负别人的期望了。</p><p><meting-js    id="591797"    server="netease"    type="song"><br></meting-js></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 搜索 </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1399E1] Weights Division (easy version)</title>
      <link href="/2020/08/07/CF1399E1-Weights-Division-easy-version/"/>
      <url>/2020/08/07/CF1399E1-Weights-Division-easy-version/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/1399/E1" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个有 $n$ 个节点的有根树，每次操作可以选定一条边，使它的边权变为原来的一半，求最少的操作次数使得 $\sum \limits_{v \in leaves} w(root, v) \le S$，其中 $w(i, j)$ 表示 $i, j$ 两点间的距离。$2 \le n \le 10^5, 1 \le S \le 10^{16}$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>可能第一时间想到的贪心思路是从上往下删，但是这样的反例十分显然：下面边权比上面边权大很多就凉了。</p><p>然后我们可能会想到一个蛮正确的贪心思路：优先选边权乘以出现次数大的边。</p><p>考虑用堆来维护，排序的依据应该是边权对总和的影响乘以边出现的次数。</p><p>剩下就是一些常规套路了，什么求经过这条边的叶子个数什么的。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> to;</span><br><span class="line">    LL w, cnt;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;a, <span class="keyword">const</span> Edge &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> (a.w - a.w / <span class="number">2</span>) * a.cnt &lt; (b.w - b.w / <span class="number">2</span>) * b.cnt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::priority_queue&lt;Edge&gt; q;</span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;Edge&gt; g[<span class="number">200010</span>];</span><br><span class="line">LL s, sum, ans;</span><br><span class="line"><span class="keyword">int</span> siz[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">int</span> t, n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::fill(siz + <span class="number">1</span>, siz + n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span> (!q.empty())  q.pop();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    g[i].clear();</span><br><span class="line">    ans = sum = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> lst)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (g[now].size() == <span class="number">1</span> &amp;&amp; now != <span class="number">1</span>) &#123;</span><br><span class="line">        siz[now] = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i.to != lst) &#123;</span><br><span class="line">            dfs(i.to, now);</span><br><span class="line">            siz[now] += siz[i.to];</span><br><span class="line">            i.cnt = siz[i.to];</span><br><span class="line">            q.push(i);</span><br><span class="line">            sum += i.cnt * i.w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        read(n), read(s);</span><br><span class="line">        init();</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> u, v, w, i = <span class="number">1</span>; i &lt; n; ++i) &#123;</span><br><span class="line">            read(u), read(v), read(w);</span><br><span class="line">            g[u].push_back((Edge)&#123;v, w, <span class="number">0</span>&#125;);</span><br><span class="line">            g[v].push_back((Edge)&#123;u, w, <span class="number">0</span>&#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="keyword">while</span> (sum &gt; s) &#123;</span><br><span class="line">            ++ans;</span><br><span class="line">            Edge tmp = q.top();</span><br><span class="line">            q.pop();</span><br><span class="line">            sum -= (tmp.w - tmp.w / <span class="number">2</span>) * tmp.cnt;</span><br><span class="line">            tmp.w /= <span class="number">2</span>;</span><br><span class="line">            q.push(tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1399D] Binary String To Subsequences</title>
      <link href="/2020/08/06/CF1399D-Binary-String-To-Subsequences/"/>
      <url>/2020/08/06/CF1399D-Binary-String-To-Subsequences/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/contest/1399/problem/D" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出长度为 $n$ 的 $01$ 字符串 $s$，要求将其划分成个数最少的子序列使得每个子序列中相同的数不相邻，如 $101010$。输出个数最少的一种划分方案。$1 \le n \le 2 \cdot 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>感谢 woshiluo 神仙（</p><p>划分的方法其实是很显然的，主要是怎么实现。</p><p>考虑构造两个队列，分别存当前以 $1$ 结尾和以 $0$ 结尾的子序列的编号。</p><p>然后我相信大家都会做了。剩下的就是按照题意模拟了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> ans[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">char</span> a[<span class="number">200010</span>];</span><br><span class="line"><span class="keyword">int</span> t, n, s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        read(n);</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; q0, q1;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; a + <span class="number">1</span>;</span><br><span class="line">        s = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">if</span> (a[i] == <span class="string">'0'</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (q1.empty()) &#123;</span><br><span class="line">                    q0.push(++s);</span><br><span class="line">                    ans[i] = s;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ans[i] = q1.front();</span><br><span class="line">                    q0.push(q1.front());</span><br><span class="line">                    q1.pop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (q0.empty()) &#123;</span><br><span class="line">                    q1.push(++s);</span><br><span class="line">                    ans[i] = s;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    ans[i] = q0.front();</span><br><span class="line">                    q1.push(q0.front());</span><br><span class="line">                    q0.pop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, s);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    <span class="built_in">printf</span>(<span class="string">"%d "</span>, ans[i]);</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 队列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF52C] Circular RMQ</title>
      <link href="/2020/08/04/CF52C-Circular-RMQ/"/>
      <url>/2020/08/04/CF52C-Circular-RMQ/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://codeforces.com/problemset/problem/52/C" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个长度为 $n$ 的环形数列，有 $m$ 次操作，要求支持区间加，求区间最小值。$1 \le n \le 2 \cdot 10^5, |a_i, v| \le 10^6, 0 \le m \le 2 \cdot 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>对于正常的 $l \le r$，直接修改区间 $[l, r]$ 即可。</p><p>对于 $r &gt; l$，需要修改区间 $[l, n]$ 和 $[1, r]$。</p><p>查询同理。</p><p>顺便学习了一下永久性标记的用法，注意到标记其实是不会溢出的，那么就可以不下传标记，在询问的时候把标记对答案的影响加到答案中即可。</p><p>另外对于这个毒瘤输入强烈鄙视。</p><p>注意开 <code>long long</code>。</p><p>至于为什么会来写这种题，大概是因为在主页看到了好几个这道题的求助吧。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">    LL tag, v;</span><br><span class="line">&#125; t[<span class="number">800010</span>];</span><br><span class="line"></span><br><span class="line">LL a[<span class="number">200010</span>];</span><br><span class="line">LL tmp;</span><br><span class="line"><span class="keyword">int</span> n, m, lf, rg;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">rson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    t[x].l = l, t[x].r = r;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        t[x].v = a[l];</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    buildTree(lson(x), l, mid), buildTree(rson(x), mid + <span class="number">1</span>, r);</span><br><span class="line">    t[x].v = <span class="built_in">std</span>::min(t[lson(x)].v, t[rson(x)].v);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r, LL d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= t[x].l &amp;&amp; r &gt;= t[x].r) &#123;</span><br><span class="line">        t[x].tag += d;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid)  modify(lson(x), l, r, d);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid)   modify(rson(x), l, r, d);</span><br><span class="line">    t[x].v = <span class="built_in">std</span>::min(t[lson(x)].v + t[lson(x)].tag, t[rson(x)].v + t[rson(x)].tag);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= t[x].l &amp;&amp; r &gt;= t[x].r) <span class="keyword">return</span> t[x].v + t[x].tag;</span><br><span class="line">    <span class="keyword">int</span> mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    LL s = <span class="number">1145141919810</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid)  s = <span class="built_in">std</span>::min(s, query(lson(x), l, r));</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid)   s = <span class="built_in">std</span>::min(s, query(rson(x), l, r));</span><br><span class="line">    <span class="keyword">return</span> s + t[x].tag;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    buildTree(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    read(m);</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;lf, &amp;rg);</span><br><span class="line">        ++lf, ++rg;</span><br><span class="line">        <span class="keyword">if</span> (getchar() == <span class="string">'\n'</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (lf &lt;= rg)   <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, query(<span class="number">1</span>, lf, rg));</span><br><span class="line">            <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, <span class="built_in">std</span>::min(query(<span class="number">1</span>, <span class="number">1</span>, rg), query(<span class="number">1</span>, lf, n)));</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%lld"</span>, &amp;tmp);</span><br><span class="line">            <span class="keyword">if</span> (lf &lt;= rg)   modify(<span class="number">1</span>, lf, rg, tmp);</span><br><span class="line">            <span class="keyword">else</span> modify(<span class="number">1</span>, <span class="number">1</span>, rg, tmp), modify(<span class="number">1</span>, lf, n, tmp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 线段树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2012] 借教室</title>
      <link href="/2020/08/02/NOIp2012-%E5%80%9F%E6%95%99%E5%AE%A4/"/>
      <url>/2020/08/02/NOIp2012-%E5%80%9F%E6%95%99%E5%AE%A4/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2606" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 天，每天有 $r_i$ 个可以借出去的教室。有 $m$ 份订单借教室，每份订单从第 $s_i$ 天到第 $t_i$ 天借 $d_i$ 个教室，按照订单的先后顺序分配教室，判断是否会有订单无法完全满足。$1 \le n, m \le 10^6, 0 \le r_i, d_i \le 10^9, 1 \le s_i \le t_i \le n$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>显然这道题会用到差分。</p><p>题目让求出最早一个不能满足的订单，显然可以二分。</p><p>然后这道题就做完了。</p><p>我的代码求的是最后一个可以满足的订单，所以要加 $1$ 才是正确答案。</p><p>时间复杂度 $O(n \log m)$。</p><p>当然还有别的做法，比如线段树维护区间最小值之类的。</p><p>另外还有一个 $O(n + m)$ 的做法，先假设所有订单都满足，然后一天天枚举，如果有一天不符合就从后往前撤掉订单，最后一个撤掉的即为答案。</p><p>（羡慕提高 Day2 T2 是这种题的日子……）</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> r[<span class="number">1000010</span>], d[<span class="number">1000010</span>], s[<span class="number">1000010</span>], t[<span class="number">1000010</span>], diff[<span class="number">1000010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::fill(diff + <span class="number">1</span>, diff + n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= p; ++i) &#123;</span><br><span class="line">    diff[s[i]] += d[i];</span><br><span class="line">    diff[t[i] + <span class="number">1</span>] -= d[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    diff[i] += diff[i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (diff[i] &gt; r[i])<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)read(r[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)read(d[i]), read(s[i]), read(t[i]);</span><br><span class="line">    <span class="keyword">int</span> l = <span class="number">1</span>, r = m;</span><br><span class="line">    <span class="keyword">while</span> (l &lt;= r) &#123;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (check(mid))l = mid + <span class="number">1</span>, ans = mid;</span><br><span class="line">    <span class="keyword">else</span>r = mid - <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (ans == m)<span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line">    <span class="keyword">else</span><span class="built_in">printf</span>(<span class="string">"-1\n%d\n"</span>, ans + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 二分 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中考完的一些想法</title>
      <link href="/2020/07/30/%E4%B8%AD%E8%80%83%E5%AE%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/"/>
      <url>/2020/07/30/%E4%B8%AD%E8%80%83%E5%AE%8C%E7%9A%84%E4%B8%80%E4%BA%9B%E6%83%B3%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p><meting-js    id="28754448"    server="netease"    type="song"><br></meting-js></p><p>虽然结果不算很好，但也算没有啥后悔的吧。</p><a id="more"></a><p>最后还是留在了八一……看到身边朋友都理所应当的去了一中，心中有点奇怪的感觉。</p><p>学校的几次 OI 课去上了……感觉挺轻松的（？），基本上每次小测都能 AK（这种知识点不 AK 才有问题吧）。</p><p>虽然还是有神仙贪心不会做（瞬间打脸）。</p><p>希望可以改变这所学校在 OI 上的劣势，毕竟某公众号上”其他学校水平太低，参与热情不高“实在是有点过了吧？</p><p>如果在役时可以让新疆进行省选就好了，可能离所谓的强省还有很大的差距，但是我相信会有改变的那一天的。</p><p>前几天 CCF 建议我省省队参加线上赛……不知道该说什么，就像知乎上评论的那样，如果新疆是每年稳定提供国集的省份就应该不会是这样的解决方案吧。</p><p>现在的我还是太弱了，什么也做不到……</p><p>打了几次 CF，感觉自己还是挺菜的，配不上 Expert 这个名字。</p><p>莫名其妙的又来了疫情……具体并不是很想谈论，希望它赶紧过去吧，我已经恰了一周泡面了（哭）。</p><p>报了某机构的线上课，果然是被内地神仙吊打，一句“立方展开不是初中内容吗？“给我整傻了。</p><p>毕业典礼结束后学校还上了十几天的课，原本以为是预科，没想到是偏竞赛的。</p><p>那几天觉得学校十分投机，趁着强基来搞这个。但是现在看来好像并不是……我省现在还在用老教材，这次理科二卷最后一道题是某书原题，还是个不等式，普通高中生没学过估计是直接懵逼了吧。</p><p>这十几天还讲了一点不等式，均值和柯西算是把公式给了，题目一道都不会做。</p><p>还好必修一课内内容好像不算很难……试着向学校争取一下多放点精力在 OI 上吧。</p><p>本来还想着去一中参观一下，结果也没戏了。</p><p>除了 OI 以外其实也挺想学学 MO 的，但是这个线上课感觉掌握程度物理 &gt; 化学 &gt; 数学，正好和我自己想的完全相反。</p><p>不过毕竟还没上完，可能上完以后又不一样了吧。</p><p>情感方面，现在决定了保送了就谈恋爱，众所周知我在各方面都不可能保送，得出结论不谈恋爱。</p><p>而且我这个性格也不适合，再加上可能有些人格障碍的倾向……（？）</p><p>这个暑假准备把 The Division 打完，AC:U 打完，打一打 MC，看点番，推下脏翅膀（你推了几年了！），然后随便学点东西吧。</p><p>（强烈推荐悠久之翼，关弹幕保智商）</p><p>说起来今年西电啥时候请客旅游啊？（逃）</p><p>现在心理状况比之前好了一些，至少不会动不动做一些很…的事情了，认识了一些很好的人们，不然的话不知道我还能不能敲下这些文字。</p><p>等到暑假过完，就要开始学习了吧……初中生活实在是太失败，也懂了很多，自己只不过是历史车轮下一个微不足道的普通人，没有什么过人的天赋，只希望自己能够”从平凡中闪耀出伟大“吧。</p><p>一直喜欢这样的故事：未来不可逆转的朝着崩坏的那一端前进，人们依然努力想要改变。这样的故事总是给我一种悲壮的感觉。可能这也是我比较喜欢脏翅膀的原因吧。当下的美好和繁华只不过是表面，明知可能不久就要离开，还选择尽可能的创造一些微小的美丽。</p><p>悠久之翼的最后也提到了，不要回首之前的事情，抓住当下，或许我们创造的一切事物不过是镜花水月，但也是我们曾珍惜过的，用心了的。久濑说他从来不参加没有胜算的游戏，因此活的那样扭曲，其实只要努力过，最终的结果可能真的没有那么重要吧。</p><p>当然也只不过是嘴上说说而已。</p><p>看完悠久之翼以后就想要成为优子那样的天使，虽然可能只不过是梦想了……</p><p>雨宫优子也是我唯一一个更喜欢百度百科的词条，这里贴上<a href="https://baike.baidu.com/item/%E9%9B%A8%E5%AE%AB%E4%BC%98%E5%AD%90" target="_blank" rel="noopener">链接</a>。</p><p>就写到这里吧，天已经完全亮了，又是一晚没有睡觉。</p>]]></content>
      
      
      <categories>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P4145] 上帝造题的七分钟2 / 花神游历各国</title>
      <link href="/2020/07/30/%E6%B4%9B%E8%B0%B7-P4145-%E4%B8%8A%E5%B8%9D%E9%80%A0%E9%A2%98%E7%9A%84%E4%B8%83%E5%88%86%E9%92%9F2-%E8%8A%B1%E7%A5%9E%E6%B8%B8%E5%8E%86%E5%90%84%E5%9B%BD/"/>
      <url>/2020/07/30/%E6%B4%9B%E8%B0%B7-P4145-%E4%B8%8A%E5%B8%9D%E9%80%A0%E9%A2%98%E7%9A%84%E4%B8%83%E5%88%86%E9%92%9F2-%E8%8A%B1%E7%A5%9E%E6%B8%B8%E5%8E%86%E5%90%84%E5%9B%BD/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P4145" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给定长度为 $n$ 的序列和 $m$ 次操作，要求支持区间开方，区间求和。$1 \le n, m \le 10^5$，序列中的数 $0 &lt; a_i \le 10^{12}$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>每次听数据结构都要把这道题拿出来说……</p><p>考虑区间开方：至少在我的认知范围内，没有比暴力更优的做法。</p><p>注意到开方其实是会让一个数急剧缩小的，$10^{12}$ 只需要开 $6$ 次平方就可以变成 $1$，然后再对 $1$ 开方就没有什么用了。</p><p>所以我们可以暴力开方，如果一段区间内的所有数都是 $1$ 就直接不管他。</p><p>实现的话可以维护一个最大值，如果区间最大值是 $1$ 就不继续修改。</p><p>注意开 <code>long long</code>，然后是喜闻乐见的特判 $l &gt; r$。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    LL v, maxv;</span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">&#125; t[<span class="number">400010</span>];</span><br><span class="line"></span><br><span class="line">LL a[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span>; &#125;</span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">rson</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &lt;&lt; <span class="number">1</span> | <span class="number">1</span>; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pushUp</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    t[x].v = t[lson(x)].v + t[rson(x)].v;</span><br><span class="line">    t[x].maxv = <span class="built_in">std</span>::max(t[lson(x)].maxv, t[rson(x)].maxv);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">buildTree</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    t[x].l = l, t[x].r = r;</span><br><span class="line">    <span class="keyword">if</span> (l == r) &#123;</span><br><span class="line">        t[x].v = t[x].maxv = a[l];</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (l + r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    buildTree(lson(x), l, mid), buildTree(rson(x), mid + <span class="number">1</span>, r);</span><br><span class="line">    pushUp(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">modify</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (t[x].l == t[x].r) &#123;</span><br><span class="line">        t[x].v = <span class="built_in">sqrt</span>(t[x].v);</span><br><span class="line">        t[x].maxv = <span class="built_in">sqrt</span>(t[x].maxv);</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid &amp;&amp; t[lson(x)].maxv &gt; <span class="number">1</span>)    modify(lson(x), l, r);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid &amp;&amp; t[rson(x)].maxv &gt; <span class="number">1</span>)     modify(rson(x), l, r);</span><br><span class="line">    pushUp(x);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= t[x].l &amp;&amp; r &gt;= t[x].r) <span class="keyword">return</span> t[x].v;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> mid = (t[x].l + t[x].r) &gt;&gt; <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (l &lt;= mid)   s += query(lson(x), l, r);</span><br><span class="line">    <span class="keyword">if</span> (r &gt; mid)    s += query(rson(x), l, r);</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    buildTree(<span class="number">1</span>, <span class="number">1</span>, n);</span><br><span class="line">    read(m);</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        <span class="keyword">int</span> k, l, r;</span><br><span class="line">        read(k), read(l), read(r);</span><br><span class="line">        <span class="keyword">if</span> (l &gt; r)  <span class="built_in">std</span>::swap(l, r);</span><br><span class="line">        <span class="keyword">if</span> (!k) modify(<span class="number">1</span>, l, r);</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, query(<span class="number">1</span>, l, r));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 线段树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CSP2019] 网格图</title>
      <link href="/2020/07/29/CSP2019-%E7%BD%91%E6%A0%BC%E5%9B%BE/"/>
      <url>/2020/07/29/CSP2019-%E7%BD%91%E6%A0%BC%E5%9B%BE/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P5687" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给定一个 $n \times m$ 的网格图，点 $(i, j)$ 与 $(i, j + 1)$ 间有一条权值为 $a_i$ 的边，点 $(i, j)$ 与 $(i + 1, j)$ 间有一条权值为 $b_j$ 的边，求出这个网格图的最小生成树。$3 \le n, m \le 3 \times 10^5, 1 \le a_i, b_j \le 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>暴力做法直接 Kruskal 即可。</p><p>考虑 Kruskal 的过程：找出没被取过的最小的边加入，并且加入后不成环。</p><p>这道题目每一行和每一列的值是相同的，所以可以一行或者一列的来讨论。显然边在一整行一整列的加入时是最优的。</p><p>接下来考虑怎么才能不形成环。</p><p>最小的行和最小的列显然不形成环，所以全部加上。</p><p>设现在已经取了 $r$ 行 $c$ 列。</p><p>对于一条将要被加入的行，已经有 $c$ 个点在生成树中，要连的边的总数即为 $m - c$，否则就会与已经连的边形成环。</p><p>注意开 <code>long long</code>。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL ans;</span><br><span class="line">LL a[<span class="number">300010</span>], b[<span class="number">300010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, r, c, x, y;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)    read(b[i]);</span><br><span class="line">    <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">std</span>::sort(b + <span class="number">1</span>, b + m + <span class="number">1</span>);</span><br><span class="line">    ans = a[<span class="number">1</span>] * (m - <span class="number">1</span>) + b[<span class="number">1</span>] * (n - <span class="number">1</span>);</span><br><span class="line">    r = <span class="number">1</span>, c = <span class="number">1</span>, x = <span class="number">2</span>, y = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &lt;= n &amp;&amp; y &lt;= m) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a[x] &lt;= b[y])   ans += a[x++] * (m - c), ++r;</span><br><span class="line">        <span class="keyword">else</span>    ans += b[y++] * (n - r), ++c;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最小生成树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2006] 能量项链</title>
      <link href="/2020/07/25/NOIp2006-%E8%83%BD%E9%87%8F%E9%A1%B9%E9%93%BE/"/>
      <url>/2020/07/25/NOIp2006-%E8%83%BD%E9%87%8F%E9%A1%B9%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/10148" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个长度为 $n$ 的首尾相接的序列，每个元素有两个值 $l_i, r_i$，且 $r_i = l_{i + 1}, r_{n} = l_{1}$。任意两个元素可以合并成一个元素并获得 $l_i \times r_i \times r_{i + 1}$ 的价值，求将整个序列合并的最大价值。$4 \le n \le 100$，保证结果在 <code>int</code> 范围内。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先套路处理环。</p><p>设 $f(i, j)$ 为从 $i$ 合并到 $j$ 的最大价值，转移很显然：$f_{i, j} = \max(f_{i, k} + f_{k + 1, j} + l_i \times r_k \times r_j)(k \in [i, j))$。</p><p>最终答案为 $\max(f_{i, i + n - 1})(1 \le i \le n)$。</p><p>注意控制下边界，不过都是套路了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> l, r;</span><br><span class="line">&#125; a[<span class="number">210</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">210</span>][<span class="number">210</span>];</span><br><span class="line"><span class="keyword">int</span> n, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i].l), a[i + n].l = a[i].l;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n + n; ++i) a[i].r = a[i + <span class="number">1</span>].l;</span><br><span class="line">    a[n].r = a[<span class="number">1</span>].l;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">2</span>; l &lt;= n; ++l) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n + n &amp;&amp; i + l - <span class="number">1</span> &lt;= n + n; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = i + l - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = i; k &lt; j; ++k) &#123;</span><br><span class="line">                f[i][j] = <span class="built_in">std</span>::max(f[i][j], f[i][k] + f[k + <span class="number">1</span>][j] + a[i].l * a[k].r * a[j].r);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    ans = <span class="built_in">std</span>::max(ans, f[i][i + n - <span class="number">1</span>]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 区间 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ABC079D] Wall</title>
      <link href="/2020/07/08/ABC079D-Wall/"/>
      <url>/2020/07/08/ABC079D-Wall/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://atcoder.jp/contests/abc079/tasks/abc079_d?lang=en" target="_blank" rel="noopener">题目链接</a>   </p><p>题目大意：把数字 $i$ 变成 $j$ 需要 $c_{i, j}$ 花费，现在要将 $H \cdot W$ 个数字变为 $1$，求最小花费。$1 \le H, W \le 200, 1 \le c_{i, j} \le 10^3$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>（沉迷水题无法自拔…）</p><p>显然对给出的 $c$ 矩阵做最短路即可，直接 Floyd。</p><p>这题的 $H, W$ 完全能给成 $H \cdot W \le 10^7$ 的说…</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> c[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> h, w, ans, a;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(h), read(w);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">9</span>; ++j)</span><br><span class="line">            read(c[i][j]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt;= <span class="number">9</span>; ++k)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">9</span>; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt;= <span class="number">9</span>; ++j)</span><br><span class="line">                c[i][j] = <span class="built_in">std</span>::min(c[i][j], c[i][k] + c[k][j]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= h; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= w; ++j)</span><br><span class="line">            read(a), ans += a == <span class="number">-1</span> ? <span class="number">0</span> : c[a][<span class="number">1</span>];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最短路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AtCoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2012] 国王游戏</title>
      <link href="/2020/07/06/NOIp2012-%E5%9B%BD%E7%8E%8B%E6%B8%B8%E6%88%8F/"/>
      <url>/2020/07/06/NOIp2012-%E5%9B%BD%E7%8E%8B%E6%B8%B8%E6%88%8F/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2603" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：国王要给 $n$ 个大臣发金币。国王和每个大臣都在左手上写一个数字 $a$，右手上写一个数字 $b$，每个大臣得到的金币是他左手边所有人左手上数字的乘积除以这个大臣右手上的数字（向下取整），要求获得金币最多的大臣得到的金币最少。$1 \le n \le 10^3, 0 &lt; a, b &lt; 10^4$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>现在任取两位相邻的大臣，设他们左手上的数字为 $a_1, a_2$，右手上的数字为 $b_1, b_2$。</p><p>设这两位大臣左边的所有大臣（包括国王）左手上的数的乘积为 $A$。</p><p>如果 $1$ 号大臣排在前面，答案为 $\max(\dfrac{A}{b_1}, \dfrac{A \cdot a_1}{b_2})$。</p><p>如果 $2$ 号大臣排在前面，答案为 $\max(\dfrac{A}{b_2}, \dfrac{A \cdot a_2}{b_1})$。</p><p>设 $m = \dfrac{A}{b_1}, n = \dfrac{A \cdot a_1}{b_2}, p = \dfrac{A}{b_2}, q = \dfrac{A \cdot a_2}{b_1}$。</p><p>显然有 $q &gt; m, n &gt; p$。</p><p>假设 $1$ 号大臣排在前面时答案更小，那么可以判断出 $n &lt; q$。</p><p>即 $\dfrac{A \cdot a_1}{b_2} &lt; \dfrac{A \cdot a_2}{b_1}$。</p><p>化简可得 $a_1 \cdot b_1 &lt; a_2 \cdot b_2$。</p><p>所以要按 $a_i \cdot b_i$ 升序排序。</p><p>这道题要写高精度，我放弃了，明 天 一 定。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>平面几何里一些不会做的题</title>
      <link href="/2020/07/05/%E5%B9%B3%E9%9D%A2%E5%87%A0%E4%BD%95%E9%87%8C%E4%B8%80%E4%BA%9B%E4%B8%8D%E4%BC%9A%E5%81%9A%E7%9A%84%E9%A2%98/"/>
      <url>/2020/07/05/%E5%B9%B3%E9%9D%A2%E5%87%A0%E4%BD%95%E9%87%8C%E4%B8%80%E4%BA%9B%E4%B8%8D%E4%BC%9A%E5%81%9A%E7%9A%84%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>一些我太菜导致不能一眼出答案的平面几何，记录一下。</p><a id="more"></a><h3 id="题-1"><a href="#题-1" class="headerlink" title="题 1"></a>题 1</h3><p>已知直线 $l$ 切 $\triangle ABC$ 外接圆于点 $C$，$AD \perp BC$ 于点 $D$，$BE \perp AC$ 于点 $E$，$EG \perp l$ 于点 $G$，$DF \perp l$ 于点 $F$。求证：$EG = DF$。</p><p><img src="https://i.loli.net/2020/07/05/516WB42yXCmjvli.png" alt="image.png"></p><p>已有一组对边平行，考虑证四边形 $EDFG$ 是平行四边形。</p><p>证明：连接 $DE$。</p><p>由 $AD \perp BC, BE \perp AC$ 得 $A, B, D, E$ 四点共圆。</p><p>则 $\angle CDE = \angle BAC = \angle DCF$。</p><p>则 $DE // FG$，又因为 $EG // DF$，则四边形 $EDFG$ 是矩形，即 $EG = DF$。</p><h3 id="题-2（切线定理）"><a href="#题-2（切线定理）" class="headerlink" title="题 2（切线定理）"></a>题 2（切线定理）</h3><p>如图，在 $\triangle ABC$ 中，已知 $AD \perp BC, BE \perp CA$，$AD$ 与 $BE$ 相交于点 $H$，$P$ 为边 $AB$ 的中点，过点 $C$ 作 $CQ \perp PH$，垂足为 $Q$。求证：$PE^2 = PH \cdot PQ$。</p><p><img src="https://i.loli.net/2020/07/05/863Xz5Ci2rEeAWT.png" alt="image.png"></p><p>考虑使用切线定理。</p><p>证明：</p><p>由 $AD \perp BC, BE \perp CA$，得 $E, H, D, C$，$A, E, D, B$ 是两组四点共圆。</p><p>又因为 $CQ \perp PH$，则 $E, H, D, C, Q$ 五点共圆，设圆心为 $O$，则只需证 $PE$ 是圆 $O$ 切线。</p><p>（并没有找到圆的那个符号该怎么打…如果您找到了欢迎您告诉我…）</p><p>连接 $DE$，由 $P$ 是 $AB$ 中点可得 $\angle PEB = \angle PBE = \angle EDH$。</p><p>则 $PE$ 是圆 $O$ 切线，即 $PE^2 = PH \cdot PQ$。</p><h3 id="题-3（圆，三角形）"><a href="#题-3（圆，三角形）" class="headerlink" title="题 3（圆，三角形）"></a>题 3（圆，三角形）</h3><p>如图，$\triangle ABC$ 的内切圆分别切 $AB, AC$ 于点 $E, F$，$D$ 是 $BC$ 的中点，$\angle B, \angle C$ 的平分线分别与直线 $EF$ 交于点 $N, M$。证明：$DM = DN$。</p><p><img src="https://i.loli.net/2020/07/05/o53CEl7WbPtUkM6.png" alt="image.png"></p><p>考虑证 $B, M, N, C$ 四点共圆且 $BC$ 为直径。</p><p>证明：</p><p>由题得 $AE = AF$，则 $\angle AEF = \angle AFE = \dfrac{\pi - \angle A}{2}$。</p><p>由 $I$ 是 $\triangle ABC$ 内心得 $\angle BIC = \dfrac{\pi + \angle A}{2}$。</p><p>则 $\angle MIB = \pi - \angle BIC = \dfrac{\pi - \angle A}{2} = \angle AEF$。</p><p>则 $E, M, I, B$ 四点共圆，同理得 $F, N, I, C$ 四点共圆。</p><p>则 $\angle BMI = \angle BEI = 90^\circ$，同理得 $\angle BNC = 90^\circ$，即 $B, M, N, C$ 四点共圆且 $BC$ 为直径。</p><p>由 $D$ 是 $BC$ 中点，得 $DM = DN$。</p><p>（注：这个图画的并不规范，$D$ 不一定在圆 $I$ 上）</p><h3 id="题-4（割线定理）"><a href="#题-4（割线定理）" class="headerlink" title="题 4（割线定理）"></a>题 4（割线定理）</h3><p>如图，已知 $AB, CD$ 是半径为 $R$ 的圆 $O$ 的两条直径，且 $\angle AOC = \dfrac{\pi}{3}$，点 $P$ 在劣弧 $BC$ 上，连接 $PA, PD$ 分别交 $CD, AB$ 于点 $E, F$，求证：$AE \cdot AP + DF \cdot DP$ 为定值。</p><p><img src="https://i.loli.net/2020/07/05/mgviFNydCb3Hlj8.png" alt="image.png"></p><p>考虑用已知值表示这个式子。</p><p>证明：</p><p>由 $\angle AOC = \dfrac{\pi}{3}$ 得 $\angle AOD = 120^\circ$，则 $\angle P = 60^\circ = \angle AOC$。</p><p>则 $O, E, P, F$ 四点共圆，即 $AE \cdot AP = AO \cdot AF, DF \cdot DP = DO \cdot DE$。</p><p>连接 $AC$，易证 $\angle AEC \cong \triangle DFO$。</p><p>则 $AE \cdot AP + DF \cdot DP = AO \cdot AF + DO \cdot DE = R \cdot (R + OF) + R \cdot (R + OE) = 2R^2 + R \cdot (OF + OE) = 3R^2$。</p><h3 id="题-5（割线定理）"><a href="#题-5（割线定理）" class="headerlink" title="题 5（割线定理）"></a>题 5（割线定理）</h3><p>如图，圆内接四边形 $ABCD$ 中，$AC$ 与 $BD$ 交于点 $Q$，$BA$ 与 $CD$ 交于点 $P$，求证：$PQ^2 = PA \cdot PB - QB \cdot QD$。</p><p><img src="https://i.loli.net/2020/07/05/bAeZQoYfgvnKtIl.png" alt="image.png"></p><p>考虑构造圆来使用割线定理。</p><p>证明：设直线 $PQ$ 与 $\triangle ABQ$ 的外接圆交于点 $E$，则 $A, B, E, Q$ 四点共圆。</p><p>则 $PA \cdot PB = PQ \cdot PE$，$PA \cdot PB - PQ^2 = PQ \cdot QE$。</p><p>则只需证 $B, E, D, P$ 四点共圆。</p><p>由 $\angle E = \pi - \angle BAC = \pi - \angle BDC = \angle PDB$，得 $B, E, D, P$ 四点共圆。</p><p>则 $BQ \cdot QD = PQ \cdot PE$。</p><p>则 $PA \cdot PB - PQ^2 = QB \cdot QD$，即 $PQ^2 = PA \cdot PB - QB \cdot QD$。</p><h3 id="题-6（割线定理）"><a href="#题-6（割线定理）" class="headerlink" title="题 6（割线定理）"></a>题 6（割线定理）</h3><p>如图，凸四边形 $ABCD$ 内接于圆 $O$，若 $BA$ 交 $CD$ 于点 $P$，$AD$ 交 $BQ$ 于点 $Q$，求证：$PQ^2 = P$ 的幂 $+$ $Q$ 的幂。</p><p><img src="https://i.loli.net/2020/07/05/NjwGYpR7k2QPq5Z.png" alt="image.png"></p><p>与上题相似，请读者自行证明。</p><h3 id="题-7（三角形，圆）"><a href="#题-7（三角形，圆）" class="headerlink" title="题 7（三角形，圆）"></a>题 7（三角形，圆）</h3><p>如图，已知 $O, G, H$ 分别是 $\triangle ABC$ 的外心、重心、垂心，$D$ 为 $BC$ 边上的中点，证明：（1）$H$ 关于 $BC$ 边的对称点 $H’$ 在 $\triangle ABC$ 的外接圆上；（2）$AH = 2OD$；（3）$O, G, H$ 三点共线。</p><p><img src="https://i.loli.net/2020/07/05/TxBSHCzZlob3U2v.png" alt="image.png"></p><p>一道比较综合的题目，考察了外心，重心，垂心的性质，四点共圆和同一法的运用。</p><p>证明：</p><p>（1）显然，略去不证。</p><p>（2）连接 $BO$，延长交圆 $O$ 于点 $E$，连接 $AE, EC$。</p><p>显然 $OD$ 是 $\triangle BCE$ 的中位线，即 $CE = 2OD$。</p><p>只需证四边形 $AECH$ 是平行四边形。</p><p>显然有 $CE \perp BC, AH \perp BC, CH \perp AB, EA \perp BA$，即四边形 $AECH$ 是平行四边形。</p><p>则 $AH = CE = 2OD$。</p><p>（3）连接 $AD$ 交 $OH$ 于 $G’$，下证 $G’$ 与 $G$ 是同一个点。</p><p>显然有 $\triangle OG’D \sim \triangle AG’H$。</p><p>由（2）得 $OD : AH = 1 : 2$，则 $DG’ : G’A = 1 : 2$。</p><p>又因为 $G$ 是 $\triangle ABC$ 的重心，则 $DG : GA = 1 : 2$。</p><p>即 $G’$ 与 $G$ 是同一个点，$O, G, H$ 三点共线。</p><p>（注：这条线被称为欧拉线）</p>]]></content>
      
      
      <categories>
          
          <category> MO </category>
          
          <category> 平面几何 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 几何 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1371D] Grid-00100</title>
      <link href="/2020/07/03/CF1371D-Grid-00100/"/>
      <url>/2020/07/03/CF1371D-Grid-00100/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/contest/1371/problem/D" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：构造一个 $n \times n$ 的 $01$ 矩阵 $A$，其中有 $k$ 个 $1$，定义 $r_{i} = \sum \limits_{j=1}^{n}A_{i, j}(1 \le i \le n)$，$c_j = \sum \limits_{i=1}^{n}A_{i, j}(1 \le j \le n)$，$f(A) = (\max(r) - \min(r)) ^ 2 + (\max(c) - \min(c)) ^ 2$，使得 $f(A)$ 最小。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>（orz woshiluo）</p><p>考虑什么时候能够使 $\max(r) - \min(r)$ 最小，显然当 $1$ 平均分布在每一行时是最小的。</p><p>$\max(c) - \min(c)$ 的情况同理。</p><p>于是就需要将 $1$ 平均放置在矩阵中。</p><p>那就可以按照对角线的规律放置 $1$，如果到了 $(n, n)$ 就从 $(1, 2)$ 或者 $(2, 1)$ 开始继续放置。</p><p>这样就可以让 $1$ 平均分布。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">310</span>][<span class="number">310</span>];</span><br><span class="line"><span class="keyword">int</span> r[<span class="number">310</span>], c[<span class="number">310</span>];</span><br><span class="line"><span class="keyword">int</span> t, n, k, maxr, maxc, minr, minc;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--) &#123;</span><br><span class="line">        read(n), read(k);</span><br><span class="line">        <span class="built_in">memset</span>(a, <span class="number">0</span>, <span class="keyword">sizeof</span>(a));</span><br><span class="line">        <span class="built_in">std</span>::fill(r + <span class="number">1</span>, r + n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="built_in">std</span>::fill(c + <span class="number">1</span>, c + n + <span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">        maxr = maxc = <span class="number">0</span>;</span><br><span class="line">        minr = minc = <span class="number">0x3f3f3f3f</span>;</span><br><span class="line">        <span class="keyword">int</span> x = <span class="number">1</span>, y = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i) &#123;</span><br><span class="line">            a[x][y] = <span class="number">1</span>;</span><br><span class="line">            ++x, ++y;</span><br><span class="line">            <span class="keyword">if</span> (x &gt; n)  x = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (y &gt; n)  y = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (a[x][y]) ++x;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">                r[i] += a[i][j];</span><br><span class="line">                c[j] += a[i][j];</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            maxr = <span class="built_in">std</span>::max(maxr, r[i]);</span><br><span class="line">            minr = <span class="built_in">std</span>::min(minr, r[i]);</span><br><span class="line">            maxc = <span class="built_in">std</span>::max(maxc, c[i]);</span><br><span class="line">            minc = <span class="built_in">std</span>::min(minc, c[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, (maxr - minr) * (maxr - minr) + (maxc - minc) * (maxc - minc));</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j) &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d"</span>, a[i][j]);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 构造 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[USACO06FEB] Treats for the Cows</title>
      <link href="/2020/07/01/USACO06FEB-Treats-for-the-Cows/"/>
      <url>/2020/07/01/USACO06FEB-Treats-for-the-Cows/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2858" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 个物品排成一排，每个物品有一个初始价值 $v_i$。每次可以从两端取一个物品获得 $av_i$ 的价值，其中 $a$ 表示这个物品是第 $a$ 个取出的，求取完物品的最大价值。$1 \le n \le 2 \cdot 10^3, 1 \le v_i \le 10^3$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>好像是考完试做的第一道不是水题的题？</p><p>考虑 DP。</p><p>设 $f(i, j)$ 表示取完区间 $[i, j]$ 后获得的最大价值。</p><p>不难发现区间 $[i, j]$ 的长度 $l$ 就是 $n - a + 1$，那么我们就可以在枚举区间的时候顺带算出 $a$。</p><p>状态转移方程：</p><p>$$<br>f(i, j) = \max(av_i + f(i + 1, j), av_j + f(i, j - 1))<br>$$</p><p>其中 $a = n - l + 1$。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">2010</span>][<span class="number">2010</span>];</span><br><span class="line"><span class="keyword">int</span> v[<span class="number">2010</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(v[i]);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> l = <span class="number">1</span>; l &lt;= n; ++l) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i + l - <span class="number">1</span> &lt;= n; ++i) &#123;</span><br><span class="line">            <span class="keyword">int</span> j = i + l - <span class="number">1</span>;</span><br><span class="line">            f[i][j] = <span class="built_in">std</span>::max(v[i] * (n - l + <span class="number">1</span>) + f[i + <span class="number">1</span>][j], f[i][j - <span class="number">1</span>] + v[j] * (n - l + <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, f[<span class="number">1</span>][n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 区间 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> USACO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1374E1] Reading Books(easy version)</title>
      <link href="/2020/07/01/CF1374E1-Reading-Books-easy-version/"/>
      <url>/2020/07/01/CF1374E1-Reading-Books-easy-version/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/problemset/problem/1374/E1" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 本书，读第 $i$ 本书需要 $t_i$ 的时间。如果 Alice 喜欢第 $i$ 本书，则 $a_i = 1$，如果 Bob 喜欢第 $i$ 本书，则 $b_i = 1$。求每个人都读了至少 $k$ 本喜欢的书时所需时间的最小值。$1 \le k \le n \le 2 \cdot 10^5, 1 \le t_i \le 10^4$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>Div 3 的降智题……</p><p>可能是因为我睡着了没做出来？</p><p>考虑构造三个数组，分别存 Bob 喜欢的，Alice 喜欢的，Bob 和 Alice 都喜欢的书，然后排序做前缀和。</p><p>如果取了 $i$ 本都喜欢的书，则剩余两个就要取 $k - i$ 个，枚举 $i$ 更新答案即可。</p><p>注意控制 $i$ 的范围。</p><p>（其实没有听懂 woshiluo 神仙的做法（雾））</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL a1[<span class="number">200010</span>], a2[<span class="number">200010</span>], a3[<span class="number">200010</span>], f1[<span class="number">200010</span>], f2[<span class="number">200010</span>], f3[<span class="number">200010</span>];</span><br><span class="line">LL n, k, ans = <span class="number">0x7f7f7f7f</span>, n1, n2, n3;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, t, a, b; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(t), read(a), read(b);</span><br><span class="line">        <span class="keyword">if</span> (a &amp;&amp; b) a3[++n3] = t;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">if</span> (a)  a1[++n1] = t;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">if</span> (b)  a2[++n2] = t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (n1 + n3 &lt; k || n2 + n3 &lt; k) &#123;</span><br><span class="line">        <span class="built_in">puts</span>(<span class="string">"-1"</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::sort(a1 + <span class="number">1</span>, a1 + n1 + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">std</span>::sort(a2 + <span class="number">1</span>, a2 + n2 + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">std</span>::sort(a3 + <span class="number">1</span>, a3 + n3 + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n1; ++i)   f1[i] = f1[i - <span class="number">1</span>] + a1[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n2; ++i)   f2[i] = f2[i - <span class="number">1</span>] + a2[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n3; ++i)   f3[i] = f3[i - <span class="number">1</span>] + a3[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="built_in">std</span>::max(<span class="number">0L</span>L, k - <span class="built_in">std</span>::min(n1, n2)); i &lt;= <span class="built_in">std</span>::min(n3, k); ++i) &#123;</span><br><span class="line">        LL s = f3[i] + f1[k - i] + f2[k - i];</span><br><span class="line">        ans = <span class="built_in">std</span>::min(ans, s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Learn Git Branching 记录</title>
      <link href="/2020/04/22/Learn-Git-Branching-%E8%AE%B0%E5%BD%95/"/>
      <url>/2020/04/22/Learn-Git-Branching-%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h3 id="起因"><a href="#起因" class="headerlink" title="起因"></a>起因</h3><p>有一天 CP Editor 群内：</p><a id="more"></a><p><img src="https://i.loli.net/2020/04/22/XAVwt4J7LNHGuys.png"></p><p>想到我对 Git 也是一窍不通，所以就来学了。</p><h3 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h3><p><code>git commit</code> 可以用来创建一个新的提交记录。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git commit</span><br><span class="line">$ git commit</span><br></pre></td></tr></table></figure><p><code>git branch &lt;name&gt;</code> 可以用来创建分支，<code>git checkout &lt;name&gt;</code> 可以切换分支。</p><p>可以通过 <code>git checkout -b &lt;name&gt;</code> 来在创建新分支的同时切换到新分支。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b bugFix</span><br></pre></td></tr></table></figure><p><code>git merge &lt;name&gt;</code> 可以将分支合并到当前分支。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b bugFix</span><br><span class="line">$ git commit</span><br><span class="line">$ git checkout master</span><br><span class="line">$ git commit</span><br><span class="line">$ git merge bugFix</span><br></pre></td></tr></table></figure><p>另外一种合并分支的方法是 <code>git rebase &lt;name&gt;</code>。</p><p>某种程度上可以认为是将指向 LCA 的节点的指针指向另外一个节点。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -b bugFix</span><br><span class="line">$ git commit</span><br><span class="line">$ git checkout master</span><br><span class="line">$ git commit</span><br><span class="line">$ git checkout bugFix</span><br><span class="line">$ git rebase master</span><br></pre></td></tr></table></figure><h3 id="高级篇"><a href="#高级篇" class="headerlink" title="高级篇"></a>高级篇</h3><p>HEAD 指向的是当前分支上最近一次提交记录，可以把它当成某种指针。</p><p>如果要指向分支上的历史版本的记录，可以使用 <code>git checkout &lt;hash-value&gt;</code> 来改变 HEAD 的指向。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout C4</span><br></pre></td></tr></table></figure><p>哈希值太长怎么办？</p><p>另外一种方式是使用相对引用（^）。这里介绍两个简单的用法：</p><ul><li>使用 <code>^</code> 向上移动一个提交记录</li><li>使用 <code>~&lt;num&gt;</code> 向上移动多个提交记录</li></ul><p>将操作符 <code>^</code> 加在引用名称后面，表示它的父节点。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout bugFix^</span><br></pre></td></tr></table></figure><p>我们可以用这些命令来强制修改分支位置。如命令 <code>git branch -f master HEAD~3</code>。</p><p>这个命令会将 master 分支强制指向 HEAD 的第 3 级父节点。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git branch -f master C6</span><br><span class="line">$ git branch -f bugFix HEAD~2</span><br><span class="line">$ git checkout HEAD^</span><br></pre></td></tr></table></figure><p>撤销变更的方法主要有两种，<code>git reset</code> 和 <code>git revert</code>。</p><p><code>git reset</code> 可以让当前分支往回移，但只使用于本地。</p><p><code>git revert</code> 则是新建一个提交记录，只不过这是用来撤销用的新记录，内容与要撤销的父节点内容相同。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git reset HEAD^</span><br><span class="line">$ git checkout pushed</span><br><span class="line">$ git revert HEAD</span><br></pre></td></tr></table></figure><h3 id="移动提交记录"><a href="#移动提交记录" class="headerlink" title="移动提交记录"></a>移动提交记录</h3><p><code>git cherry-pick</code> 可以自由修改提交树，将目标提交记录直接放在当前位置的下面。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git cherry-pick C3 C4 C7</span><br></pre></td></tr></table></figure><p>但别忘了这里的 C3 C4 C7 都是哈希值，真实的哈希值可是长多了。</p><p>另外一种方法是使用交互式的 rebase（<code>git rebase -i</code>）。</p><p>这个是 UI 界面，很直观。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i HEAD~4</span><br></pre></td></tr></table></figure><p>然后在 UI 界面里进行操作即可。</p><h3 id="杂项"><a href="#杂项" class="headerlink" title="杂项"></a>杂项</h3><p>第一关很简单。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git cherry-pick C4</span><br></pre></td></tr></table></figure><p>考虑一种情况：</p><p>我们在某分支上进行了一次提交，然后又创建了新分支，然后又提交了一次。</p><p>此时想修改最开始的提交记录，怎么做呢？</p><p>我们可以先用 <code>git rabase -i</code> 进行排序，然后进行修改，然后再恢复到原来的顺序。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase -i HEAD^^</span><br><span class="line">$ git commit --amend</span><br><span class="line">$ git rebase -i HEAD^^</span><br><span class="line">$ git rebase caption master</span><br></pre></td></tr></table></figure><p>使用 <code>git cherry-pick</code> 又是怎么做的呢？</p><p>这里直接给出答案：</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout master</span><br><span class="line">$ git cherry-pick C2</span><br><span class="line">$ git commit --amend</span><br><span class="line">$ git cherry-pick C3</span><br></pre></td></tr></table></figure><p>我们可以用 <code>git tag</code> 来对一个提交记录作一个类似标记的东西。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git tag v0 C1</span><br><span class="line">$ git tag v1 C2</span><br><span class="line">$ git checkout C2</span><br></pre></td></tr></table></figure><p>可以用 <code>git describe &lt;ref&gt;</code> 来描述最近的 tag。</p><p>输出结果为 <code>&lt;tag&gt;_&lt;numCommits&gt;_g&lt;hash&gt;</code>。tag 表示的是离 ref 最近的标签，numCommits 是表示这个 ref 与 tag 相差有多少个提交记录，hash 表示的是所给定的 ref 所表示的提交记录哈希值的前几位。</p><p>过关命令略。</p><h3 id="高级话题"><a href="#高级话题" class="headerlink" title="高级话题"></a>高级话题</h3><p>在需要多次 rebase 时，记得最后更新 master 分支。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git rebase master bugFix</span><br><span class="line">$ git rebase bugFix side</span><br><span class="line">$ git rebase side another</span><br><span class="line">$ git rebase another master</span><br></pre></td></tr></table></figure><p>还记得 <code>^</code> 吗？其实跟 <code>~</code> 一样可以在后面加上数字，当同一个节点有多个父亲时，可以选择移动到的是第几个父亲。</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git branch bugWork master ^^2^</span><br></pre></td></tr></table></figure><p><code>git cherry-pick</code> 天下第一！</p><p>过关命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout one</span><br><span class="line">$ git cherry-pick C4 C3 C2</span><br><span class="line">$ git cherry-pick two</span><br><span class="line">$ git cherry-pick C5 C4 C3 C2</span><br><span class="line">$ git branch -f three C2</span><br></pre></td></tr></table></figure><p>Git 的本地操作基本上就是这些了，远程操作等到考完二模再学吧（哭）。</p><p>二模前一天晚上想找个休闲的方式，所以选择了这个（雾）。</p>]]></content>
      
      
      <categories>
          
          <category> 技术 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[EZEC-1] 出题</title>
      <link href="/2020/04/20/EZEC-1-%E5%87%BA%E9%A2%98/"/>
      <url>/2020/04/20/EZEC-1-%E5%87%BA%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P6433" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出 $n$ 个物品，每个物品有一个价值 $v$ 和空间 $m$，有 $k$ 次机会可以将当前物品的价值翻一倍，每种物品只能进行一次这样的操作，物品最多选 $n - 1$ 个，求最大价值。$1 \le n \le 100, 0 \le m \le 1000$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>其实不难发现，题目中的 “有一个物品不能取” 这句话其实是废话，因为一般来说背包问题不能全部取完，不取那个不在最终状态里的物品就行了。</p><p>这道题无非就是又加了一维的情况。</p><p>设 $f(i, j)$ 表示体积为 $i$，用了 $j$ 次翻倍时的最大收益。则状态转移方程为 $f(i, j) = \max(f(i - m_k, j) + v_k, f(i - m_k, j - 1) + 2v_k)$。</p><p>注意到每个老师只能用一次，所以枚举 $j$ 时要注意一下范围。</p><p>然后别忘了我们最开始说的那种情况，如果所有物品都能取，那就是一个简单的贪心，注意特判一下。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">1010</span>][<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">1010</span>], x[<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, ans, t, s;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m), read(t);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]), read(x[i]), s += x[i];</span><br><span class="line">    <span class="keyword">if</span> (s &lt;= m) &#123;</span><br><span class="line">        <span class="built_in">std</span>::sort(a + <span class="number">1</span>, a + n + <span class="number">1</span>, [](<span class="keyword">int</span> a, <span class="keyword">int</span> b) &#123;</span><br><span class="line">            <span class="keyword">return</span> a &gt; b;</span><br><span class="line">        &#125; );</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= t; ++i)    ans += a[i] * <span class="number">2</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = t + <span class="number">1</span>; i &lt; n; ++i) ans += a[i];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = m; j &gt;= x[i]; --j) &#123;</span><br><span class="line">            f[j][<span class="number">0</span>] = <span class="built_in">std</span>::max(f[j][<span class="number">0</span>], f[j - x[i]][<span class="number">0</span>] + a[i]);</span><br><span class="line">            ans = <span class="built_in">std</span>::max(ans, f[j][<span class="number">0</span>]);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= <span class="built_in">std</span>::min(t, i); ++k) &#123;</span><br><span class="line">                f[j][k] = <span class="built_in">std</span>::max(f[j][k], <span class="built_in">std</span>::max(f[j - x[i]][k] + a[i], f[j - x[i]][k - <span class="number">1</span>] + a[i] * <span class="number">2</span>));</span><br><span class="line">                ans = <span class="built_in">std</span>::max(ans, f[j][k]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 背包 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EZEC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[ABC162F] Select Half</title>
      <link href="/2020/04/17/ABC162F-Select-Half/"/>
      <url>/2020/04/17/ABC162F-Select-Half/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://atcoder.jp/contests/abc162/tasks/abc162_f" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出长度为 $n$ 的序列，要求选 $\lfloor\frac{n}{2}\rfloor$ 个不相邻的数使得选出的数的和最大。 $2 \le n \le 2 \times 10^5, |a_i| \le 10^9$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>如果没有个数限制，可以用 $f(i, j)(j \in \{0, 1\})$ 表示取或不取第 $i$ 个数时的最大收益。</p><p>但是这道题有个数上的限制。</p><p>考虑偶数的情况，显然答案只有两种可能，取或不取第一个数。</p><p>但是奇数的情况就不一样了，我们发现可能有两个数之间隔了两个数的情况存在，但这也不一定存在。</p><p>考虑 DP，设 $f_i$ 表示取到第 $i$ 个数时的最大收益（$i &gt; 1$），$s_i$ 为隔了一个数得到的前缀和。</p><p>首先考虑第一个取不取，显然，$f_2 = \max(a_2, a_1)$。</p><p>然后考虑第二个取不取，则 $f_3 = \max(f_1 + a_3, f_2)$。</p><p>同样得到 $f_4 = \max(f_2 + a_4, s_3)$。</p><p>则状态转移方程：</p><p>$$<br>\begin{cases}<br>    f_i = \max(f_{i - 1}, f_{i - 2} + a_i) (i \bmod 2 = 1) \<br>    f_i = \max(f_{i - 2} + a_i, s_{i - 1}) (i \bmod 2 = 0) \<br>\end{cases}<br>$$</p><p>感觉这道题的状态转移方程还是挺难想的。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL a[<span class="number">200010</span>], f[<span class="number">200010</span>], sum[<span class="number">200010</span>];</span><br><span class="line">LL n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(a[i]);</span><br><span class="line">    sum[<span class="number">1</span>] = a[<span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i)    sum[i] = sum[i - <span class="number">2</span>] + a[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &amp; <span class="number">1</span>) &#123;</span><br><span class="line">            f[i] = <span class="built_in">std</span>::max(f[i - <span class="number">1</span>], f[i - <span class="number">2</span>] + a[i]);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            f[i] = <span class="built_in">std</span>::max(f[i - <span class="number">2</span>] + a[i], sum[i - <span class="number">1</span>]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, f[n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 线性 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AtCoder </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF1336A] Linova and Kingdom</title>
      <link href="/2020/04/17/CF1336A-Linova-and-Kingdom/"/>
      <url>/2020/04/17/CF1336A-Linova-and-Kingdom/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://codeforces.com/contest/1336/problem/A" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个 $n$ 个点的有根树，每个城市可以有两种类型 A 和 B，每个 A 城市的幸福度定义为从 A 到根的最短路径上 B 城市的个数，最大化所有 A 城市的幸福度之和。$1 \le n \le 2 \times 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>有一个很显然的贪心思路，每次一定要取离树根最远的点，考虑预处理到根的距离。</p><p>但是这样有一个问题，如果这个点的父亲结点也被选上了，那么这个点的幸福度会减少。</p><p>发现可以如果选了一个父亲结点，那么总幸福度减少了这个点的子树大小，dfs 的时候减一下就行了。</p><p>注意开 long long。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; g[<span class="number">200010</span>];</span><br><span class="line">LL siz[<span class="number">200010</span>], dis[<span class="number">200010</span>];</span><br><span class="line">LL n, k, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> pa)</span> </span>&#123;</span><br><span class="line">    siz[now] = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : g[now]) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i ^ pa) &#123;</span><br><span class="line">            dis[i] = dis[now] + <span class="number">1</span>;</span><br><span class="line">            dfs(i, now);</span><br><span class="line">            siz[now] += siz[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    dis[now] -= siz[now] - <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(k);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i) &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        g[u].push_back(v), g[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">std</span>::sort(dis + <span class="number">1</span>, dis + n + <span class="number">1</span>, [](LL a, LL b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a &gt; b;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i)    ans += dis[i];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 树形 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[TJOI2007] 线段</title>
      <link href="/2020/04/11/TJOI2007-%E7%BA%BF%E6%AE%B5/"/>
      <url>/2020/04/11/TJOI2007-%E7%BA%BF%E6%AE%B5/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P3842" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出 $n$ 条线段的左右端点 $l_i, r_i$，求出从 $(1, 1)$ 走到 $(n, n)$ 且完整经过每条线段需要的最小距离。$1 \le n \le 2 \times 10^4$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑 DP。</p><p>这道题的状态还是很好想的，设 $f(i, 1)$ 和 $f(i, 2)$ 分别表示走到第 $i$ 行后停在左右端点需要的最小距离。</p><p>初始化 $f(1, 1) = r_i - l_i + r_i - 1, f(1, 2) = r_i - 1$。</p><p>转移其实也很好想，如果上一行停在了左端点，那么停在这一行左端点的距离就是这一行的线段长度加上上一行左端点到这一行右端点的距离，停在这一行右端点的距离就是这一行的线段长度加上上一行左端点到这一行左端点的距离。上一行停在右端点的情况同理。</p><p>状态转移方程：</p><p>$$<br>f(i, j) =<br>\begin{cases}<br>    \min(f(i - 1, 1) + |r_i - l_{i - 1}|, f(i - 1, 2) + |r_i - r_{i - 1}|) + r_i - l_i + 1(j = 1) \\<br>    \min(f(i - 1, 1) + |l_i - l_{i - 1}|, f(i - 1, 2) + |l_i - r_{i - 1}|) + r_i - l_i + 1(j = 2) \\<br>\end{cases}<br>$$</p><p><del>草为什么没对齐</del></p><p>最后别忘了是走到 $(n, n)$，答案还要加上某个距离。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">20010</span>][<span class="number">3</span>];</span><br><span class="line"><span class="keyword">int</span> l[<span class="number">20010</span>], r[<span class="number">20010</span>];</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    read(l[i]), read(r[i]);</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">1</span>] = r[<span class="number">1</span>] + r[<span class="number">1</span>] - l[<span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">    f[<span class="number">1</span>][<span class="number">2</span>] = r[<span class="number">1</span>] - <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        f[i][<span class="number">1</span>] = <span class="built_in">std</span>::min(f[i - <span class="number">1</span>][<span class="number">1</span>] + <span class="built_in">abs</span>(r[i] - l[i - <span class="number">1</span>]), f[i - <span class="number">1</span>][<span class="number">2</span>] + <span class="built_in">abs</span>(r[i] - r[i - <span class="number">1</span>])) + r[i] - l[i] + <span class="number">1</span>;</span><br><span class="line">        f[i][<span class="number">2</span>] = <span class="built_in">std</span>::min(f[i - <span class="number">1</span>][<span class="number">1</span>] + <span class="built_in">abs</span>(l[i] - l[i - <span class="number">1</span>]), f[i - <span class="number">1</span>][<span class="number">2</span>] + <span class="built_in">abs</span>(l[i] - r[i - <span class="number">1</span>])) + r[i] - l[i] + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, <span class="built_in">std</span>::min(f[n][<span class="number">1</span>] + n - l[n], f[n][<span class="number">2</span>] + n - r[n]));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 线性 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> TJOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[PA2014] Kuglarz</title>
      <link href="/2020/04/09/PA2014-Kuglarz/"/>
      <url>/2020/04/09/PA2014-Kuglarz/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P5994" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：有 $n$ 个杯子，每次可以选一个区间 $l, r$ 并知道 $l, r$ 之间球的总数的奇偶性，求猜出哪些杯子下藏着球需要的最小花费。$1 \le n \le 2 \times 10^3$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>每个杯子下只可能有或没有球，每个区间的球的总数模 $2$ 只可能为 $1$ 或 $0$。</p><p>每一个区间 $l, r$ 的奇偶性相当于 $a_l \operatorname{xor} a_{l + 1} … \operatorname{xor} a_{r - 1} \operatorname{xor} a_r$。考虑前缀和，设 $a$ 的异或前缀和数组为 $b$，则 $l, r$ 的奇偶性就为 $b_{l-1} \operatorname{xor} b_{r}$。</p><p>考虑如何求出 $a$。显然，求出 $b$ 之后就可以一一求出 $a$。</p><p>题目中相当于给出了每组 $i, j$ 之间的代价。但此时由于是前缀和数组，连边的结点不再是 $i, j$，而是 $i - 1, j$。之后不难发现求出 $b$ 需要整个图连通，对建出的图求 MST 即可。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v, dis;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;a, <span class="keyword">const</span> Edge &amp;b) &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &lt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; edge[<span class="number">4000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="keyword">int</span> find[<span class="number">2010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> find[x] == x ? x : find[x] = unionFind(find[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        find[i] = i;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &lt;= n; ++j) &#123;</span><br><span class="line">            <span class="keyword">int</span> c;</span><br><span class="line">            read(c);</span><br><span class="line">            edge[++m].u = i - <span class="number">1</span>;</span><br><span class="line">            edge[m].v = j;</span><br><span class="line">            edge[m].dis = c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::sort(edge + <span class="number">1</span>, edge + m + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i) &#123;</span><br><span class="line">        <span class="keyword">int</span> u = unionFind(edge[i].u), v = unionFind(edge[i].v);</span><br><span class="line">        <span class="keyword">if</span> (u != v) &#123;</span><br><span class="line">            find[u] = v;</span><br><span class="line">            ans += edge[i].dis;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最小生成树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树状数组学习笔记（二）</title>
      <link href="/2020/04/04/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
      <url>/2020/04/04/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<p>树状数组一些不那么裸的操作。</p><a id="more"></a><h3 id="区间修改"><a href="#区间修改" class="headerlink" title="区间修改"></a>区间修改</h3><p>我们已经知道了单点修改怎么做，但是怎么区间修改呢？</p><p>考虑差分。</p><p>现在已知差分数组 <code>diff[i] = a[i] - a[i - 1]</code>，求每个点的值其实就是求这个点在差分数组中的前缀和。</p><p>所以此时每个结点存的不是原数组，而是差分数组，更新的时候按照差分的思路更新即可。</p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> t[<span class="number">500010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, diff, x, opt, y, k;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (pos &lt;= n) &#123;</span><br><span class="line">        t[pos] += d;</span><br><span class="line">        pos += lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (pos) &#123;</span><br><span class="line">        s += t[pos];</span><br><span class="line">        pos -= lowbit(pos);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(x);</span><br><span class="line">        update(i, x - diff);</span><br><span class="line">        diff = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (m--) &#123;</span><br><span class="line">        read(opt);</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) &#123;</span><br><span class="line">            read(x), read(y), read(k);</span><br><span class="line">            update(x, k), update(y + <span class="number">1</span>, -k);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            read(x);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(x));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面的代码只能单点查询，接下来讨论区间查询的情况：</p><p>已知原数组 $a$，差分数组 $b$，且 $a_i = \sum_{j=1}^{i}b_j$。</p><p>区间查询就意味着用到 $a$ 的前缀和相减，所以还要对 $a$ 建树。假设现在求 $p$ 的前缀和。</p><p>$$<br>\begin{aligned}<br>    &amp;\sum_{i=1}^{p}a_i \<br>    = &amp;\sum_{i=1}^{p}\sum_{j=1}^{i}b_j \<br>    = &amp;\sum_{i=1}^{p}b_i(p - i + 1) \<br>    = &amp;\sum_{i=1}^{p}b_i(p+1) - \sum_{i=1}^{p}ib_i<br>\end{aligned}<br>$$</p><p>即我们只需要维护 $\sum b_i$ 和 $\sum ib_i$。</p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line">LL t[<span class="number">1000010</span>], g[<span class="number">1000010</span>];</span><br><span class="line">LL n, q, x, l, r, opt, last;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> LL <span class="title">lowbit</span><span class="params">(LL x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(LL pos, LL d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">int</span> tmp = pos;</span><br><span class="line">    <span class="keyword">while</span> (pos &lt;= n) &#123;</span><br><span class="line">        t[pos] += d, g[pos] += d * tmp;</span><br><span class="line">        pos += lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(LL pos)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">0</span>, tmp = pos;</span><br><span class="line">    <span class="keyword">while</span> (pos) &#123;</span><br><span class="line">        s += (tmp + <span class="number">1</span>) * t[pos] - g[pos];</span><br><span class="line">        pos -= lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n), read(q);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(x);</span><br><span class="line">        update(i, x - last);</span><br><span class="line">        last = x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (q--) &#123;</span><br><span class="line">        read(opt);</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>) &#123;</span><br><span class="line">            read(l), read(r), read(x);</span><br><span class="line">            update(l, x), update(r + <span class="number">1</span>, -x);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            read(l), read(r);</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, query(r) - query(l - <span class="number">1</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="求逆序对"><a href="#求逆序对" class="headerlink" title="求逆序对"></a>求逆序对</h3><p>逆序对也是树状数组的一个应用。</p><p>考虑逆序对的定义：对于两个数 $i, r$，如果 $a_i &gt; a_r$ 且 $i &lt; r$ 则称这个东西为逆序对。</p><p>可以用总数减去非严格顺序对的个数得到这个答案。</p><p>现在结点表示的不是 $a_i$，而是 $i$ 出现过几次。</p><p>举个例子，第 $i$ 个数为 $a_i$，修改并不是 <code>update(i, a[i])</code>，而是 <code>update(a[i], 1)</code>。</p><p>每次求 $a_i$ 的前缀和，就得到了当前非严格顺序对的个数。</p><p>一般还需要离散化。</p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>) &#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span> &#123;</span></span><br><span class="line">    <span class="keyword">int</span> val, id;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b) &#123;</span><br><span class="line">        <span class="keyword">if</span> (a.val == b.val) <span class="keyword">return</span> a.id &lt; b.id;</span><br><span class="line">        <span class="keyword">return</span> a.val &lt; b.val;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; b[<span class="number">500010</span>];</span><br><span class="line"></span><br><span class="line">LL a[<span class="number">500010</span>], t[<span class="number">500010</span>];</span><br><span class="line">LL ans;</span><br><span class="line"><span class="keyword">int</span> n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> pos, <span class="keyword">int</span> d)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (pos &lt;= n) &#123;</span><br><span class="line">        t[pos] += d;</span><br><span class="line">        pos += lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function">LL <span class="title">query</span><span class="params">(<span class="keyword">int</span> pos)</span> </span>&#123;</span><br><span class="line">    LL s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (pos) &#123;</span><br><span class="line">        s += t[pos];</span><br><span class="line">        pos -= lowbit(pos);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        read(b[i].val);</span><br><span class="line">        b[i].id = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">std</span>::sort(b + <span class="number">1</span>, b + n + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    a[b[i].id] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">        update(a[i], <span class="number">1</span>);</span><br><span class="line">        ans += i - query(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%lld\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="建树优化"><a href="#建树优化" class="headerlink" title="建树优化"></a>建树优化</h3><p>设当前结点为 $x$，子结点为 $s$，不难发现 $x = \sum t_s$。</p><p>所以在建树时直接对自己和自己的父亲进行操作即可。</p><p>能将建树的时间复杂度优化到 $O(n)$。</p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i) &#123;</span><br><span class="line">    read(x);</span><br><span class="line">    t[i] += x;</span><br><span class="line">    <span class="keyword">if</span> (i + lowbit(i) &lt;= n) t[i + lowbit(i)] += x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="例题"><a href="#例题" class="headerlink" title="例题"></a>例题</h3><p><a href="https://loj.ac/problem/130" target="_blank" rel="noopener">LOJ #130. 树状数组 1 ：单点修改，区间查询</a></p><p><a href="https://loj.ac/problem/131" target="_blank" rel="noopener">LOJ #131. 树状数组 2 ：区间修改，单点查询</a></p><p><a href="https://loj.ac/problem/132" target="_blank" rel="noopener">LOJ #132. 树状数组 3 ：区间修改，区间查询</a></p><p><a href="https://www.luogu.com.cn/problem/P3374" target="_blank" rel="noopener">洛谷 P3374 【模板】树状数组 1</a></p><p><a href="https://www.luogu.com.cn/problem/P3368" target="_blank" rel="noopener">洛谷 P3368 【模板】树状数组 2</a></p><p>一维树状数组的几道模板题。</p><p><a href="https://www.luogu.com.cn/problem/P1908" target="_blank" rel="noopener">洛谷 P1908 逆序对</a></p><p>可以用来写逆序对的题。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 树状数组 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初中物理叠加或切割情景中的压强</title>
      <link href="/2020/04/02/%E5%88%9D%E4%B8%AD%E7%89%A9%E7%90%86%E5%8F%A0%E5%8A%A0%E6%88%96%E5%88%87%E5%89%B2%E6%83%85%E6%99%AF%E4%B8%AD%E7%9A%84%E5%8E%8B%E5%BC%BA/"/>
      <url>/2020/04/02/%E5%88%9D%E4%B8%AD%E7%89%A9%E7%90%86%E5%8F%A0%E5%8A%A0%E6%88%96%E5%88%87%E5%89%B2%E6%83%85%E6%99%AF%E4%B8%AD%E7%9A%84%E5%8E%8B%E5%BC%BA/</url>
      
        <content type="html"><![CDATA[<p>发现自己的物理是拉分项……</p><a id="more"></a><h3 id="题目-1"><a href="#题目-1" class="headerlink" title="题目 1"></a>题目 1</h3><p>[2019 河南开封一模] 如图所示，两个质量相等的实心均匀正方体 $A, B$ 静止放置在水平地面上，$A$ 的边长小于 $B$ 的边长，下列说法正确的是（    ）</p><p><img src="https://i.loli.net/2020/04/02/JhEG645mvVC3x7o.png"></p><ul><li>A. $A, B$ 对水平地面的压强 $p_A &lt; p_B$</li><li>B. 若将 $A, B$ 均沿竖直方向截去一半，则剩余部分对水平地面的压强 $p_A &lt; p_B$</li><li>C. 若将 $A, B$ 均沿水平方向截去一半，则剩余部分对水平地面的压强 $p_A &lt; p_B$</li><li>D. 若将 $A, B$ 均沿图中所示虚线截去上面的一半，则则剩余部分对水平地面的压强 $p_A &gt; p_B$</li></ul><h3 id="答案"><a href="#答案" class="headerlink" title="答案"></a>答案</h3><p>D。</p><p>由题得 $m_A = m_B, S_A &lt; S_B$，则 $p_A &gt; p_B$。</p><p>沿竖直方向截去一半，压强不变。沿水平方向截去一半或沿虚线截去一半，压强均变为原来的一半。</p><p>这题比较简单……</p><h3 id="题目-2"><a href="#题目-2" class="headerlink" title="题目 2"></a>题目 2</h3><p>[2018 上海崇明区二模] 如图所示，形状，体积相同的甲、乙长方体以不同方式放在水平面上，它们对水平面的压强相等，若在两物体上沿竖直方向切去相同的体积后放在各自剩余部分上方，此时它们对水平面的压强 $p_A$ 和 $p_B$ 的关系为（ ）</p><p>由于写 $\LaTeX$ 的时候中文实在是太难看了所以就改成 $A$ 和 $B$ 了。</p><p><img src="https://i.loli.net/2020/04/02/cZbgnPXy4kEu3mz.png"></p><ul><li>A. $p_A$ 可能大于 $p_B$</li><li>B. $p_A$ 一定等于 $p_B$</li><li>C. $p_A$ 可能小于 $p_B$</li><li>D. $p_A$ 一定小于 $p_B$</li></ul><h3 id="答案-1"><a href="#答案-1" class="headerlink" title="答案"></a>答案</h3><p>B。</p><p>先考虑极限法，当 $\Delta V = V_A$ 时，长方体没有发生任何变化，压强相等。 </p><p>但是答案里有 “可能” 这样的词语，所以还是要分析一下的……</p><p>$$\begin{aligned}<br>    \dfrac{G_A}{S_A - \Delta S_A} &amp;: \dfrac{G_B}{S_B - \Delta S_B} \<br>    \dfrac{G_A}{\dfrac{V_A - \Delta V_A}{h_A}} &amp;: \dfrac{G_B}{\dfrac{V_B - \Delta V_B}{h_B}} \<br>    \dfrac{G_Ah_A}{V_A - \Delta V_A} &amp;: \dfrac{G_Bh_B}{V_B - \Delta V_B}<br>\end{aligned}<br>$$</p><p>不难发现 $V_A - \Delta V_A$ 和 $V_B - \Delta V_B$ 其实是相等的。</p><p>则原式化为</p><p>$$\begin{aligned}<br>    \dfrac{G_Ah_A}{G_Bh_B} = \dfrac{\rho_AgV_Ah_A}{\rho_BgV_Bh_B}<br>\end{aligned}<br>$$</p><p>由题得到 $V_A = V_B$ 且 $p_A = p_B$。</p><p>则 $\rho_Agh_A = \rho_Bgh_B$，约分可得原式结果为 $1$，$p_A = p_B$。</p><h3 id="题目-3"><a href="#题目-3" class="headerlink" title="题目 3"></a>题目 3</h3><p>[2019 上海浦东新区月考] 如图所示，甲、乙两个均匀实心正方体放在水平地面上时对水平地面的压强相等，若分别将两正方体沿竖直方向截去相同的质量并分别放在各自剩余部分的上方，此时它们对地面的压强 $p_A, p_B$ 的关系是（ ）</p><p><img src="https://i.loli.net/2020/04/04/DaHK1AFNBJIzEGo.png"></p><ul><li>A. $p_A &gt; p_B$</li><li>B. $p_A = p_B$</li><li>C. $p_A &lt; p_B$</li><li>D. 无法判断</li></ul><h3 id="答案-2"><a href="#答案-2" class="headerlink" title="答案"></a>答案</h3><p>A。</p><p>由题得 $S_A &lt; S_B, p_A = p_B$，则 $m_A &lt; m_B$。</p><p>设切去的质量 $\Delta m$ 无限接近 $m_A$，则 $p_A$ 相当于无限大，得出答案为 A。</p><p>或者换一种方法。</p><p>不难发现切割后没有被放在自己上面的那部分压强其实是不变的，那么只需要表示出切割部分的压强变化。</p><p>则 $\Delta p_A = \dfrac{\Delta m}{S_A - \dfrac{\Delta m}{h_A\rho_A}} = \dfrac{\Delta m}{\dfrac{m_A - \Delta m}{h_A\rho_A}} = \dfrac{\Delta mh_A\rho_A}{m_A - \Delta m}$。</p><p>同理得 $\Delta p_B = \dfrac{\Delta mh_B\rho_B}{m_B - \Delta m}$。</p><p>注意到 $h_A\rho_A = h_B\rho_B$，两式分子相等，而 $m_A &lt; m_B$，则 $\Delta p_A &gt; \Delta p_B$。</p><h3 id="题目-4"><a href="#题目-4" class="headerlink" title="题目 4"></a>题目 4</h3><p>甲、乙两个实心正方体，分别由密度 $\rho_1, \rho_2$ 的物质组成，将它们放在水平地面上，甲对地面的压强为 $p_1$，乙对地面的压强为 $p_2$。把甲放在乙的上面时乙对地面的压强与把乙放在甲上面时甲对地面的压强之比为？</p><p>总算不用画图了……</p><h3 id="答案-3"><a href="#答案-3" class="headerlink" title="答案"></a>答案</h3><p>发现两次压力相同，所以只需要比较 $S_1$ 和 $S_2$ 即可。</p><p>由题得到物体均为正方体，则 $S = h^2$。</p><p>所以 $S_1 = h_1^2 = (\dfrac{p_1}{\rho_1g})^2 = \dfrac{p_1^2}{\rho_1^2g^2}$。</p><p>同理得 $S_2 = \dfrac{p_2^2}{\rho_2^2g^2}$。</p><p>$S_2 : S_1 = \dfrac{p_2^2}{\rho_2^2g^2} : \dfrac{p_1^2}{\rho_1^2g^2} = \dfrac{p_2^2\rho_1^2}{p_1^2\rho_2^2}$。</p><p>别忘了求的是压强之比，还要再交换一次分子分母位置，最终答案为 $\dfrac{p_1^2\rho_2^2}{p_2^2\rho_1^2}$。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>这种题大概就是列式子算吧……</p><p>如果哪一步卡着了，想一想题目中的条件有没有都用上，考虑一下是不是式子运算的时候展开的不够彻底，实在算不出来极限法也是一种选择。</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
          <category> 力学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文化课 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于一类简单的初中物理题</title>
      <link href="/2020/03/27/%E5%85%B3%E4%BA%8E%E4%B8%80%E7%B1%BB%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%9D%E4%B8%AD%E7%89%A9%E7%90%86%E9%A2%98/"/>
      <url>/2020/03/27/%E5%85%B3%E4%BA%8E%E4%B8%80%E7%B1%BB%E7%AE%80%E5%8D%95%E7%9A%84%E5%88%9D%E4%B8%AD%E7%89%A9%E7%90%86%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<p>水一篇文章。</p><a id="more"></a><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p>将比热容为 $c$ 的 $A$ 液体与比热容为 $4c$ 的 $B$ 液体按一定质量比混合，测得混合液的比热容为 $3c$，则混合液中 $A, B$ 两种液体的质量比为？</p><h3 id="正常做法"><a href="#正常做法" class="headerlink" title="正常做法"></a>正常做法</h3><p>设质量分别为 $m_{A}, m_B$，混合后的液体为 $C$。</p><p>由 $Q_A + Q_B = Q_C$ 得 $cm_A \Delta t + 4cm_B \Delta t = 3c(m_A + m_B) \Delta t$。</p><p>化简得 $m_B = 2m_A$。</p><p>质量比为 $1 : 2$。</p><h3 id="魔术"><a href="#魔术" class="headerlink" title="魔术"></a>魔术</h3><p>可能是我太菜了……</p><p>同班某位同学给了一种奇怪的做法，老师也没讲为什么正确，但是的确是对的。</p><p>十字交叉，得到 $4 - 3 = 1, 3 - 1 = 2$，答案为 $1 : 2$。</p><p>后来自己仔细想了一下，这个其实就是简化了化简的过程，正常做法中两边在约去 $c\Delta t$ 后为 $m_A + 4m_B = 3m_A + 3m_B$，移项可得到 $4m_B - 3m_B = 3m_A - m_A$，也就是十字交叉的方法了。</p><p>那么在什么情况下可以使用这种方法呢？</p><p>大胆猜想当满足 $a = \frac{b}{c}$ 且 $a = \frac{\Delta b}{\Delta c}$ 时可以用。</p><p>密度相关应该是可以用的，看今年中考会不会出吧。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>感觉自己好水啊，这都能写篇文章。</p><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>草，写这篇文章的第二天的自治区摸底考试真就考了密度的题。</p><p>题目：</p><p>甲物质的密度为 $3 \operatorname{g} / \operatorname{cm}^3$，乙物质的密度为 $8 \operatorname{g} / \operatorname{cm}^3$，各取一定质量的甲、乙混合后密度为 $5 \operatorname{g} / \operatorname{cm}^3$。假设混合前后总体积保持不变，则所取甲、乙两种物质的体积之比为？</p><p>十字交叉可得为 $3 : 2$……</p><h3 id="后后记"><a href="#后后记" class="headerlink" title="后后记"></a>后后记</h3><p>老师上课专门说了这个东西，说这个方法比出来的不知道是什么东西，所以不让我们用……</p><h3 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h3><p>挺迷惑的，这个东西好奇怪。密度比出来是体积比，体积比出来就是质量比了，搞不懂。</p>]]></content>
      
      
      <categories>
          
          <category> 物理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 思考 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于 OI</title>
      <link href="/2020/03/11/%E5%85%B3%E4%BA%8E-OI/"/>
      <url>/2020/03/11/%E5%85%B3%E4%BA%8E-OI/</url>
      
        <content type="html"><![CDATA[<p>没有 AFO。</p><a id="more"></a><p><img src="https://i.loli.net/2020/03/12/46BqCaYxMNHyL2I.png" alt="IMG_1162.PNG"></p><p><img src="https://i.loli.net/2020/03/12/zbE3FhBNte5jVMY.png" alt="IMG_1163.PNG"></p><p>我会一直走下去的。</p><p>我希望能成为永远的 OIer。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 随笔 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>『sola』 观后感</title>
      <link href="/2020/03/09/%E3%80%8Esola%E3%80%8F-%E8%A7%82%E5%90%8E%E6%84%9F/"/>
      <url>/2020/03/09/%E3%80%8Esola%E3%80%8F-%E8%A7%82%E5%90%8E%E6%84%9F/</url>
      
        <content type="html"><![CDATA[<p><meting-js    id="004PBlEk0Ibd8q"    server="tencent"    type="song"><br></meting-js></p><a id="more"></a><p>感觉是一部很冷的番吧…</p><p>集数不多，正片只有 13 集，但是却讲了一个既带有奇幻色彩又具有纯爱剧情的故事。</p><p>看到最后女主之间的争论，个人感觉无非是针对是否需要维持真相的争论。</p><p>苍乃和依人原本都去世了，可是在茉莉的操作下，苍乃变成了夜祸。</p><p>苍乃因为对弟弟太过思恋，利用夜祸的力量，做了跟原本弟弟一样的纸片人（真 纸片人）。</p><p>也就是说，这对姐弟原本应该死去，却因为夜祸的力量以另一种方式存在于世界上。</p><p>到最后，茉莉想要一种力量把苍乃恢复成人类，但是这样依人就会消失。</p><p>但其实茉莉也可以把自己恢复成人类。</p><p>苍乃认为，自己已经创造出了依人，可以两人一起这样生活下去，跟是否是人类没有关系。</p><p>而茉莉和依人则认为应该让一切恢复真相。</p><p>而我认为苍乃是正确的，如果最后真相是这样的，那是否是真相又有什么关系呢？就像火影中的无限月读那样，如果能无限制的活在梦境中，那和在真实世界又有什么区别呢？所以我一直认为对于这类事情，真相是毫无意义的。</p><p>如果茉莉不出现，那么苍乃或许就可以和弟弟永远一起生活，依人也不会发现自己是苍乃创作出来这一点事实，大家都过的是美好的生活。</p><p>可是茉莉告诉了依人，你就是个纸片人，你原本早死掉了。</p><p>上面说的都是我个人情感上的话语，但是仔细思考一下，从剧中可以很明显看出茉莉对于依人的感情，是发自内心真挚的喜欢。</p><p>最后战斗的时候，穿插了许多三人在过去一起生活的日子，或许茉莉认为那些日子才是真实的，才是她脑海中真正的依人和苍乃的样子吧。</p><p>所以茉莉做错了吗？她做错了。她复活了原本应该死去的苍乃，才造成了后面这些事情的发生。</p><p>但也是她，又把一切恢复了原样。</p><p>在这个过程中，她才是最痛苦的。忍受了几百年里孤身一人的痛苦，原本可以让真相就此隐去，结果选择了对她来说结果最差的一种道路。</p><p>剧中的配角的故事也并不失色，大叔和萝莉在剧中出现的场景经常让人忍俊不禁，但是背后的故事也会让人感动。纵使萝莉变成了夜祸，大叔也还一直坚守着对她的感情直到最后。</p><p>配角还有一个路人妹子真名，从剧中也能看出喜欢着依人，但是这里又玩了一个跟 Clannad 相似的套路。</p><p>随着苍乃力量的逐渐消失，依人的存在逐渐被抹去。甚至到最后，原本的房子都只剩下了几张纸片。</p><p>这个套路真的是用一次让人落泪一次。</p><p>而真名并不知道这一点，以至于她隐隐约约感受到这些事情的时候，向其他人不经意提起的时候，其他人都忘记了依人的存在。在感到事情不对劲时，她赶到依人最常出现的地方，还好，依人还在那里，看着被夕阳染成火红色的天空。</p><p>可是一切都已经无法挽回了，依人对他撒了谎，称自己不会这样消失。</p><p>然而当真名醒来时，只剩下了她一人。而她自己，也忘记了依人的存在。</p><p>那天晚上也就是故事的结局。</p><p>这一切发生之后，除了苍乃，其他人的生活都恢复了原样，依人就像从未出现过一样，而苍乃则是成为了正常的人类，也正因为此，苍乃原本的存在也消失殆尽。</p><p>若干时间后，当苍乃再次看到那些她曾经的朋友时，她心中也会感到唏嘘吧。</p><p>连接这一切的，只有永远的天空（そら，sola，其实应该是 sora）。</p><p>回到最开始，天空这个意象一直穿插在全剧中，究竟意味着什么呢？</p><p>天空，永远存在于世上，不会消逝，注视着地上的人们，和不是人类的人们。</p><p>可能代表着的，就是人与人之间的爱恋和不会被时间磨灭的羁绊吧。</p><p>看完了这部番其实还是挺懵的，不过在 07 年那个神作繁出的时代都能获得不错的评价，也是一个证明吧…</p><p>另外这作画实在是有点崩…</p><p>最后放一下 ED 吧：</p><p><meting-js    id="003xjaXP0W4i6H"    server="tencent"    type="song"><br></meting-js></p>]]></content>
      
      
      <categories>
          
          <category> 动漫 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[SPOJ1437] PT07Z - Longest path in a tree</title>
      <link href="/2020/03/05/SPOJ-1437-PT07Z-Longest-path-in-a-tree/"/>
      <url>/2020/03/05/SPOJ-1437-PT07Z-Longest-path-in-a-tree/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/SP1437" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个 $n$ 个点的树，求出树上任意两点间的最长距离。$1 \le n \le 10^4$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>树的直径的模板题。</p><p>首先考虑较简单的情况，当树是一条链时，直接求出离根最远的点即可。</p><p>拓展到树不是一条链的情况，利用贪心的想法，求出离根最远的点和离根第二远的点，设 $f(i)$ 为离 $i$ 最远的点的距离，$g(i)$ 为离 $i$ 第二远的点的距离，则最终答案为 $\max(f(i) + g(i))$。特别的，如果树是一条链，则$g(i) = 0$，因为并不会有第二远的点。</p><p>时间复杂度 $O(n)$。</p><p>另外还有一种需要两次 dfs 的做法：第一次 dfs 求出离树根最远的点，第二次 dfs 求出离第一次 dfs 求出的点最远的点。这两点间的路径即为树的直径。<del>这种做法好像简单一些</del></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; edge[<span class="number">10010</span>];</span><br><span class="line"><span class="keyword">int</span> dis1[<span class="number">10010</span>], dis2[<span class="number">10010</span>];</span><br><span class="line"><span class="keyword">int</span> n, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> pa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : edge[x])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i != pa)</span><br><span class="line">        &#123;</span><br><span class="line">            dfs(i, x);</span><br><span class="line">            <span class="keyword">int</span> dis = dis1[i] + <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">if</span> (dis &gt; dis1[x])  dis2[x] = dis1[x], dis1[x] = dis;</span><br><span class="line">            <span class="keyword">else</span>    <span class="keyword">if</span> (dis &gt; dis2[x])  dis2[x] = dis;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    ans = <span class="built_in">std</span>::max(ans, dis1[x] + dis2[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        edge[u].push_back(v), edge[v].push_back(u);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
          <category> 树的直径 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SPOJ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[POI2008] STA-Station</title>
      <link href="/2020/03/05/POI2008-STA-Station/"/>
      <url>/2020/03/05/POI2008-STA-Station/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P3478" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个 $n$ 个点的树，找到树上一点使得当这一点为根时所有点的深度之和最大，$1 \le n \le 10^6$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>设 $f(i)$ 表示当根为 $i$ 时所有点的深度之和。</p><p>首先预处理出每个点的子树大小和 $f(1)$。</p><p>思考对于树上任意两个相邻的结点 $u, v$，当树根从 $u$ 转移到 $v$ 时的影响。</p><p>显然，$v$ 的子树内所有点的深度 $-1$，其他所有点的深度 $+1$。</p><p>也就是说，$f(v) = f(u) - \operatorname{siz}(v) + n - \operatorname{siz}(v) = f(u) - 2\operatorname{siz}(v) + n$。</p><p>时间复杂度 $O(n)$。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>可能是我自带大常数？？这份代码并不能在洛谷上拿到满分。有时间把建图方式改成链式前向星吧…</p><p>然后注意输出的是点的编号不是深度之和……</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;<span class="keyword">int</span>&gt; edge[<span class="number">1000010</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> f[<span class="number">1000010</span>];</span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> max;</span><br><span class="line"><span class="keyword">int</span> siz[<span class="number">1000010</span>];</span><br><span class="line"><span class="keyword">int</span> n, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> pa, <span class="keyword">int</span> dep)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    siz[x] = <span class="number">1</span>, f[<span class="number">1</span>] += dep;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : edge[x])</span><br><span class="line">        <span class="keyword">if</span> (i != pa)</span><br><span class="line">            dfs(i, x, dep + <span class="number">1</span>), siz[x] += siz[i];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs1</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> pa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">auto</span> i : edge[x])</span><br><span class="line">        <span class="keyword">if</span> (i != pa)</span><br><span class="line">        &#123;</span><br><span class="line">            f[i] = f[x] + siz[<span class="number">1</span>] - siz[i] * <span class="number">2</span>, dfs1(i, x);</span><br><span class="line">            <span class="keyword">if</span> (f[i] &gt; max)    max = f[i], ans = i;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">register</span> <span class="keyword">int</span> i = <span class="number">1</span>, u, v; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        edge[u].push_back(v), edge[v].push_back(u);</span><br><span class="line">    &#125;    </span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    dfs1(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 树形 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[洛谷 P3353] 在你窗外闪耀的星星</title>
      <link href="/2020/03/03/%E6%B4%9B%E8%B0%B7-P3353-%E5%9C%A8%E4%BD%A0%E7%AA%97%E5%A4%96%E9%97%AA%E8%80%80%E7%9A%84%E6%98%9F%E6%98%9F/"/>
      <url>/2020/03/03/%E6%B4%9B%E8%B0%B7-P3353-%E5%9C%A8%E4%BD%A0%E7%AA%97%E5%A4%96%E9%97%AA%E8%80%80%E7%9A%84%E6%98%9F%E6%98%9F/</url>
      
        <content type="html"><![CDATA[<iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=330 height=86 src="//music.163.com/outchain/player?type=2&id=22712173&auto=0&height=66"></iframe><h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P3353" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：求一个序列中给定区间长度的最大区间和。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>这道题应该是 POJ 2482 的简化版，原题是二维的。</p><p>前缀和裸题，枚举端点进行统计。</p><p>主要是这个题面比较好。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">100010</span>], f[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, w, ans;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n), read(w);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x, b; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(x), read(b);</span><br><span class="line">        a[x] += b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100000</span>; ++i)   f[i] = f[i - <span class="number">1</span>] + a[i];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = w; i &lt;= <span class="number">100000</span>; ++i)   ans = <span class="built_in">std</span>::max(ans, f[i] - f[i - w]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="题目背景"><a href="#题目背景" class="headerlink" title="题目背景"></a>题目背景</h3><p>Fleeting time does not blur my memory of you. Can it really be 4 years since I first saw you? I still remember, vividly, on the beautiful Zhuhai Campus, 4 years ago, from the moment I saw you smile, as you were walking out of the classroom and turned your head back, with the soft sunset glow shining on your rosy cheek, I knew, I knew that I was already drunk on you. Then, after several months’ observation and prying, your grace and your wisdom, your attitude to life and your aspiration for future were all strongly impressed on my memory. You were the glamorous and sunny girl whom I always dream of to share the rest of my life with. Alas, actually you were far beyond my wildest dreams and I had no idea about how to bridge that gulf between you and me. So I schemed nothing but to wait, to wait for an appropriate opportunity. Till now — the arrival of graduation, I realize I am such an idiot that one should create the opportunity and seize it instead of just waiting.</p><p>These days, having parted with friends, roommates and classmates one after another, I still cannot believe the fact that after waving hands, these familiar faces will soon vanish from our life and become no more than a memory. I will move out from school tomorrow. And you are planning to fly far far away, to pursue your future and fulfill your dreams. Perhaps we will not meet each other any more if without fate and luck. So tonight, I was wandering around your dormitory building hoping to meet you there by chance. But contradictorily, your appearance must quicken my heartbeat and my clumsy tongue might be not able to belch out a word. I cannot remember how many times I have passed your dormitory building both in Zhuhai and Guangzhou, and each time aspired to see you appear in the balcony or your silhouette that cast on the window. I cannot remember how many times this idea comes to my mind: call her out to have dinner or at least a conversation. But each time, thinking of your excellence and my commonness, the predominance of timidity over courage drove me leave silently.</p><p>Graduation, means the end of life in university, the end of these glorious, romantic years. Your lovely smile which is my original incentive to work hard and this unrequited love will be both sealed as a memory in the deep of my heart and my mind. Graduation, also means a start of new life, a footprint on the way to bright prospect. I truly hope you will be happy everyday abroad and everything goes well. Meanwhile, I will try to get out from puerility and become more sophisticated. To pursue my own love and happiness here in reality will be my ideal I never desert.</p><p>Farewell, my princess!</p><p>If someday, somewhere, we have a chance to gather, even as gray-haired man and woman, at that time, I hope we can be good friends to share this memory proudly to relight the youthful and joyful emotions. If this chance never comes, I wish I were the stars in the sky and twinkling in your window, to bless you far away, as friends, to accompany you every night, sharing the sweet dreams or going through the nightmares together.</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 前缀和 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 洛谷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[AHOI2008] 紧急集合</title>
      <link href="/2020/02/28/AHOI2008-%E7%B4%A7%E6%80%A5%E9%9B%86%E5%90%88/"/>
      <url>/2020/02/28/AHOI2008-%E7%B4%A7%E6%80%A5%E9%9B%86%E5%90%88/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P4281" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个 $n$ 个点的树，有 $m$ 次操作，每次给定三个点，求树上所有点中离三个点距离和最小的点和距离。$1 \le n, m \le 5 \times 10^5$。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先有一个画图之后显然的结论，所求的点一定是这三个点两两求 LCA 中的一种，并且一定有两个 LCA 是同一个点，我们要求的答案则是第三个点。</p><p>然后思考如何求出距离。采用差分的思想，我们已知每个点的深度，那么就可以加加减减求出这三个点离 LCA 的距离了。</p><p>附上一张图吧：</p><p><img src="https://i.loli.net/2020/02/28/MBl8JAWEmPnSgfV.png"></p><p>现在假设我们要求 $14, 6, 5$ 的 LCA，从图上可以显然看出 LCA 分别为 $2, 5, 2$。从这个例子就可以显然的看出我们应该选不同于另外两个点的那个点。</p><p>三个点的深度分别为 $5, 3, 3$，LCA 的深度分别为 $2, 3, 2$，最终答案为 $2 + 0 + 2 = 4$。</p><p>多找几组数据的规律，再结合人类智慧，可得出答案为 $\operatorname{dep}(a) + \operatorname{dep}(b) + \operatorname{dep}(c) - \operatorname{dep}(\operatorname{LCA}(a, b)) - \operatorname{dep}(\operatorname{LCA}(a, c)) - \operatorname{dep}(\operatorname{LCA}(b, c))$。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, next;</span><br><span class="line">&#125; edge[<span class="number">1000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> f[<span class="number">500010</span>][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> dep[<span class="number">500010</span>], head[<span class="number">500010</span>], lg[<span class="number">500010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, cnt, p, c;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> u, <span class="keyword">int</span> v)</span> </span>&#123; edge[++cnt] = (Edge)&#123;v, head[u]&#125;; head[u] = cnt; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">int</span> now, <span class="keyword">int</span> pa)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    dep[now] = dep[pa] + <span class="number">1</span>;</span><br><span class="line">    f[now][<span class="number">0</span>] = pa;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= lg[dep[now]]; ++i) f[now][i] = f[f[now][i - <span class="number">1</span>]][i - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = head[now]; ~i; i = edge[i].next)</span><br><span class="line">        <span class="keyword">if</span> (edge[i].to != pa)</span><br><span class="line">            dfs(edge[i].to, now);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lca</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dep[x] &lt; dep[y])    <span class="built_in">std</span>::swap(x, y);</span><br><span class="line">    <span class="keyword">while</span> (dep[x] &gt; dep[y]) x = f[x][lg[dep[x] - dep[y]] - <span class="number">1</span>];</span><br><span class="line">    <span class="keyword">if</span> (x == y) <span class="keyword">return</span> x;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> k = lg[dep[x]] - <span class="number">1</span>; k &gt;= <span class="number">0</span>; --k)</span><br><span class="line">        <span class="keyword">if</span> (f[x][k] != f[y][k])</span><br><span class="line">            x = f[x][k], y = f[y][k];</span><br><span class="line">    <span class="keyword">return</span> f[x][<span class="number">0</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)    lg[i] = lg[i - <span class="number">1</span>] + (<span class="number">1</span> &lt;&lt; lg[i - <span class="number">1</span>] == i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x, y; i &lt; n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(x), read(y);</span><br><span class="line">        addEdge(x, y), addEdge(y, x);</span><br><span class="line">    &#125;</span><br><span class="line">    dfs(<span class="number">1</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">while</span> (m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, y, z;</span><br><span class="line">        read(x), read(y), read(z);</span><br><span class="line">        <span class="keyword">int</span> p1 = lca(x, y), p2 = lca(x, z), p3 = lca(y, z);</span><br><span class="line">        <span class="keyword">if</span> (p1 == p2)   p = p3;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">if</span> (p1 == p3)   p = p2;</span><br><span class="line">        <span class="keyword">else</span>    p = p1;</span><br><span class="line">        c = dep[x] + dep[y] + dep[z] - dep[p1] - dep[p2] - dep[p3];</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d %d\n"</span>, p, c);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="吐槽"><a href="#吐槽" class="headerlink" title="吐槽"></a>吐槽</h3><p>这题是不是恶评啊，怎么洛谷上是个紫题啊。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 树上问题 </category>
          
          <category> LCA </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AHOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[POJ3299] Humidex</title>
      <link href="/2020/02/25/POJ-3299-Humidex/"/>
      <url>/2020/02/25/POJ-3299-Humidex/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://poj.org/problem?id=3299" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：看不懂</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>看不懂题，这描述的好像是什么温度相关的东西，对我这种物理学渣仿佛天书一般。</p><p>关键是题目中给的公式，然后按照这个公式套就行了。</p><p>C++ 中的 <code>math</code> 库里有 <code>exp</code> 函数和 <code>log</code> 函数，直接用就行。</p><p>还有这神奇的 POJ，同样的代码 G++ 是 WA，C++ 就是 AC…</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> t, d, h, e;</span><br><span class="line"><span class="keyword">char</span> q, w;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; q &amp;&amp; q != <span class="string">'E'</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        t = d = h = <span class="number">114514</span>;</span><br><span class="line">        <span class="keyword">if</span> (q == <span class="string">'T'</span>)   <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">if</span> (q == <span class="string">'D'</span>)   <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; d;</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; h;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; w;</span><br><span class="line">        <span class="keyword">if</span> (w == <span class="string">'T'</span>)   <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">if</span> (w == <span class="string">'D'</span>)   <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; d;</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; h;</span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">114514</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            e = <span class="number">6.11</span> * <span class="built_in">exp</span>(<span class="number">5417.7530</span> * ((<span class="number">1</span> / <span class="number">273.16</span>) - (<span class="number">1</span> / (d + <span class="number">273.16</span>))));</span><br><span class="line">            t = h - <span class="number">0.5555</span> * (e - <span class="number">10.0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>    <span class="keyword">if</span> (h == <span class="number">114514</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            e = <span class="number">6.11</span> * <span class="built_in">exp</span>(<span class="number">5417.7530</span> * ((<span class="number">1</span> / <span class="number">273.16</span>) - (<span class="number">1</span> / (d + <span class="number">273.16</span>))));</span><br><span class="line">            h = t + <span class="number">0.5555</span> * (e - <span class="number">10.0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            d = <span class="number">1</span> / ((<span class="number">1</span> / <span class="number">273.16</span>) - ((<span class="built_in">log</span>((((h - t) / <span class="number">0.5555</span>) + <span class="number">10.0</span>) / <span class="number">6.11</span>)) / <span class="number">5417.7530</span>)) - <span class="number">273.16</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"T %.1lf D %.1lf H %.1lf\n"</span>, t, d, h);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 水题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> POJ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对不起</title>
      <link href="/2020/02/20/%E5%AF%B9%E4%B8%8D%E8%B5%B7/"/>
      <url>/2020/02/20/%E5%AF%B9%E4%B8%8D%E8%B5%B7/</url>
      
        <content type="html"><![CDATA[<div id="hexo-blog-encrypt" data-wpm="密码很长且我不经常使用，请不要在我没有告诉您密码的情况下再做没有意义的尝试。" data-whm="OOPS, these decrypted content may changed, but you can still have a look.">  <div class="hbe-input-container">  <input type="password" id="hbePass" placeholder="" />    <label for="hbePass">请输入密码：</label>    <div class="bottom-line"></div>  </div>  <script id="hbeData" type="hbeData" data-hmacdigest="7a96ab17d242828e307b62151b373fe9c8b4bfce70774ad59d3a37678e3e8ef9">3c8651b128e732e795cfa74dc8fee44a843b81d366263c7e6901cd8fe39a05eb0c4a4c78a5a2aad5650183a94b68acc2476b060abb67d89cae033b945e619c0d841f2818de3aaff966c45da366a2e85c4c2be624cc947119d6b4d289807f77ea1175a95e1acdec9c90ebf0f655356d4d4653465abbc4d716675c8ead4c93224abc3cfaf9ca525811fe34d7f92d1ad4cf4912e96addb8b192e9ff9d39f5c37715b2ea66bac6d58b312370879ba5892acb200a822af19c43ca657a44803a72bad5519120693b4f03fd8e68d1e98471fd6b835189a534430c8b4d753071ad0c4dcf189b2ab40edda7c8edbc09b763dc760f6f6c2608faedd82ccfe0d9eb907cf2be1c97be11bbddb077e993770a80c81ea18345c65ef07e929fee7959f61ea646142669a7fdc3a7670f1218fc771df3e93984c9f60905ef8de9f495018a2be7b61ccfcaa02fea861ef00f221782b9e6f5f1ac53a6fb2162c5ecdeed64aa598c78d1b43eef44ec4f79f22dd36be413d2b610f65ffdc5c1ab1b6452673925170a80f870b07590ec431bf089943f69cf042bab02106ea63409f69bc2625262388d005442442807850f6d54d8b5cfe10679bed712a1187f85437b551b627e412dd2a0f3b556fd4bbf40b9620ed6ca438f68b6d707bb5a2683bc90e44f87f9d8cbbb7211c65c60f29da976a60542c5f98c80d3872f6b1c368ed5d54a710742b94398783e2366bdf17b0676f020573ef012cbb62598c5a83fca4353ae5f6339b99fe87f9f616c54c8675befe8045875007c6989881a97ecfd41537eaa490d39911baa6656af1f1c8cc62f8650cfb3f198b1d3b84c08cf774f4ee53d2586a408d292d682c26cb8b044fc391f2aa2ff5368179cff326428b12033b37ba52c638053c984449e621f33b6370ecf7b4fab2129effbc147e74e815270af097b9a4f9d71415b78363890cd4a049d101433f39e24f6f6732091eecc606dbeffa5103efb8fe2b572aed3b67d5af81b3a28ed70c5290deea1bdf5ac25facf53c05b4ac14e709dbc684c56428c5f70aa9501398dc98de1b462a71ea4436ecb006c7ebce9d7d39ff2003652f9ecd102e2406e60f9902de85dd1fdaa43a4933a8b04268c48dc278b5b37569a7ca99b6365e403f637b8b140efd5f17b9ec5b3fd2d7ef5d6aaed672f6380716692daca95cb18c4dc25edd87a5b8c27e009ebdac429baa82fbf52d0ebdeec8d17949898a187cf2bf12b7c2949549931471940601cd0646903243cd8fb5f1606c60691a7f02bb3c69308891197d66b55a303ece236382f3c49de8eabd9c87c0e81550bfed716c08405a352c829dc6f46437a9ed5db4109091a24d1a0aa962b92e08b75770c0ac1f6873d4c1692efcc26d5d0282898034b0413c113516e12a41cab97798912d968bc97531c8c060351687db6d691dc1984138dcf96da9a10c347040a798772974f7ba0bb6cfa1ec9bcab5871ef1485ff2e71a0f357a7c6a81a1b222f0ad5a2a29bc97ce83886be2a292f25ccbe98c6e858eab441e01c3715ed1a9a539ee70a20dfd04642d3594967b09546e5279fe3b2e650784f33dbe706963506dd17fbd6665af6f99bb75e5ac4b58887bf2b48cf5d9bea3e13d0782a9a27f0913f809b25080ab8c5053d1370e005d597f5402477586ff2cb321202c3a68b5ed01ac8ca7f788ee78cda60297933deafc7767291bfb8e9a06b9c21189bbff0875b4b99c789c1dae64cdba474722663b4bedea3110c9fd3354802fff01e4d3fdd704b6eb10493daf18d2496ae5aef97197f6a1098c930dc0e2dd8c5f32d9d7e827e801cd9f8064252b484d61266aff67728a203c45d6209dc55d57540dbb02928ae21e58d1a9b381d67c2f382417768e8d5423591ef5cc302f99b86e51f515b3c5cd32343208837251f35d2fb96dbbd47f1988c59e3bf956fed3f6e0ac071d360cd53602ea1cfe72ca5e3d0150926a8c9fd17dd0f87f91af1e0adb002f00ff128855f906ec23ce847bf640d8bd2fad368fb231b528c5b416cabd543ddde351ac48c74f3f3dbdc55743334e605623042c085628638670d751f2d674ab4fd5e906521caf1d1e2c1435d014e9349ace7eafb341e54f938237888093abb4f2863c0cbc8df5b5793214f7458b55e7afec389d4e73dadf461178d43d2a555a85cd3c99999697b80602a2b6c1bf8096aede655ddb3215fa38bf9aaf482da7478548f3e151dbb101a756a62f385fdc356d1b7280cec8ef801124b16f98812a15b4708e345b96cc5b29a4d6e0a7ddbbd24ec957621c03d5697f5c3526ea1177ea753b9b0dd453ae2b75021ee4388d7d2108928d4971cec5472ddc284bd4325a5fc132b67b86cb0bc925a4ea113a0b7692835bf4d06b72507c1232fda344c69de732aca8205cdf62b3249b1ad1ab5d62711471fb170f893e0732c2c42521e74d9745100f2fc551506a07f734594b8b468e965f0642d0459ad70449cb1b4aa32559d286462306d66a536b89f650962af26985cc82c89651520dab9083a842f4dc5bd972074188b9f42b76ea3b26393203da7ca734159e093ea52689f4bcd3051af4772e4e13e75d4d6082e68e5837f318d9b424c300ef49e59e46a4b228cace3cedb38b1f9f5652871a19ca6cb211c444a8193336f09a1ec85cbd02cc3e22988f25a864d111bb0af008cb4b47e6728a41359d6a14198b2cdbba0f2917a4b7372d9d17d7034b650fedda518f8eea10b7961a27d9c0786051c014620f32f43341a5fb41457d8940cad7d9ba99d396c2c15e1ecc30560eead12faf6b8a98999938a9ed7ac82e23ec5b85e4f0b3850af422d5b429b06c79f5a9f162eba0b3f5258c56154ace4d1cbdb933c5fdbb8b0cb3dc51eb80ff79caa15527a623744cd5f9a9af250fd204ae06db563100a9e325178760be2788f36c3c6fd2068f651b85f41ba158d637e059ba1899950639cc5adc2e06fdf728751a660b57bb3bc9ff4bace26b8f160eb69b3de77ec33a21621a98bcfaf3461be45fe6658498771abf50407080a0a89763d1495754bb3dc1b9316fe7a1c61f28255dd157bdec7560a953dc04f13b730f680d2300fb0d4b22656e3d1449386b43d07902d020b341e8f851d179500f1241e8d27fca0e0d395d1d97acc544c5feb7fdd19f029ab2e13783f86097a475c0fe269004a8886f17a38803dac52d2168a8ddbc80ef9910f0138308d4962209809ce3bb6af9e0f891f3dea77aa71d41b11e1ea055256540893353ac10c709c0ee0ac2aba9086121b56c0839b19f663055ffc19eeb20c843ab1aa1c524aa84a50b666d52c1b0e1bcd787840921d3a583de843dee9955edd816f7138af3ef61a7cd036b892fc10b3a90a0e063d3e20225831a8290472b2315c7628ed64da66cc38fcd75612040672c7f126d3ae00aa8ba21d126175f5ca24defcd4dfe228a6c932c06fdb2e409f942cd3dbf117f286cc958006b046b7d735df32b73006abee9dc0121d393acc45430f7f90ae0818a0afcf2d7119a2663319f3213f0cb7d7d55baf7bacca3c8b696052a0d25bc810fd328fbecf37d66527aaa654aee4a8e659d9a06cf75f339c884346d189379b371e4a40c24f1843474ce4f3ec7e11c5921283cb96da633e6c19a025d54a433e65493ed8065368aa2a2d291070b932b61db08f4b035c1400ded1f8587d5a3219591bd6f8632db9f32acc2346365569de80069c5c46640d53a2edafe633a5d6d44397050598378efa1fbe5be7d3afd3fb8d2d484e16d4d621ce9e1a76571a25969192076f00d8ff37d8086ed5e35dfc629a3c2d39ac0e1cd57729009e1453ea0de98a8835e475d22b34d9a4fb21f59f070ddcbb1866ec662d4d19442ee3f2253db45638ea36a7eac75f768e947cd68f45c6c11d3d2a76f6d53a72ab551d6749158b671b2342ac349267fb7f263fda86d195f719af54e8a6773ba23f6a602bc7825baf102611ed4d8c453468e2af58503604587d2a89247b424e05a8fffbd36690cdc8c569e106c0ddb932ffa86396b42386e3079a766653931932661b66868f6c47fa22a24052ab7683fb4c1ef6d032f1f93220e0086634991146a7e29d9337757814df0d7f9597a8e2ea79434c002385ddee69dd807d256d8c2b740698cbe1701ecdff8485dfd219511636f89d3a30ae439bc57da15cb2af7de4285fb2ae6f3161bebfd94d08f096cc1341856689370bd7b28306b6e3ac2868d82c3b50f8873da7ee26b5be0517cdb230adfbf3336070f0663108ed8c368dd7a6fecc33aaf674f22c9c4fcf0631614d1d5f518b427843743d19fbc6d4c7062b7ceff4749a2be7abf683a25669a86171272e09cf1a396d45da0ed4eadd9c77f228375076a230a9e32c1a400e6f4d5f28eac8fc263b3a7a8fbac3a29c8a305944102d33c70638b4e5b761eb067dd7e62bf3a9584920beb4275e8d41a72fcb5e159971be5f8a0dda73dfaa697968a6a68568f42de0e22580e48856f0d64f00ba243d2d661ac0df9c10d096eeac1bdc13d3b1e2684e6c249ef8e2ad623132fafcf2ec71b05ec7164cebd1374f0b15a6b595fc3c6eebf0ef11fb83b79a25fcd1460ea21451b07931d67deecad07f02fcb1e6a3c0c5640188a33ea5e7b790f25b140f2791ba469010fb942d50be316214507872c037c21d8dbccfe3a4bdf46ce2554e67c322ffcf75ad459a59cc909b486367066f5820f4f903089b260f724379b2243b80a03bd0ee9863140818092bab9d55f1b786b84a1185c5bceceafe442fbef098db785b208cad1a815838da4f9314d49bd23cb69bfc754c98fd84a7d42e273c19a3aa8afdd317f6fcbdc6cd37f969a5b962da70faa132c54ef8fd49b09ee2a4227c6766d2a379fa8f367c4c41bbc62318e8ce9a2972274078b8a825ef7c315ce207e51d9b2f7d40d9f005c7aad4f8f0d03de3da23648d510ec1460a6715d0b2b96a052ae8e08cd5b499a9e4f3f4b955571ea1201efa8c8e5e21729bf1b75561fc523be1a7bb20461639f4d5a40003e45d6a0be6997d743d93cedb40839a4ef1da96b89b612caadde87389f9a50af85091257ff3ecd65a2d18afab4be65d2febfaa5c5687a6ab7632abeb35157404f37a4f8b3fcfd2d35489cbf7a9877b65bd7bda67dce96fbaf9a98213e49ac5be51263321f495a21e64d871d15f74d889e52a1beaed798806453437c3568a2ed19694d8c05b0498a2e4eb4800952253f5308483691a48a9f73de348d082d4bb6a9f59804c9142ea0f1aa25ad1a3811b0899d8bb5b6bbad5ba458b50ffb14b8e041f3c9e17e6d63d4ec0df88c0dccb3ceb9d08b5cc3d430a422a0979b6fe36e9f9a7c706df6cec6faea9e1d8d0ca74db67b0d5b2837c405631fa8414afc2d021128c0af8996960e7446993a1a46c25995364408c30a2d1de6dcc2706f61db02f1b8a104162bd38e69c8e1f06d8ef4f42f6b679d0706076dd5dd6b872503e6ab6eea867cb6bfebaf4f057fa9b73f28eb3307efcb3674b58398495671d96058156235fb297b795dfa513185cc8f660e8aaa83276f051ea4405555e36e706c115650f78bdfc39a9df69c31ffe071cd19f42cbbd08a1fa222c47166f15d5d406e682b37</script></div><script src="/lib/blog-encrypt.js"></script><link href="/css/blog-encrypt.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 人生 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 随笔 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>树状数组学习笔记（一）</title>
      <link href="/2020/01/18/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/"/>
      <url>/2020/01/18/%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>树状数组是一种实现较简单的数据结构，但只能维护满足前缀性质的信息。</p><a id="more"></a><h3 id="思想"><a href="#思想" class="headerlink" title="思想"></a>思想</h3><p>树状数组（Binary Indexed Tree）跟线段树有某种异曲同工之妙。</p><p>假设现在有一个有 16 个元素的数组 <code>a</code>。</p><p>那么对应的树状数组 <code>c</code> 就是这个样子：</p><p><code>c[1]</code> 管理 <code>a[1]</code>，<code>c[2]</code> 管理 <code>a[1]</code> 和 <code>a[2]</code>，<code>c[3]</code> 管理 <code>a[3]</code>，<code>c[4]</code> 管理 <code>a[1], a[2], a[3], a[4]</code>，……</p><p>我们知道，任意整数都可以表示为任意个 2 的 $n$ 次方的和，那么我们也可以用 <code>c</code> 数组存储一些数字的和。</p><p>所以，当 $x$ 为奇数时，<code>c[x]</code> 管理的就是 <code>a[x]</code>。如果 $x$ 为 2 的整数次幂，那 <code>c[x]</code> 管理的就是从 <code>a[1]</code> 到 <code>a[x]</code>。如果是第三种情况呢？那 <code>c[x]</code> 管理的就是上一个为 2 的整数次幂的下一个元素到当前元素。</p><p>现在以区间和为例，假设我们要求区间 $[5, 13]$ 的和：</p><p>首先我们求出从第一个元素到第 13 个元素的和：我们先查询 <code>c[13]</code>。</p><p>欸？它好像只管理 <code>a[13]</code> 一个元素？那就顺着这个往前寻找，找到 <code>c[12]</code>。</p><p>emmm…<code>c[12]</code> 管理的是 <code>a[9]</code> 到 <code>a[12]</code>，加上，继续向前寻找，找到了 <code>c[8]</code>。</p><p>哇，8 是 2 的 3 次方，<code>c[8]</code> 管理的是 <code>a[1]</code> 到 <code>a[8]</code> 欸，加上，我们就完成了求从第 1 个元素到第 13 个元素的和的操作。</p><p>同理，我们可以求出从第 1 个元素到第 5 - 1 = 4 个元素的和，用前缀和的思想，把两数相减，我们就求得了答案。</p><p>那修改操作呢？</p><p>假设我们要修改 <code>a[11]</code> 的值，显然，我们需要修改 <code>c[11], c[12], c[16]</code> 的值。</p><p>好像挺有规律的？</p><p>换个点，修改 <code>a[6]</code> 的值，那我们需要修改 <code>c[6], c[8], c[16]</code> 的值。</p><p>可以看出，我们要知道离它最近的 2 的整数次幂的位置或者离它最近的偶数的位置，然后就好修改了。</p><p>知道了这些，我们就可以写代码了。</p><p>是吗？</p><p>我们知道了主要思想，但是我们怎么才能求出离它最近的 2 的整数次幂呢？换句话说，怎么才能知道这个<strong>距离</strong>呢？</p><p>在这之前，我们需要了解一些二进制相关的知识。</p><p>现在，我们以 10 为例。我们已经知道了，答案是 2。</p><p>这里直接给出方法，很短，但很富有智慧：</p><p><code>x &amp; -x</code>。</p><p>10 的二进制为 1010，而 -x 为 0110。</p><p>这又是为什么呢？</p><p>这就要涉及到计算机中编码存储的相关知识了，更加复杂，我们只需要知道这个式子的作用就行了。它返回的是 x 的二进制从右往左数第一个 1 的位置加上其左边的 0 后组成的二进制数所对应的十进制数。</p><p>即 $1010 \And 0110 = 0010$，对应的就是 2，我们要的答案。</p><p>另外吐槽一句，不知道这个 <code>lowbit</code> 是谁最开始说的，歪果仁好像并没有这种说法，直接写 <code>x &amp; -x</code>……</p><p>再说一句，这里面也有一些倍增的思想。</p><p>于是我们可以开始写代码了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>每次修改，然后加上当前位置的 <code>lowbit</code> 值。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (x &lt;= n) <span class="comment">// 保证范围不要越界了</span></span><br><span class="line">    &#123;</span><br><span class="line">        c[x] += k; <span class="comment">// 修改能管理到 a[x] 的 c 数组的对应位置</span></span><br><span class="line">        x += lowbit(x); <span class="comment">// 加上距离</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="构造"><a href="#构造" class="headerlink" title="构造"></a>构造</h4><p>相当于对每个点单点修改。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x; i &lt;= n; ++i)</span><br><span class="line">&#123;</span><br><span class="line">    read(x);</span><br><span class="line">    add(i, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>按照上文的思路查询。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        s += c[x];</span><br><span class="line">        x -= lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们就学会了最简单的树状数组。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> c[<span class="number">500010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">lowbit</span><span class="params">(<span class="keyword">int</span> x)</span> </span>&#123; <span class="keyword">return</span> x &amp; -x; &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> k)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (x &lt;= n)</span><br><span class="line">    &#123;</span><br><span class="line">        c[x] += k;</span><br><span class="line">        x += lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x &gt;= <span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        s += c[x];</span><br><span class="line">        x -= lowbit(x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>, x; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(x);</span><br><span class="line">        add(i, x);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (m--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> opt, l, r;</span><br><span class="line">        read(opt), read(l), read(r);</span><br><span class="line">        <span class="keyword">if</span> (opt == <span class="number">1</span>)   add(l, r);</span><br><span class="line">        <span class="keyword">else</span>    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, query(r) - query(l - <span class="number">1</span>));    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h3><p><a href="https://www.hackerearth.com/zh/practice/notes/binary-indexed-tree-or-fenwick-tree/" target="_blank" rel="noopener">Binary Indexed Tree or Fenwick Tree | Hacker Earth</a></p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 树状数组 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[SCOI2005] 骑士精神</title>
      <link href="/2020/01/12/SCOI2005-%E9%AA%91%E5%A3%AB%E7%B2%BE%E7%A5%9E/"/>
      <url>/2020/01/12/SCOI2005-%E9%AA%91%E5%A3%AB%E7%B2%BE%E7%A5%9E/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2151" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：给出一个 $5 \times 5$ 的棋盘的初始状态，问最少经过多少步可以到达目标状态。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>考虑将问题转换为移动空格，然后对暴力进行优化。</p><p>这道题的估价函数很好想，就是最终状态离当前状态差了多少，进行 IDA* 即可。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cctype&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> <span class="keyword">final</span>[<span class="number">7</span>][<span class="number">7</span>] = &#123;</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>&#125;,</span><br><span class="line">    &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dx[] = &#123;<span class="number">1</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">-1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">-2</span>, <span class="number">-2</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> dy[] = &#123;<span class="number">2</span>, <span class="number">-2</span>, <span class="number">2</span>, <span class="number">-2</span>, <span class="number">1</span>, <span class="number">-1</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> n = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> <span class="built_in">map</span>[<span class="number">20</span>][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> t, sx, sy;</span><br><span class="line"><span class="keyword">char</span> ch;</span><br><span class="line"><span class="keyword">bool</span> b, flag;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">h</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> cnt = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; ++i)</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">5</span>; ++j)</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">map</span>[i][j] != <span class="keyword">final</span>[i][j])</span><br><span class="line">                ++cnt;</span><br><span class="line">    <span class="keyword">return</span> cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">idaStar</span><span class="params">(<span class="keyword">int</span> dep, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> max)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (dep == max)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (!h())   b = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">8</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> nx = x + dx[i], ny = y + dy[i];</span><br><span class="line">        <span class="keyword">if</span> (nx &lt; <span class="number">1</span> || nx &gt; n || ny &lt; <span class="number">1</span> || ny &gt; n)   <span class="keyword">continue</span>;</span><br><span class="line">        <span class="built_in">std</span>::swap(<span class="built_in">map</span>[x][y], <span class="built_in">map</span>[nx][ny]);</span><br><span class="line">        <span class="keyword">if</span> (h() + dep &lt;= max) idaStar(dep + <span class="number">1</span>, nx, ny, max);</span><br><span class="line">        <span class="built_in">std</span>::swap(<span class="built_in">map</span>[x][y], <span class="built_in">map</span>[nx][ny]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(t);</span><br><span class="line">    <span class="keyword">while</span> (t--)</span><br><span class="line">    &#123;</span><br><span class="line">        b = <span class="literal">false</span>;</span><br><span class="line">        flag = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= n; ++j)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; ch;</span><br><span class="line">                <span class="keyword">if</span> (ch == <span class="string">'1'</span>)  <span class="built_in">map</span>[i][j] = <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">else</span>    <span class="keyword">if</span> (ch == <span class="string">'0'</span>)  <span class="built_in">map</span>[i][j] = <span class="number">0</span>;</span><br><span class="line">                <span class="keyword">else</span>    </span><br><span class="line">                &#123;</span><br><span class="line">                    sx = i;</span><br><span class="line">                    sy = j;</span><br><span class="line">                    <span class="built_in">map</span>[i][j] = <span class="number">2</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        <span class="keyword">if</span> (!h())</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">"0\n"</span>);</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">15</span> &amp;&amp; (!flag); ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            idaStar(<span class="number">0</span>, sx, sy, i);</span><br><span class="line">            <span class="keyword">if</span> (b)  </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, i);</span><br><span class="line">                flag = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (!flag)  <span class="built_in">printf</span>(<span class="string">"-1\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 搜索 </category>
          
          <category> IDA* </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SCOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hzwer 的分块入门 2</title>
      <link href="/2020/01/10/hzwer%E7%9A%84%E5%88%86%E5%9D%97%E5%85%A5%E9%97%A8-2/"/>
      <url>/2020/01/10/hzwer%E7%9A%84%E5%88%86%E5%9D%97%E5%85%A5%E9%97%A8-2/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/6278" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：写一种数据结构，支持区间修改（加法），询问区间内小于定值的元素个数。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>有了上一道题的分块经验，我们可以很轻松的写出区间修改的代码。</p><p>但是这道题还要求我们求出区间内小于定值的元素个数。</p><p>思考什么方法能快速的求出这个东西呢？</p><p>排序 + 二分。</p><p>所以我们可以先把块内元素排序，然后查询时二分即可。对于不在整块中的点，我们还是暴力修改，暴力统计答案。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">std</span>::<span class="built_in">vector</span> &lt;<span class="keyword">int</span>&gt; v[<span class="number">510</span>];</span><br><span class="line"><span class="keyword">int</span> a[<span class="number">50010</span>], add[<span class="number">50010</span>], pos[<span class="number">50010</span>];</span><br><span class="line"><span class="keyword">int</span> n, len;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sort</span><span class="params">(<span class="keyword">int</span> pos)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    v[pos].clear();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = (pos - <span class="number">1</span>) * len + <span class="number">1</span>; i &lt;= <span class="built_in">std</span>::min(pos * len, n); ++i)</span><br><span class="line">        v[pos].push_back(a[i]);</span><br><span class="line">    <span class="built_in">std</span>::sort(v[pos].begin(), v[pos].end());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= <span class="built_in">std</span>::min(pos[l] * len, r); ++i)</span><br><span class="line">        a[i] += c;</span><br><span class="line">    sort(pos[l]);</span><br><span class="line">    <span class="keyword">if</span> (pos[l] != pos[r])</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = (pos[r] - <span class="number">1</span>) * len + <span class="number">1</span>; i &lt;= r; ++i)</span><br><span class="line">            a[i] += c;</span><br><span class="line">        sort(pos[r]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = pos[l] + <span class="number">1</span>; i &lt;= pos[r] - <span class="number">1</span>; ++i)</span><br><span class="line">        add[i] += c;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">query</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> c)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> ans = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= <span class="built_in">std</span>::min(pos[l] * len, r); ++i)</span><br><span class="line">        <span class="keyword">if</span> (a[i] + add[pos[l]] &lt; c) </span><br><span class="line">            ++ans;</span><br><span class="line">    <span class="keyword">if</span> (pos[l] != pos[r])</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = (pos[r] - <span class="number">1</span>) * len + <span class="number">1</span>; i &lt;= r; ++i)</span><br><span class="line">            <span class="keyword">if</span> (a[i] + add[pos[r]] &lt; c)</span><br><span class="line">                ++ans;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = pos[l] + <span class="number">1</span>; i &lt;= pos[r] - <span class="number">1</span>; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x = c - add[i];</span><br><span class="line">        ans += <span class="built_in">std</span>::lower_bound(v[i].begin(), v[i].end(), x) - v[i].begin();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        read(a[i]);</span><br><span class="line">    len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        pos[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">        v[pos[i]].push_back(a[i]);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= len; ++i)</span><br><span class="line">        <span class="built_in">std</span>::sort(v[i].begin(), v[i].end());</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> opt, l, r, c;</span><br><span class="line">        read(opt), read(l), read(r), read(c);</span><br><span class="line">        <span class="keyword">if</span> (!opt)   update(l, r, c);</span><br><span class="line">        <span class="keyword">else</span>    query(l, r, c * c);    </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><p>分块大概需要思考的东西有以下：</p><ul><li>怎么整块查询？</li><li>对于不在整块中的点如何操作？</li><li>需要预处理什么（复杂度不能超过后面的操作）？</li></ul><p>另外，有一些特定的值，大概总结了一下：</p><p>首先，<code>len</code> 是块的长度。</p><ul><li><code>pos[i]</code> 第 $i$ 个点所在的块</li><li><code>pos[i - 1] * len + 1</code> 第 $i$ 个点所在的块的左端点</li><li><code>pos[i] * len</code> 第 $i$ 个点所在的块的右端点</li></ul><p>在实际操作中，往往还要加上 $\min$ 来保证范围。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 分块 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LOJ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hzwer 的分块入门 1</title>
      <link href="/2020/01/09/hzwer%E7%9A%84%E5%88%86%E5%9D%97%E5%85%A5%E9%97%A8-1/"/>
      <url>/2020/01/09/hzwer%E7%9A%84%E5%88%86%E5%9D%97%E5%85%A5%E9%97%A8-1/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/6277" target="_blank" rel="noopener">题目链接</a></p><p>题目大意：写一种数据结构，支持区间修改（加法），单点查询。</p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>分块的入门题肯定要拿分块写了。</p><p>其实这种东西我早有听说，就是一直懒得学……</p><p>分块，即意味着把整个序列分成若干个块（一般为 $\sqrt{n}$ 个），如果对应操作的范围在同一个块之间，那就对这个范围对应的块进行操作，如果不在同一个块，那就先处理范围包括的整块，然后暴力处理余下的部分。</p><p>个人认为分块跟线段树的差别就在于，线段树将一个序列每次划分成 2 块，相当于这个树的深度为 $\log n$，而分块只分三层，第一层是原序列，第二层是各个块，第三层就是单个点了。</p><p>而且分块的操作一般更加灵活，比起线段树能够支持更多的操作，写起来也更好写。</p><p>这道题需要支持区间修改，单点查询，我们可以考虑这样的思路：</p><p>首先除了原数组之外，我们定义一个 <code>add</code> 数组，代表某个块在若干次操作后加上的值。</p><p>如果修改的左右端点在同一个块中或者包括了若干个整块，那么直接修改这个块或者这若干个整块的 <code>add</code> 值。</p><p>如果不在，那就再将不在整块中的点暴力修改，不改变不在整块中的点所在的块的 <code>add</code> 值。</p><p>查询时输出序列中的点的值与所在块的 <code>add</code> 值的和。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><p>首先约定 $n$ 是原序列长度，$len = \sqrt n$ 是块的个数。</p><h4 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h4><p>显然，我们需要知道每个点所在的块是第几个。</p><p>这个可以手算，小学数学，随便推几个就可以看出第 $i$ 个点在第 $\dfrac{i - 1}{\sqrt{n}} + 1$ 个块中。</p><p>代码：</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    pos[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br></pre></td></tr></table></figure><h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><p>直接看代码吧。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= <span class="built_in">std</span>::min(pos[l] * len, r); ++i)</span><br><span class="line">    a[i] += c;</span><br></pre></td></tr></table></figure><p>处理左边多出来的点。<code>pos[l] * len</code> 就是第 $l$ 个点所在的块的右端点，这里取了一个 $\min$ 防止加到了不在范围内的数。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (pos[l] != pos[r])</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = (pos[r] - <span class="number">1</span>) * len + <span class="number">1</span>; i &lt;= r; ++i)</span><br><span class="line">        a[i] += c;</span><br></pre></td></tr></table></figure><p>处理右边多出来的点，这个应该好理解了，<code>(pos[r] - 1) * len + 1</code> 就是第 $r$ 所在的块的左端点，然后暴力修改。</p><p>那为什么要加一个判断呢？为了防止和第一段代码处理的区间重复。</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = pos[l] + <span class="number">1</span>; i &lt;= pos[r] - <span class="number">1</span>; ++i)</span><br><span class="line">    add[i] += c;</span><br></pre></td></tr></table></figure><p>处理整块。注意这里是从 <code>pos[l] + 1</code> 到 <code>pos[r] - 1</code>。对于 $l$ 和 $r$ 正好在某一个区间的左右端点上时会采用会直接用第一段代码求解，毕竟不差那点时间（大雾）。</p><h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><p>直接输出 <code>a[i] + add[pos[i]]</code>。</p><h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Block</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> add[<span class="number">50010</span>], pos[<span class="number">50010</span>];</span><br><span class="line">    <span class="keyword">int</span> len;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">init</span><span class="params">(<span class="keyword">int</span> n)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">            pos[i] = (i - <span class="number">1</span>) / len + <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">update</span><span class="params">(<span class="keyword">int</span> l, <span class="keyword">int</span> r, <span class="keyword">int</span> c, <span class="keyword">int</span> *a)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= <span class="built_in">std</span>::min(pos[l] * len, r); ++i)</span><br><span class="line">            a[i] += c;</span><br><span class="line">        <span class="keyword">if</span> (pos[l] != pos[r])</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = (pos[r] - <span class="number">1</span>) * len + <span class="number">1</span>; i &lt;= r; ++i)</span><br><span class="line">                a[i] += c;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = pos[l] + <span class="number">1</span>; i &lt;= pos[r] - <span class="number">1</span>; ++i)</span><br><span class="line">            add[i] += c;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; block;</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a[<span class="number">50010</span>];</span><br><span class="line"><span class="keyword">int</span> n, l, r, opt, c;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    block.len = <span class="built_in">sqrt</span>(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        read(a[i]);</span><br><span class="line">    block.init(n);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(opt), read(l), read(r), read(c);</span><br><span class="line">        <span class="keyword">if</span> (opt)    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; a[r] + block.add[block.pos[r]] &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">        <span class="keyword">else</span>    block.update(l, r, c, a);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 分块 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> LOJ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[USACO07DEC] Building Roads</title>
      <link href="/2020/01/03/USACO07DEC-Building-Roads/"/>
      <url>/2020/01/03/USACO07DEC-Building-Roads/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2872" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>一道最小生成树的裸题，只不过有些边已经连好了。</p><p>所以我们只需要对连好的边进行一下处理，把他们的起点和终点在跑最小生成树前就放在同一集合里，如果两个点还没有在同一集合里的话就把边数加 1。</p><p>然后我们会发现只有 60 分，为什么呢？</p><p>因为这道 ** 题卡精度，我们在求两点距离时把能加 <code>double</code> 的地方都加上就能过了。</p><p>另外还有一种做法是在处理修好的路时加一条边权为 0 的边，这样也是对的。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cmath&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v;</span><br><span class="line">    <span class="keyword">double</span> dis;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge &amp;a, <span class="keyword">const</span> Edge &amp;b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &lt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; edge[<span class="number">1000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">double</span> ans;</span><br><span class="line"><span class="keyword">int</span> find[<span class="number">1010</span>], x[<span class="number">1010</span>], y[<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, tot, cnt; </span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> find[x] == x ? x : find[x] = unionFind(find[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">kruskal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::sort(edge + <span class="number">1</span>, edge + tot + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= tot; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u = unionFind(edge[i].u), v = unionFind(edge[i].v);</span><br><span class="line">        <span class="keyword">if</span> (u == v) <span class="keyword">continue</span>;</span><br><span class="line">        find[u] = v;</span><br><span class="line">        ans += edge[i].dis;</span><br><span class="line">        <span class="keyword">if</span> (++cnt == n - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        find[i] = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(x[i]), read(y[i]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt; i; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">double</span> dis = (<span class="keyword">double</span>)<span class="built_in">sqrt</span>((<span class="keyword">double</span>)(x[i] - x[j]) * (x[i] - x[j]) + (<span class="keyword">double</span>)(y[i] - y[j]) * (y[i] - y[j]));</span><br><span class="line">            edge[++tot].u = i;</span><br><span class="line">            edge[tot].v = j;</span><br><span class="line">            edge[tot].dis = dis;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v;</span><br><span class="line">        read(u), read(v);</span><br><span class="line">        u = unionFind(u), v = unionFind(v);</span><br><span class="line">        <span class="keyword">if</span> (u != v) ++cnt;</span><br><span class="line">        find[u] = v;</span><br><span class="line">    &#125;</span><br><span class="line">    kruskal();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h3><p>从这道题学到了卡精度的毒瘤，以后有机会给别人出题的话一定要卡一次（大雾）。</p>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最小生成树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> USACO </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[SCOI2012] 滑雪</title>
      <link href="/2019/12/29/SCOI2012-%E6%BB%91%E9%9B%AA/"/>
      <url>/2019/12/29/SCOI2012-%E6%BB%91%E9%9B%AA/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2373" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>一道比较综合的最小生成树的题。</p><p>显然，不能在读入时就建图，否则有些边会因为题目中 $h_i \ge h_j$ 的限制而出错。</p><p>所以在第一次读入时建图后从第一个点开始广搜建立新图，对新图求最小生成树。</p><p>这时结构体里的比较函数也要改变，以高度为第一关键字，长度为第二关键字排序，才能保证题目的要求。</p><p>题目里还要求求出最多可能到达的点，这个在广搜的时候处理就行。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge1</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, next, dis;</span><br><span class="line">&#125; edge1[<span class="number">2000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge2</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> u, v, dis;</span><br><span class="line">&#125; edge2[<span class="number">2000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> nowPos, lastPos;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> ans;</span><br><span class="line"><span class="keyword">int</span> find[<span class="number">100010</span>], head[<span class="number">100010</span>], h[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, tot, cnt, cnt2, sum;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Edge2 &amp;a, <span class="keyword">const</span> Edge2 &amp;b)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (h[a.v] == h[b.v])   <span class="keyword">return</span> a.dis &lt; b.dis;</span><br><span class="line">    <span class="keyword">return</span> h[a.v] &gt; h[b.v];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addEdge1</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge1[++cnt].to = y;</span><br><span class="line">    edge1[cnt].dis = dis;</span><br><span class="line">    edge1[cnt].next = head[x];</span><br><span class="line">    head[x] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addEdge2</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge2[++cnt2].u = x;</span><br><span class="line">    edge2[cnt2].v = y;</span><br><span class="line">    edge2[cnt2].dis = dis;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">unionFind</span><span class="params">(<span class="keyword">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> find[x] == x ? x : find[x] = unionFind(find[x]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">kruskal</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::sort(edge2 + <span class="number">1</span>, edge2 + cnt2 + <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt2; ++i)</span><br><span class="line">    &#123;   </span><br><span class="line">        <span class="keyword">int</span> u = unionFind(edge2[i].u), v = unionFind(edge2[i].v);</span><br><span class="line">        <span class="keyword">if</span> (u == v) <span class="keyword">continue</span>;</span><br><span class="line">        ans += edge2[i].dis;</span><br><span class="line">        find[u] = v;</span><br><span class="line">        <span class="keyword">if</span> (++tot == n - <span class="number">1</span>) <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bfs</span><span class="params">(<span class="keyword">int</span> start)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">queue</span> &lt;Node&gt; que;</span><br><span class="line">    que.push((Node)&#123;start, <span class="number">0</span>&#125;);</span><br><span class="line">    vis[start] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">while</span> (!que.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        Node now = que.front();</span><br><span class="line">        que.pop();</span><br><span class="line">        <span class="keyword">int</span> nowPos = now.nowPos;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[nowPos]; ~i; i = edge1[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> to = edge1[i].to;</span><br><span class="line">            <span class="comment">// if (to == now.lastPos)  continue;</span></span><br><span class="line">            addEdge2(nowPos, to, edge1[i].dis);</span><br><span class="line">            <span class="keyword">if</span> (!vis[to])</span><br><span class="line">            &#123;</span><br><span class="line">                vis[to] = <span class="literal">true</span>;</span><br><span class="line">                ++sum;</span><br><span class="line">                que.push((Node)&#123;to, nowPos&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">    read(n), read(m);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        read(h[i]);</span><br><span class="line">        find[i] = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> u, v, k;</span><br><span class="line">        read(u), read(v), read(k);</span><br><span class="line">        <span class="keyword">if</span> (h[u] &gt;= h[v])   addEdge1(u, v, k);</span><br><span class="line">        <span class="keyword">if</span> (h[u] &lt;= h[v])   addEdge1(v, u, k);</span><br><span class="line">    &#125;</span><br><span class="line">    bfs(<span class="number">1</span>);</span><br><span class="line">    kruskal();</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d %lld"</span>, sum + <span class="number">1</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最小生成树 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SCOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[HAOI2012] 音量调节</title>
      <link href="/2019/12/12/HAOI2012-%E9%9F%B3%E9%87%8F%E8%B0%83%E8%8A%82/"/>
      <url>/2019/12/12/HAOI2012-%E9%9F%B3%E9%87%8F%E8%B0%83%E8%8A%82/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P1877" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>一道变形的01背包。</p><p>显然，每次音量只能加或减。</p><p>那么判断一下边界，以能否达到某音量作为状态转移即可。</p><p>设状态 $f_{i, j}$ 表示第 $i$ 首歌能否达到 $j$ 音量。</p><p>状态转移方程为</p><p>$$f_{i, j + c_i} = true (f_{i - 1, j} = true, j + c_i \le max)$$</p><p>$$f_{i, j - c_i} = true (f_{i - 1, j} = true, j - c_i \ge 0)$$</p><p>初始条件 $f_{0, begin} = true$。</p><p>最后从 $max$ 循环到 $0$，如果 $f_{n, i} = true$ 则说明 $i$ 为答案，否则无解。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> c[<span class="number">60</span>];</span><br><span class="line"><span class="keyword">int</span> n, begin, max;</span><br><span class="line"><span class="keyword">bool</span> f[<span class="number">60</span>][<span class="number">1010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; begin &gt;&gt; max;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; c[i];</span><br><span class="line">    f[<span class="number">0</span>][begin] = <span class="literal">true</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = max; j &gt;= <span class="number">0</span>; --j)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (j - c[i] &gt;= <span class="number">0</span> &amp;&amp; f[i - <span class="number">1</span>][j])</span><br><span class="line">                f[i][j - c[i]] = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">if</span> (j + c[i] &lt;= max &amp;&amp; f[i - <span class="number">1</span>][j])</span><br><span class="line">                f[i][j + c[i]] = <span class="literal">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = max; i; --i)</span><br><span class="line">        <span class="keyword">if</span> (f[n][i])</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; i &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="string">"-1"</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 动态规划 </category>
          
          <category> 背包 DP </category>
          
      </categories>
      
      
        <tags>
            
            <tag> HAOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[SCOI2011] 糖果</title>
      <link href="/2019/12/10/SCOI2011-%E7%B3%96%E6%9E%9C/"/>
      <url>/2019/12/10/SCOI2011-%E7%B3%96%E6%9E%9C/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://loj.ac/problem/2436" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>一道差分约束系统的模板题。</p><p>差分约束系统指的是，在一个序列 $a_1, a_2, a_3, \cdots, a_n$ 中，有 $m$ 个形如 $a_i - a_j \le k$ 的约束条件，其中 $k$ 是常数。</p><p>我们需要求出一种方法，使得所有的约束条件得到满足，否则判断出无解。</p><p>对于任何一个约束条件 $a_i - a_j \le k$ 都可以变形为 $a_i \le a_j + k$，这与最短路算法中的松弛操作很像。所以我们可以把每个 $a_i$ 看为一个图中的点，每个约束条件 $a_i - a_j \le k$ 看为一条从 $j$ 到 $i$ 的权值为 $k$ 的边。</p><p>求解时，设 <code>dis[0] = 0</code>，并向每个点连一条边，以 $0$ 为起点跑单源最短路。如果图中存在负环，则说明无解，否则 <code>dis</code> 数组即为原差分约束系统的一组解。</p><p>注意到如果 <code>dis</code> 数组是一组解，那么对于任意常数 $d$， <code>dis[i] + d</code> 也是一组解。</p><p>对于这道题，题目给出了五种操作，依次判断即可。<strong>需要注意的是，在进行变形的时候一定要根据实际情况来判断，而不是生硬的按照公式来变形，不然就会导致出错。</strong></p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> LL;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> to, next, dis;</span><br><span class="line">&#125; edge[<span class="number">300010</span>];</span><br><span class="line"></span><br><span class="line">LL ans;</span><br><span class="line"><span class="keyword">int</span> head[<span class="number">100010</span>], dis[<span class="number">100010</span>], times[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, k, cnt;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">bool</span> flag = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++cnt].to = y;</span><br><span class="line">    edge[cnt].dis = dis;</span><br><span class="line">    edge[cnt].next = head[x];</span><br><span class="line">    head[x] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">-0x3f3f3f3f</span>, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    vis[s] = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line">    que.push(s);</span><br><span class="line">    <span class="keyword">while</span> (!que.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> now = que.front();</span><br><span class="line">        vis[now] = <span class="literal">false</span>;</span><br><span class="line">        que.pop();</span><br><span class="line">        <span class="keyword">if</span> (++times[now] == n)</span><br><span class="line">        &#123;</span><br><span class="line">            flag = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">return</span> ;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[now]; ~i; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">int</span> to = edge[i].to;</span><br><span class="line">            <span class="keyword">if</span> (dis[to] &lt; dis[now] + edge[i].dis)</span><br><span class="line">            &#123;</span><br><span class="line">                dis[to] = dis[now] + edge[i].dis;</span><br><span class="line">                <span class="keyword">if</span> (!vis[to])</span><br><span class="line">                &#123;</span><br><span class="line">                    vis[to] = <span class="literal">true</span>;</span><br><span class="line">                    que.push(to);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">    read(n), read(k);</span><br><span class="line">    <span class="keyword">while</span> (k--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> x, a, b;</span><br><span class="line">        read(x), read(a), read(b);</span><br><span class="line">        <span class="keyword">switch</span> (x)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">1</span>: addEdge(a, b, <span class="number">0</span>);   addEdge(b, a, <span class="number">0</span>);   <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">2</span>: </span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (a == b)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                addEdge(a, b, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">3</span>: addEdge(b, a, <span class="number">0</span>);   <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (a == b)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">                    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                addEdge(b, a, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">case</span> <span class="number">5</span>: addEdge(a, b, <span class="number">0</span>);   <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = n; i &gt;= <span class="number">1</span>; --i)</span><br><span class="line">        addEdge(<span class="number">0</span>, i, <span class="number">1</span>);</span><br><span class="line">    spfa(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">        ans += dis[i];</span><br><span class="line">    <span class="keyword">if</span> (!flag)  <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; <span class="number">-1</span> &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">else</span>    <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 差分约束 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SCOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[JLOI2011] 飞行路线</title>
      <link href="/2019/11/25/JLOI2011-%E9%A3%9E%E8%A1%8C%E8%B7%AF%E7%BA%BF/"/>
      <url>/2019/11/25/JLOI2011-%E9%A3%9E%E8%A1%8C%E8%B7%AF%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P4568" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>题目给了我们一个图，但是我们可以免费通过任何一条边 $k$ 次，求在这种情况下的单源最短路。</p><p>这里就要引入分层图的概念。顾名思义，分层图中有很多层，其中每一层都有一条到下一层的权值为 0 的有向边。</p><p>也就是说，对于每一条边，它的起点会向下一层的这条边的终点引一条权值为 0 的边。</p><p>这样一来，我们的答案即为 <code>dis[t + n * k]</code>，其中 $t$ 为终点，$n$ 为点的个数，随便写个最短路就行。</p><p>但是这样一来，随着图规模的增大，算法的时间复杂度也会增大，这种方法的时间复杂度为 $O(km^2 \log m)$，在极端数据下会超时。</p><p>有没有优化的方法呢？</p><p>我们来看看关键的松弛操作</p><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (dis[edge[i].to] &gt; dis[top.pos] + edge[i].dis)</span><br><span class="line">&#123;</span><br><span class="line">    dis[edge[i].to] = dis[top.pos] + edge[i].dis;</span><br><span class="line">    que.push((Node)&#123;edge[i].to, dis[edge[i].to]&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>再考虑一下给出的 $k$，我们就可能联想到 dp <del>反正我是没想到</del>。</p><p>设 $dis_{i, j}$ 表示第 $i$ 个结点时用了 $j$ 次免费的最短路长度，则状态转移方程为</p><p>$$dis_{i, j} = \min { \min { dis_{from, j-1} } , \min { dis_{from, j} + w } }$$</p><p>其中 $from$ 是转移前的点，$w$ 是当前边的权值。</p><p>在进行 dijkstra 的时候判断一下即可。</p><p>另外的，$dis_{i, j}$ 在最开始时要全部设为 $+\infty$。</p><p>我们就成功的在 $O(km \log m)$ 的时间复杂度内完成了此题。</p><p>这道题还有一个小坑点，编号是从 0 开始的。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> reg register</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt;</span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span>(<span class="title">T</span> &amp;<span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> ch = getchar();</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">isdigit</span>(ch))    &#123; f |= ch == <span class="string">'-'</span>; ch = getchar(); &#125;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">isdigit</span>(ch))     &#123; x = (x &lt;&lt; <span class="number">1</span>) + (x &lt;&lt; <span class="number">3</span>) + (ch ^ <span class="number">48</span>); ch = getchar(); &#125;</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> solve1</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x7f7f7f7f</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, dis;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span>&lt;(<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &gt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> next, to, dis;</span><br><span class="line">&#125; edge[<span class="number">5000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> head[<span class="number">100010</span>], dis[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k, s, t, cnt;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">100010</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++cnt].to = y;</span><br><span class="line">    edge[cnt].dis = dis;</span><br><span class="line">    edge[cnt].next = head[x];</span><br><span class="line">    head[x] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dis, inf, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="built_in">std</span>::priority_queue&lt;Node&gt; que;</span><br><span class="line">    que.push((Node)&#123;s, <span class="number">0</span>&#125;);</span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (!que.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        Node top = que.top();</span><br><span class="line">        que.pop();</span><br><span class="line">        <span class="keyword">if</span> (vis[top.pos])</span><br><span class="line">            <span class="keyword">continue</span>;</span><br><span class="line">        vis[top.pos] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (reg <span class="keyword">int</span> i = head[top.pos]; ~i; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis[edge[i].to] &gt; dis[top.pos] + edge[i].dis)</span><br><span class="line">            &#123;</span><br><span class="line">                dis[edge[i].to] = dis[top.pos] + edge[i].dis;</span><br><span class="line">                que.push((Node)&#123;edge[i].to, dis[edge[i].to]&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">spfa</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dis, inf, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">queue</span>&lt;<span class="keyword">int</span>&gt; que;</span><br><span class="line">    vis[s] = <span class="literal">true</span>;</span><br><span class="line">    dis[s] = <span class="number">0</span>;</span><br><span class="line">    que.push(s);</span><br><span class="line">    <span class="keyword">while</span> (!que.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> now = que.front();</span><br><span class="line">        que.pop();</span><br><span class="line">        vis[now] = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (reg <span class="keyword">int</span> i = head[now]; ~i; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (dis[edge[i].to] &gt; dis[now] + edge[i].dis)</span><br><span class="line">            &#123;</span><br><span class="line">                dis[edge[i].to] = dis[now] + edge[i].dis;</span><br><span class="line">                <span class="keyword">if</span> (!vis[edge[i].to])</span><br><span class="line">                &#123;</span><br><span class="line">                    vis[edge[i].to] = <span class="literal">true</span>;</span><br><span class="line">                    que.push(edge[i].to);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">    read(n), read(m), read(k);</span><br><span class="line">    read(s), read(t);</span><br><span class="line">    <span class="keyword">for</span> (reg <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        read(a), read(b), read(c);</span><br><span class="line">        addEdge(a, b, c);</span><br><span class="line">        addEdge(b, a, c);</span><br><span class="line">        <span class="keyword">for</span> (reg <span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= k; ++j)</span><br><span class="line">        &#123;</span><br><span class="line">            addEdge(a + (j - <span class="number">1</span>) * n, b + j * n, <span class="number">0</span>);</span><br><span class="line">            addEdge(b + (j - <span class="number">1</span>) * n, a + j * n, <span class="number">0</span>);</span><br><span class="line">            addEdge(a + j * n, b + j * n, c);</span><br><span class="line">            addEdge(b + j * n, a + j * n, c);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (reg <span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= k; ++i)</span><br><span class="line">        addEdge(t + (i - <span class="number">1</span>) * n, t + i * n, <span class="number">0</span>);</span><br><span class="line">    dijkstra(s);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, dis[t + k * n]);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125; <span class="comment">// solve1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> solve2</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> inf = <span class="number">0x7f7f7f7f</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> pos, dis, cnt;</span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.dis &gt; b.dis;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; ;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Edge</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> next, to, dis;</span><br><span class="line">&#125; edge[<span class="number">5000010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> dis[<span class="number">100010</span>][<span class="number">20</span>];</span><br><span class="line"><span class="keyword">int</span> head[<span class="number">100010</span>];</span><br><span class="line"><span class="keyword">int</span> n, m, k, s, t, cnt;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">100010</span>][<span class="number">20</span>];</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">addEdge</span><span class="params">(<span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> dis)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    edge[++cnt].to = y;</span><br><span class="line">    edge[cnt].dis = dis;</span><br><span class="line">    edge[cnt].next = head[x];</span><br><span class="line">    head[x] = cnt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">inline</span> <span class="keyword">void</span> <span class="title">dijkstra</span><span class="params">(<span class="keyword">int</span> s)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(dis, <span class="number">0x7f7f7f7f</span>, <span class="keyword">sizeof</span>(dis));</span><br><span class="line">    dis[s][<span class="number">0</span>] = <span class="number">0</span>;</span><br><span class="line">    <span class="built_in">std</span>::priority_queue &lt;Node&gt; que;</span><br><span class="line">    que.push((Node)&#123;s, <span class="number">0</span>, <span class="number">0</span>&#125;);</span><br><span class="line">    <span class="keyword">while</span> (!que.empty())</span><br><span class="line">    &#123;</span><br><span class="line">        Node top = que.top();</span><br><span class="line">        que.pop();</span><br><span class="line">        <span class="keyword">if</span> (vis[top.pos][top.cnt])  <span class="keyword">continue</span>;</span><br><span class="line">        vis[top.pos][top.cnt] = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = head[top.pos]; ~i; i = edge[i].next)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (top.cnt &lt; k &amp;&amp; dis[edge[i].to][top.cnt + <span class="number">1</span>] &gt; dis[top.pos][top.cnt])</span><br><span class="line">            &#123;</span><br><span class="line">                dis[edge[i].to][top.cnt + <span class="number">1</span>] = dis[top.pos][top.cnt];</span><br><span class="line">                que.push((Node)&#123;edge[i].to, dis[edge[i].to][top.cnt + <span class="number">1</span>], top.cnt + <span class="number">1</span>&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (dis[edge[i].to][top.cnt] &gt; dis[top.pos][top.cnt] + edge[i].dis)</span><br><span class="line">            &#123;</span><br><span class="line">                dis[edge[i].to][top.cnt] = dis[top.pos][top.cnt] + edge[i].dis;</span><br><span class="line">                que.push(Node&#123;edge[i].to, dis[edge[i].to][top.cnt], top.cnt&#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="comment">// solve2</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">memset</span>(head, <span class="number">-1</span>, <span class="keyword">sizeof</span>(head));</span><br><span class="line">    read(n), read(m), read(k);</span><br><span class="line">    read(s), read(t);</span><br><span class="line">    ++s, ++t;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= m; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> a, b, c;</span><br><span class="line">        read(a), read(b), read(c);</span><br><span class="line">        ++a;</span><br><span class="line">        ++b;</span><br><span class="line">        addEdge(a, b, c);</span><br><span class="line">        addEdge(b, a, c);</span><br><span class="line">    &#125;</span><br><span class="line">    dijkstra(s);</span><br><span class="line">    <span class="keyword">int</span> ans = inf;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= k; ++i)</span><br><span class="line">        ans = <span class="built_in">std</span>::min(ans, dis[t][i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//solve1::main();</span></span><br><span class="line">    solve2::main();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 图论 </category>
          
          <category> 最短路 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JLOI </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2016] 海港</title>
      <link href="/2019/10/25/NOIp2016-%E6%B5%B7%E6%B8%AF/"/>
      <url>/2019/10/25/NOIp2016-%E6%B5%B7%E6%B8%AF/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P2058" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a>   <h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>我们拿到这道题，最先想到的应该是按照每艘船存储，但是这样的话在 $t_i \ge 86400$ 时就很难更新答案。</p><p>我们不妨换个思路，按照人来存储。因为 $\sum_{}^{} k_i \le 3 \times 10 ^ 5$，所以我们可以用一个桶来存储，这样就可以方便的更新答案了。</p><p>每读入一艘船，我们就把船上的人依次入队，用桶更新答案。如果当前时间大于 86400，就把队首往后移，每次更新桶，如果桶中的元素从大于 0 变为了 0 则让答案减一。</p><p>感觉这是这几年来 PJ T4 最简单的一道题了。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="keyword">int</span> t[<span class="number">300010</span>], s[<span class="number">300010</span>], x[<span class="number">300010</span>], n, k, i, ans, j;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;n);</span><br><span class="line">    <span class="keyword">while</span>(n--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> time;</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">"%d %d"</span>, &amp;time, &amp;k);</span><br><span class="line">        <span class="keyword">while</span>(k--)</span><br><span class="line">        &#123;</span><br><span class="line">            t[++i] = time;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;x[i]);</span><br><span class="line">            <span class="keyword">if</span>(!s[x[i]])   ++ans;</span><br><span class="line">            ++s[x[i]];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">while</span>(time - t[j] &gt;= <span class="number">86400</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            --s[x[j]];</span><br><span class="line">            <span class="keyword">if</span>(!s[x[j]])    --ans;</span><br><span class="line">            ++j;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"%d\n"</span>, ans);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 模拟 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[Openjudge2719] Blah数集</title>
      <link href="/2019/10/25/openjudge2719-Blah%E6%95%B0%E9%9B%86%E9%A2%98%E8%A7%A3/"/>
      <url>/2019/10/25/openjudge2719-Blah%E6%95%B0%E9%9B%86%E9%A2%98%E8%A7%A3/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="http://noi.openjudge.cn/ch0304/2729/" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h3><p>说实话拿到这道题我是懵的…</p><p>后来在 woshiluo 大佬的指点下，有了一点思路。</p><p>从题目中可以看出，集合 B 是升序排列的，于是我们可以用两个队列来存储 $2x + 1$ 和 $3x + 1$ 的值，然后每次将两个队列的队尾中较小的那个值作为新的 $x$ 值，这样就可以保证升序。</p><p>另外有一个小坑点，集合中的元素不能重复，所以需要特判当两个队列的队尾相等时的情况。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> a, n;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; a &gt;&gt; n)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">queue</span> &lt;<span class="keyword">int</span>&gt; q2, q3;</span><br><span class="line">        q2.push(a * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">        q3.push(a * <span class="number">3</span> + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">while</span> (--n)</span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">if</span> (q2.front() &lt; q3.front())</span><br><span class="line">            &#123;</span><br><span class="line">                a = q2.front();</span><br><span class="line">                q2.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span>    <span class="keyword">if</span> (q2.front() == q3.front())</span><br><span class="line">            &#123;      </span><br><span class="line">                a = q2.front();</span><br><span class="line">                q2.pop(), q3.pop();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                a = q3.front();</span><br><span class="line">                q3.pop();</span><br><span class="line">            &#125;  </span><br><span class="line">            q2.push(a * <span class="number">2</span> + <span class="number">1</span>);</span><br><span class="line">            q3.push(a * <span class="number">3</span> + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cout</span> &lt;&lt; a &lt;&lt; <span class="built_in">std</span>::<span class="built_in">endl</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 数据结构 </category>
          
          <category> 队列 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Openjudge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[NOIp2017] 奶酪</title>
      <link href="/2019/10/22/NOIp-2017-%E5%A5%B6%E9%85%AA/"/>
      <url>/2019/10/22/NOIp-2017-%E5%A5%B6%E9%85%AA/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://www.luogu.com.cn/problem/P3958" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>首先考虑怎么判断两个球是否互相连通。</p><p>容易想到当球心距小于等于 $2r$ 时两球相交。为了防止精度误差，我们将等式两边同时平方，即当 $(x_1-x_2)^2 + (y_1-y_2)^2 + (z_1-z_2)^2 \le 4r^2$ 时两球相交。</p><p>再考虑怎么判断能否从下表面进入一个球，容易想到当 $z - r \le 0$ 时可以进入这个球。</p><p>同理，当 $z + r \ge h$ 时可以到上表面。</p><p>于是我们可以写出 40 分的代码。</p><h3 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h3><p>对于这样一道水题，40 分肯定是不行的，于是我们考虑对我们的程序进行优化。</p><p>不难想出在每一次遍历一个球时，我们可以考虑给它打上标记。如果在搜索时搜到了已经搜过的球，就直接跳过搜下一个，这样我们就把时间复杂度降低为了 $O(n)$ 。</p><p>另外要注意因为涉及到平方运算，有可能会爆 int，所以要开 long long。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">long</span> <span class="keyword">long</span> x, y, z;</span><br><span class="line">&#125; p[<span class="number">1010</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> <span class="keyword">long</span> t, n, h, r;</span><br><span class="line"><span class="keyword">bool</span> vis[<span class="number">1010</span>];</span><br><span class="line"><span class="keyword">bool</span> b = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">dfs</span><span class="params">(<span class="keyword">long</span> <span class="keyword">long</span> x, <span class="keyword">long</span> <span class="keyword">long</span> y, <span class="keyword">long</span> <span class="keyword">long</span> z)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (z + r &gt;= h)</span><br><span class="line">    &#123;</span><br><span class="line">        b = <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">return</span> ;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (vis[i]) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">if</span> ((x - p[i].x) * (x - p[i].x) + (y - p[i].y) * (y - p[i].y) + (z - p[i].z) * (z - p[i].z) &lt;= <span class="number">4</span> * r * r)</span><br><span class="line">        &#123;</span><br><span class="line">            vis[i] = <span class="literal">true</span>;</span><br><span class="line">            dfs(p[i].x, p[i].y, p[i].z);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; t;</span><br><span class="line">    <span class="keyword">while</span> (t--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">memset</span>(vis, <span class="literal">false</span>, <span class="keyword">sizeof</span>(vis));</span><br><span class="line">        b = <span class="literal">false</span>;</span><br><span class="line">        <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; n &gt;&gt; h &gt;&gt; r;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">            <span class="built_in">std</span>::<span class="built_in">cin</span> &gt;&gt; p[i].x &gt;&gt; p[i].y &gt;&gt; p[i].z;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n &amp;&amp; (!b); ++i)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> ((!vis[i]) &amp;&amp; p[i].z - r &lt;= <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                dfs(p[i].x, p[i].y, p[i].z);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">puts</span>(b ? <span class="string">"Yes"</span> : <span class="string">"No"</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 搜索 </category>
          
          <category> DFS </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NOIp </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[CF3B] Lorry</title>
      <link href="/2019/10/22/CF3B-Lorry/"/>
      <url>/2019/10/22/CF3B-Lorry/</url>
      
        <content type="html"><![CDATA[<h3 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h3><p><a href="https://vjudge.net/problem/CodeForces-3B" target="_blank" rel="noopener">题目链接</a></p><a id="more"></a><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><p>在不考虑数据范围的情况下可以看出是一道 01 背包裸题。</p><p>但是 $v\le 10^9$，$n\le10^5$ ，妥妥的超时。</p><p>考虑对 01 背包的优化，我们也很难想出其他的优化方法。</p><p>注意到每个物体的体积只能为 1 或 2，于是考虑贪心，把体积为 1 和体积为 2 的物品分别存到两个数组中，并且从大到小排序，枚举取 $x$ 个体积为 1 的物品，则可以取 $\frac{v-x}{2}$ 个体积为 2 的物品，每次更新答案即可。</p><p>在前缀和优化后时间复杂度 $O(n \log n)$ 。</p><h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Lorry</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstdio&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;algorithm&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;cstring&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iomanip&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;map&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;set&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;queue&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stack&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; </span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">read</span> (<span class="title">T</span> &amp;<span class="title">x</span>) </span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    x = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">char</span> c = getchar();</span><br><span class="line">    <span class="keyword">bool</span> f = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (; !<span class="built_in">isdigit</span>(c); c = getchar())  f ^= c == <span class="string">'-'</span>;</span><br><span class="line">    <span class="keyword">for</span> (; <span class="built_in">isdigit</span>(c); c = getchar())   x = x * <span class="number">10</span> + (c ^ <span class="number">48</span>);</span><br><span class="line">    x = f ? -x : x;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">template</span> &lt;<span class="class"><span class="keyword">class</span> <span class="title">T</span>&gt; </span></span><br><span class="line"><span class="class"><span class="title">inline</span> <span class="title">void</span> <span class="title">write</span> (<span class="title">T</span> <span class="title">x</span>)</span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">'-'</span>);</span><br><span class="line">        x = -x;</span><br><span class="line">    &#125;</span><br><span class="line">    T y = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (; y &lt;= x / <span class="number">10</span>; y *= <span class="number">10</span>)   ++len;</span><br><span class="line">    <span class="keyword">for</span> (; len; --len, x %= y, y /= <span class="number">10</span>) <span class="built_in">putchar</span>(x / y + <span class="number">48</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">int</span> maxn = <span class="number">1e5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">int</span> id, p;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">friend</span> <span class="keyword">bool</span> <span class="keyword">operator</span> &lt; (<span class="keyword">const</span> Node &amp;a, <span class="keyword">const</span> Node &amp;b)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> a.p &gt; b.p;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; t1[maxn], t2[maxn];</span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> pre[maxn];</span><br><span class="line"><span class="keyword">int</span> n, v, cnt1, cnt2, sum, ans, pos1, pos2;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    read(n);</span><br><span class="line">    read(v);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= n; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> t, p;</span><br><span class="line">        read(t), read(p);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (t == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            t1[++cnt1].p = p;</span><br><span class="line">            t1[cnt1].id = i; </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            t2[++cnt2].p = p;</span><br><span class="line">            t2[cnt2].id = i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">std</span>::sort(t1 + <span class="number">1</span>, t1 + cnt1 + <span class="number">1</span>);</span><br><span class="line">    <span class="built_in">std</span>::sort(t2 + <span class="number">1</span>, t2 + cnt2 + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= cnt2; ++i)</span><br><span class="line">        pre[i] = pre[i - <span class="number">1</span>] + t2[i].p;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="built_in">std</span>::min(v, cnt1); ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += t1[i].p;</span><br><span class="line">        <span class="keyword">if</span> (sum + pre[<span class="built_in">std</span>::min(cnt2, (v - i) / <span class="number">2</span>)] &gt; ans)</span><br><span class="line">        &#123;</span><br><span class="line">            ans = sum + pre[<span class="built_in">std</span>::min(cnt2, (v - i) / <span class="number">2</span>)];</span><br><span class="line">            pos1 = i;</span><br><span class="line">            pos2 = <span class="built_in">std</span>::min(cnt2, (v - i) / <span class="number">2</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    write(ans);</span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= pos1; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        write(t1[i].id);</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">' '</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= pos2; ++i)</span><br><span class="line">    &#123;</span><br><span class="line">        write(t2[i].id);</span><br><span class="line">        <span class="built_in">putchar</span>(<span class="string">' '</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">puts</span>(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> OI </category>
          
          <category> 算法基础 </category>
          
          <category> 贪心 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Codeforces </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
